import{$ as lt,$a as Q,A as Xo,Aa as oa,Ab as pe,B as ql,Ba as Zp,Bb as lg,C as Wp,Ca as tn,Cb as Ve,D as cs,Da as Xn,Db as Hi,E as Zo,Ea as fs,Eb as ug,F as Ot,Fa as Jp,Fb as dg,G as Hl,Ga as ms,Gb as it,H as Li,Ha as en,Hb as eu,I as ls,Ia as F,Ib as Gi,J as us,Ja as aa,Jb as hg,K as Gl,Ka as tg,Kb as _s,L as ie,La as ca,Lb as fg,M as ds,Ma as la,Mb as mg,N as Ui,Na as ps,Nb as nu,O as Jo,Oa as eg,Ob as pg,P as Cn,Pa as G,Q as Wl,Qa as Bi,R as Kp,Ra as he,Rb as vs,S as Kl,Sa as nn,Sb as ni,T as ta,Ta as ng,U as Ze,Ua as ig,Ub as rn,V as Ae,Va as rg,Vb as Wi,W as Rt,Wa as Zn,Wb as ii,X as Nt,Xa as De,Y as St,Ya as gs,Z as ji,Za as re,_ as U,_a as Jn,a as N,aa as Yp,ab as W,b as mt,ba as J,bb as kt,ca as Yl,cb as ua,d as En,da as x,db as sg,e as y,ea as j,eb as Re,f as Yn,fa as ce,fb as og,g as Vl,ga as hs,gb as ti,h as Fe,ha as Xt,hb as fe,i as Ll,ia as vt,ib as $t,j as Ul,ja as ut,jb as ei,k as at,ka as Ft,kb as zi,l as oe,la as Se,lb as xe,m as qp,ma as Qp,mb as ke,n as Hp,na as ea,nb as yt,o as Tn,oa as Qn,ob as Xl,p as jl,pa as An,pb as Zl,q as Bl,qa as na,qb as Jl,r as zl,ra as ia,rb as me,s as ae,sa as Je,sb as wt,t as q,ta as Ql,tb as $i,u as os,ua as le,ub as ag,v as $l,va as ra,vb as da,w as Gp,wa as bt,wb as ha,x as tt,xa as xt,xb as cg,y as as,ya as sa,yb as qi,z as ye,za as Xp,zb as tu}from"./chunk-2Z2YHHI5.js";var su=class extends dg{constructor(){super(...arguments),this.supportsDOMEvents=!0}},ou=class n extends su{static makeCurrent(){ug(new n)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=m0();return e==null?null:p0(e)}resetBaseElement(){bs=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return hg(document.cookie,t)}},bs=null;function m0(){return bs=bs||document.querySelector("base"),bs?bs.getAttribute("href"):null}function p0(n){return new URL(n,document.baseURI).pathname}var g0=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac});let n=t;return n})(),au=new J(""),vg=(()=>{let t=class t{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new St(5101,!1);return this._eventNameToPlugin.set(i,r),r}};t.\u0275fac=function(r){return new(r||t)(x(au),x(G))},t.\u0275prov=U({token:t,factory:t.\u0275fac});let n=t;return n})(),fa=class{constructor(t){this._doc=t}},iu="ng-app-id",bg=(()=>{let t=class t{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=nu(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${iu}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(iu),o;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(iu,this.appId),i.appendChild(c),c}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,c=o.get(r)?.elements;c?c.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};t.\u0275fac=function(r){return new(r||t)(x(it),x(oa),x(fs,8),x(tn))},t.\u0275prov=U({token:t,factory:t.\u0275fac});let n=t;return n})(),ru={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},lu=/%COMP%/g,yg="%COMP%",_0=`_nghost-${yg}`,v0=`_ngcontent-${yg}`,b0=!0,y0=new J("",{providedIn:"root",factory:()=>b0});function w0(n){return v0.replace(lu,n)}function I0(n){return _0.replace(lu,n)}function wg(n,t){return t.map(e=>e.replace(lu,n))}var ma=(()=>{let t=class t{constructor(i,r,s,o,c,u,d,f=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=c,this.platformId=u,this.ngZone=d,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=nu(u),this.defaultRenderer=new ys(i,c,d,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===hs.ShadowDom&&(r=mt(N({},r),{encapsulation:hs.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof pa?s.applyToHost(i):s instanceof ws&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let c=this.doc,u=this.ngZone,d=this.eventManager,f=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,b=this.platformIsServer;switch(r.encapsulation){case hs.Emulated:o=new pa(d,f,r,this.appId,p,c,u,b);break;case hs.ShadowDom:return new cu(d,f,i,r,c,u,this.nonce,b);default:o=new ws(d,f,r,p,c,u,b);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(r){return new(r||t)(x(vg),x(bg),x(oa),x(y0),x(it),x(tn),x(G),x(fs))},t.\u0275prov=U({token:t,factory:t.\u0275fac});let n=t;return n})(),ys=class{constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(ru[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(gg(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(gg(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new St(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let s=ru[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=ru[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(ms.DashCase|ms.Important)?t.style.setProperty(e,i,r&ms.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&ms.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i){if(typeof t=="string"&&(t=Hi().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function gg(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var cu=class extends ys{constructor(t,e,i,r,s,o,c,u){super(t,s,o,u),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=wg(r.id,r.styles);for(let f of d){let p=document.createElement("style");c&&p.setAttribute("nonce",c),p.textContent=f,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ws=class extends ys{constructor(t,e,i,r,s,o,c,u){super(t,s,o,c),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=u?wg(u,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},pa=class extends ws{constructor(t,e,i,r,s,o,c,u){let d=r+"-"+i.id;super(t,e,i,s,o,c,u,d),this.contentAttr=w0(d),this.hostAttr=I0(d)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}},E0=(()=>{let t=class t extends fa{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};t.\u0275fac=function(r){return new(r||t)(x(it))},t.\u0275prov=U({token:t,factory:t.\u0275fac});let n=t;return n})(),_g=["alt","control","meta","shift"],T0={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},C0={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},A0=(()=>{let t=class t extends fa{constructor(i){super(i)}supports(i){return t.parseEventName(i)!=null}addEventListener(i,r,s){let o=t.parseEventName(r),c=t.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Hi().onAndCancel(i,o.domEventName,c))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=t._normalizeKey(r.pop()),c="",u=r.indexOf("code");if(u>-1&&(r.splice(u,1),c="code."),_g.forEach(f=>{let p=r.indexOf(f);p>-1&&(r.splice(p,1),c+=f+".")}),c+=o,r.length!=0||o.length===0)return null;let d={};return d.domEventName=s,d.fullKey=c,d}static matchEventFullKeyCode(i,r){let s=T0[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),_g.forEach(c=>{if(c!==s){let u=C0[c];u(i)&&(o+=c+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{t.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};t.\u0275fac=function(r){return new(r||t)(x(it))},t.\u0275prov=U({token:t,factory:t.\u0275fac});let n=t;return n})();function Ig(n,t){return lg(N({rootComponent:n},S0(t)))}function S0(n){return{appProviders:[...P0,...n?.providers??[]],platformProviders:k0}}function D0(){ou.makeCurrent()}function R0(){return new ra}function x0(){return Xp(document),document}var k0=[{provide:tn,useValue:fg},{provide:Zp,useValue:D0,multi:!0},{provide:it,useFactory:x0,deps:[]}];var P0=[{provide:Qp,useValue:"root"},{provide:ra,useFactory:R0,deps:[]},{provide:au,useClass:E0,multi:!0,deps:[it,G,tn]},{provide:au,useClass:A0,multi:!0,deps:[it]},ma,bg,vg,{provide:la,useExisting:ma},{provide:pg,useClass:g0,deps:[]},[]];var Eg=(()=>{let t=class t{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};t.\u0275fac=function(r){return new(r||t)(x(it))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var X="primary",Fs=Symbol("RouteTitle"),mu=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Zi(n){return new mu(n)}function N0(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],c=n[s];if(o.startsWith(":"))r[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function F0(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Le(n[e],t[e]))return!1;return!0}function Le(n,t){let e=n?pu(n):void 0,i=t?pu(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!Rg(n[r],t[r]))return!1;return!0}function pu(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Rg(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}else return n===t}function xg(n){return n.length>0?n[n.length-1]:null}function xn(n){return $l(n)?n:ha(n)?ae(Promise.resolve(n)):q(n)}var V0={exact:Pg,subset:Mg},kg={exact:L0,subset:U0,ignored:()=>!0};function Tg(n,t,e){return V0[e.paths](n.root,t.root,e.matrixParams)&&kg[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function L0(n,t){return Le(n,t)}function Pg(n,t,e){if(!si(n.segments,t.segments)||!va(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!Pg(n.children[i],t.children[i],e))return!1;return!0}function U0(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Rg(n[e],t[e]))}function Mg(n,t,e){return Og(n,t,t.segments,e)}function Og(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!si(r,e)||t.hasChildren()||!va(r,e,i))}else if(n.segments.length===e.length){if(!si(n.segments,e)||!va(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!Mg(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!si(n.segments,r)||!va(n.segments,r,i)||!n.children[X]?!1:Og(n.children[X],t,s,i)}}function va(n,t,e){return t.every((i,r)=>kg[e](n[r].parameters,i.parameters))}var Sn=class{constructor(t=new dt([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Zi(this.queryParams),this._queryParamMap}toString(){return z0.serialize(this)}},dt=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ba(this)}},ri=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Zi(this.parameters),this._parameterMap}toString(){return Fg(this)}};function j0(n,t){return si(n,t)&&n.every((e,i)=>Le(e.parameters,t[i].parameters))}function si(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function B0(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===X&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==X&&(e=e.concat(t(r,i)))}),e}var Bu=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:()=>new wa,providedIn:"root"});let n=t;return n})(),wa=class{parse(t){let e=new _u(t);return new Sn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Is(t.root,!0)}`,i=H0(t.queryParams),r=typeof t.fragment=="string"?`#${$0(t.fragment)}`:"";return`${e}${i}${r}`}},z0=new wa;function ba(n){return n.segments.map(t=>Fg(t)).join("/")}function Is(n,t){if(!n.hasChildren())return ba(n);if(t){let e=n.children[X]?Is(n.children[X],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==X&&i.push(`${r}:${Is(s,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=B0(n,(i,r)=>r===X?[Is(n.children[X],!1)]:[`${r}:${Is(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[X]!=null?`${ba(n)}/${e[0]}`:`${ba(n)}/(${e.join("//")})`}}function Ng(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ga(n){return Ng(n).replace(/%3B/gi,";")}function $0(n){return encodeURI(n)}function gu(n){return Ng(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ya(n){return decodeURIComponent(n)}function Cg(n){return ya(n.replace(/\+/g,"%20"))}function Fg(n){return`${gu(n.path)}${q0(n.parameters)}`}function q0(n){return Object.entries(n).map(([t,e])=>`;${gu(t)}=${gu(e)}`).join("")}function H0(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${ga(e)}=${ga(r)}`).join("&"):`${ga(e)}=${ga(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var G0=/^[^\/()?;#]+/;function uu(n){let t=n.match(G0);return t?t[0]:""}var W0=/^[^\/()?;=#]+/;function K0(n){let t=n.match(W0);return t?t[0]:""}var Y0=/^[^=?&#]+/;function Q0(n){let t=n.match(Y0);return t?t[0]:""}var X0=/^[^&#]+/;function Z0(n){let t=n.match(X0);return t?t[0]:""}var _u=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new dt([],{}):new dt([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[X]=new dt(t,e)),i}parseSegment(){let t=uu(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new St(4009,!1);return this.capture(t),new ri(ya(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=K0(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=uu(this.remaining);r&&(i=r,this.capture(i))}t[ya(e)]=ya(i)}parseQueryParam(t){let e=Q0(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let o=Z0(this.remaining);o&&(i=o,this.capture(i))}let r=Cg(e),s=Cg(i);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=uu(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new St(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=X);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[X]:new dt([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new St(4011,!1)}};function Vg(n){return n.segments.length>0?new dt([],{[X]:n}):n}function Lg(n){let t={};for(let[i,r]of Object.entries(n.children)){let s=Lg(r);if(i===X&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))t[o]=c;else(s.segments.length>0||s.hasChildren())&&(t[i]=s)}let e=new dt(n.segments,t);return J0(e)}function J0(n){if(n.numberOfChildren===1&&n.children[X]){let t=n.children[X];return new dt(n.segments.concat(t.segments),t.children)}return n}function Ji(n){return n instanceof Sn}function tI(n,t,e=null,i=null){let r=Ug(n);return jg(r,t,e,i)}function Ug(n){let t;function e(s){let o={};for(let u of s.children){let d=e(u);o[u.outlet]=d}let c=new dt(s.url,o);return s===n&&(t=c),c}let i=e(n.root),r=Vg(i);return t??r}function jg(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return du(r,r,r,e,i);let s=eI(t);if(s.toRoot())return du(r,r,new dt([],{}),e,i);let o=nI(s,r,n),c=o.processChildren?Cs(o.segmentGroup,o.index,s.commands):zg(o.segmentGroup,o.index,s.commands);return du(r,o.segmentGroup,c,e,i)}function Ia(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ds(n){return typeof n=="object"&&n!=null&&n.outlets}function du(n,t,e,i,r){let s={};i&&Object.entries(i).forEach(([u,d])=>{s[u]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`});let o;n===t?o=e:o=Bg(n,t,e);let c=Vg(Lg(o));return new Sn(c,s,r)}function Bg(n,t,e){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===t?i[r]=e:i[r]=Bg(s,t,e)}),new dt(n.segments,i)}var Ea=class{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Ia(i[0]))throw new St(4003,!1);let r=i.find(Ds);if(r&&r!==xg(i))throw new St(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function eI(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ea(!0,0,n);let t=0,e=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([u,d])=>{c[u]=typeof d=="string"?d.split("/"):d}),[...r,{outlets:c}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?e=!0:c===".."?t++:c!=""&&r.push(c))}),r):[...r,s]},[]);return new Ea(e,t,i)}var Qi=class{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function nI(n,t,e){if(n.isAbsolute)return new Qi(t,!0,0);if(!e)return new Qi(t,!1,NaN);if(e.parent===null)return new Qi(e,!0,0);let i=Ia(n.commands[0])?0:1,r=e.segments.length-1+i;return iI(e,r,n.numberOfDoubleDots)}function iI(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new St(4005,!1);r=i.segments.length}return new Qi(i,!1,r-s)}function rI(n){return Ds(n[0])?n[0].outlets:{[X]:n}}function zg(n,t,e){if(n??=new dt([],{}),n.segments.length===0&&n.hasChildren())return Cs(n,t,e);let i=sI(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new dt(n.segments.slice(0,i.pathIndex),{});return s.children[X]=new dt(n.segments.slice(i.pathIndex),n.children),Cs(s,0,r)}else return i.match&&r.length===0?new dt(n.segments,{}):i.match&&!n.hasChildren()?vu(n,t,e):i.match?Cs(n,0,r):vu(n,t,e)}function Cs(n,t,e){if(e.length===0)return new dt(n.segments,{});{let i=rI(e),r={};if(Object.keys(i).some(s=>s!==X)&&n.children[X]&&n.numberOfChildren===1&&n.children[X].segments.length===0){let s=Cs(n.children[X],t,e);return new dt(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=zg(n.children[s],t,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new dt(n.segments,r)}}function sI(n,t,e){let i=0,r=t,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;let o=n.segments[r],c=e[i];if(Ds(c))break;let u=`${c}`,d=i<e.length-1?e[i+1]:null;if(r>0&&u===void 0)break;if(u&&d&&typeof d=="object"&&d.outlets===void 0){if(!Sg(u,d,o))return s;i+=2}else{if(!Sg(u,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function vu(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let s=e[r];if(Ds(s)){let u=oI(s.outlets);return new dt(i,u)}if(r===0&&Ia(e[0])){let u=n.segments[t];i.push(new ri(u.path,Ag(e[0]))),r++;continue}let o=Ds(s)?s.outlets[X]:`${s}`,c=r<e.length-1?e[r+1]:null;o&&c&&Ia(c)?(i.push(new ri(o,Ag(c))),r+=2):(i.push(new ri(o,{})),r++)}return new dt(i,{})}function oI(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=vu(new dt([],{}),0,i))}),t}function Ag(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function Sg(n,t,e){return n==e.path&&Le(t,e.parameters)}var As="imperative",qt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(qt||{}),we=class{constructor(t,e){this.id=t,this.url=e}},Rs=class extends we{constructor(t,e,i="imperative",r=null){super(t,e),this.type=qt.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Dn=class extends we{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=qt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},_e=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(_e||{}),bu=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(bu||{}),Rn=class extends we{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=qt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},oi=class extends we{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=qt.NavigationSkipped}},xs=class extends we{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=qt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ta=class extends we{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=qt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yu=class extends we{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=qt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wu=class extends we{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=qt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Iu=class extends we{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=qt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Eu=class extends we{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=qt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tu=class{constructor(t){this.route=t,this.type=qt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Cu=class{constructor(t){this.route=t,this.type=qt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Au=class{constructor(t){this.snapshot=t,this.type=qt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Su=class{constructor(t){this.snapshot=t,this.type=qt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Du=class{constructor(t){this.snapshot=t,this.type=qt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ru=class{constructor(t){this.snapshot=t,this.type=qt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ks=class{},Ps=class{constructor(t){this.url=t}};var xu=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new xa,this.attachRef=null}},xa=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new xu,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),Ca=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=ku(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=ku(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Pu(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return Pu(t,this._root).map(e=>e.value)}};function ku(n,t){if(n===t.value)return t;for(let e of t.children){let i=ku(n,e);if(i)return i}return null}function Pu(n,t){if(n===t.value)return[t];for(let e of t.children){let i=Pu(n,e);if(i.length)return i.unshift(t),i}return[]}var ge=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Yi(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Aa=class extends Ca{constructor(t,e){super(t),this.snapshot=e,$u(this,t)}toString(){return this.snapshot.toString()}};function $g(n){let t=aI(n),e=new oe([new ri("",{})]),i=new oe({}),r=new oe({}),s=new oe({}),o=new oe(""),c=new sn(e,i,s,o,r,X,n,t.root);return c.snapshot=t.root,new Aa(new ge(c,[]),t)}function aI(n){let t={},e={},i={},r="",s=new Ms([],t,i,r,e,X,n,null,{});return new Sa("",new ge(s,[]))}var sn=class{constructor(t,e,i,r,s,o,c,u){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(tt(d=>d[Fs]))??q(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(tt(t=>Zi(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(tt(t=>Zi(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function zu(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:N(N({},t.params),n.params),data:N(N({},t.data),n.data),resolve:N(N(N(N({},n.data),t.data),r?.data),n._resolvedData)}:i={params:N({},n.params),data:N({},n.data),resolve:N(N({},n.data),n._resolvedData??{})},r&&Hg(r)&&(i.resolve[Fs]=r.title),i}var Ms=class{get title(){return this.data?.[Fs]}constructor(t,e,i,r,s,o,c,u,d){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=c,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Zi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Zi(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Sa=class extends Ca{constructor(t,e){super(e),this.url=t,$u(this,e)}toString(){return qg(this._root)}};function $u(n,t){t.value._routerState=n,t.children.forEach(e=>$u(n,e))}function qg(n){let t=n.children.length>0?` { ${n.children.map(qg).join(", ")} } `:"";return`${n.value}${t}`}function hu(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Le(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),Le(t.params,e.params)||n.paramsSubject.next(e.params),F0(t.url,e.url)||n.urlSubject.next(e.url),Le(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Mu(n,t){let e=Le(n.params,t.params)&&j0(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||Mu(n.parent,t.parent))}function Hg(n){return typeof n.title=="string"||n.title===null}var Vs=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=X,this.activateEvents=new xt,this.deactivateEvents=new xt,this.attachEvents=new xt,this.detachEvents=new xt,this.parentContexts=j(xa),this.location=j(Bi),this.changeDetector=j(pe),this.environmentInjector=j(ea),this.inputBinder=j(qu,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new St(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new St(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new St(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new St(4013,!1);this._activatedRoute=i;let s=this.location,c=i.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,d=new Ou(i,u,s.injector);this.activated=s.createComponent(c,{index:s.length,injector:d,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=Ft({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[An]});let n=t;return n})(),Ou=class{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i,this.__ngOutletInjector=!0}get(t,e){return t===sn?this.route:t===xa?this.childContexts:this.parent.get(t,e)}},qu=new J("");function cI(n,t,e){let i=Os(n,t._root,e?e._root:void 0);return new Aa(i,t)}function Os(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=lI(n,t,e);return new ge(i,r)}else{if(n.shouldAttach(t.value)){let s=n.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(c=>Os(n,c)),o}}let i=uI(t.value),r=t.children.map(s=>Os(n,s));return new ge(i,r)}}function lI(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Os(n,i,r);return Os(n,i)})}function uI(n){return new sn(new oe(n.url),new oe(n.params),new oe(n.queryParams),new oe(n.fragment),new oe(n.data),n.outlet,n.component,n)}var Gg="ngNavigationCancelingError";function Wg(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=Ji(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=Kg(!1,_e.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function Kg(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[Gg]=!0,e.cancellationCode=t,e}function dI(n){return Yg(n)&&Ji(n.url)}function Yg(n){return!!n&&n[Gg]}var hI=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=vt({type:t,selectors:[["ng-component"]],standalone:!0,features:[wt],decls:1,vars:0,template:function(r,s){r&1&&kt(0,"router-outlet")},dependencies:[Vs],encapsulation:2});let n=t;return n})();function fI(n,t){return n.providers&&!n._injector&&(n._injector=ig(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Hu(n){let t=n.children&&n.children.map(Hu),e=t?mt(N({},n),{children:t}):N({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==X&&(e.component=hI),e}function Ue(n){return n.outlet||X}function mI(n,t){let e=n.filter(i=>Ue(i)===t);return e.push(...n.filter(i=>Ue(i)!==t)),e}function Ls(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var pI=(n,t,e,i)=>tt(r=>(new Nu(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),Nu=class{constructor(t,e,i,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),hu(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=Yi(e);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Yi(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:c})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Yi(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=Yi(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Ru(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Su(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(hu(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),hu(c.route.value),this.activateChildRoutes(t,null,o.children)}else{let c=Ls(r.snapshot);o.attachRef=null,o.route=r,o.injector=c,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,i)}},Da=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Xi=class{constructor(t,e){this.component=t,this.route=e}};function gI(n,t,e){let i=n._root,r=t?t._root:null;return Es(i,r,e,[i.value])}function _I(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function er(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!Yp(n)?n:t.get(n):i}function Es(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Yi(t);return n.children.forEach(o=>{vI(o,s[o.value.outlet],e,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>Ss(c,e.getContext(o),r)),r}function vI(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=t?t.value:null,c=e?e.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=bI(o,s,s.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new Da(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Es(n,t,c?c.children:null,i,r):Es(n,t,e,i,r),u&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new Xi(c.outlet.component,o))}else o&&Ss(t,c,r),r.canActivateChecks.push(new Da(i)),s.component?Es(n,null,c?c.children:null,i,r):Es(n,null,e,i,r);return r}function bI(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!si(n.url,t.url);case"pathParamsOrQueryParamsChange":return!si(n.url,t.url)||!Le(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Mu(n,t)||!Le(n.queryParams,t.queryParams);case"paramsChange":default:return!Mu(n,t)}}function Ss(n,t,e){let i=Yi(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?t?Ss(o,t.children.getContext(s),e):Ss(o,null,e):Ss(o,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Xi(t.outlet.component,r)):e.canDeactivateChecks.push(new Xi(null,r)):e.canDeactivateChecks.push(new Xi(null,r))}function Us(n){return typeof n=="function"}function yI(n){return typeof n=="boolean"}function wI(n){return n&&Us(n.canLoad)}function II(n){return n&&Us(n.canActivate)}function EI(n){return n&&Us(n.canActivateChild)}function TI(n){return n&&Us(n.canDeactivate)}function CI(n){return n&&Us(n.canMatch)}function Qg(n){return n instanceof Gp||n?.name==="EmptyError"}var _a=Symbol("INITIAL_VALUE");function tr(){return Ae(n=>as(n.map(t=>t.pipe(ie(1),Ze(_a)))).pipe(tt(t=>{for(let e of t)if(e!==!0){if(e===_a)return _a;if(e===!1||e instanceof Sn)return e}return!0}),Ot(t=>t!==_a),ie(1)))}function AI(n,t){return ye(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?q(mt(N({},e),{guardsResult:!0})):SI(o,i,r,n).pipe(ye(c=>c&&yI(c)?DI(i,s,n,t):q(c)),tt(c=>mt(N({},e),{guardsResult:c})))})}function SI(n,t,e,i){return ae(n).pipe(ye(r=>MI(r.component,r.route,e,t,i)),Cn(r=>r!==!0,!0))}function DI(n,t,e,i){return ae(t).pipe(ls(r=>Xo(xI(r.route.parent,i),RI(r.route,i),PI(n,r.path,e),kI(n,r.route,e))),Cn(r=>r!==!0,!0))}function RI(n,t){return n!==null&&t&&t(new Du(n)),q(!0)}function xI(n,t){return n!==null&&t&&t(new Au(n)),q(!0)}function kI(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return q(!0);let r=i.map(s=>ql(()=>{let o=Ls(t)??e,c=er(s,o),u=II(c)?c.canActivate(t,n):Qn(o,()=>c(t,n));return xn(u).pipe(Cn())}));return q(r).pipe(tr())}function PI(n,t,e){let i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>_I(o)).filter(o=>o!==null).map(o=>ql(()=>{let c=o.guards.map(u=>{let d=Ls(o.node)??e,f=er(u,d),p=EI(f)?f.canActivateChild(i,n):Qn(d,()=>f(i,n));return xn(p).pipe(Cn())});return q(c).pipe(tr())}));return q(s).pipe(tr())}function MI(n,t,e,i,r){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return q(!0);let o=s.map(c=>{let u=Ls(t)??r,d=er(c,u),f=TI(d)?d.canDeactivate(n,t,e,i):Qn(u,()=>d(n,t,e,i));return xn(f).pipe(Cn())});return q(o).pipe(tr())}function OI(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return q(!0);let s=r.map(o=>{let c=er(o,n),u=wI(c)?c.canLoad(t,e):Qn(n,()=>c(t,e));return xn(u)});return q(s).pipe(tr(),Xg(i))}function Xg(n){return Vl(Nt(t=>{if(Ji(t))throw Wg(n,t)}),tt(t=>t===!0))}function NI(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return q(!0);let s=r.map(o=>{let c=er(o,n),u=CI(c)?c.canMatch(t,e):Qn(n,()=>c(t,e));return xn(u)});return q(s).pipe(tr(),Xg(i))}var Ns=class{constructor(t){this.segmentGroup=t||null}},Ra=class extends Error{constructor(t){super(),this.urlTree=t}};function Ki(n){return os(new Ns(n))}function FI(n){return os(new St(4e3,!1))}function VI(n){return os(Kg(!1,_e.GuardRejected))}var Fu=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return q(i);if(r.numberOfChildren>1||!r.children[X])return FI(t.redirectTo);r=r.children[X]}}applyRedirectCommands(t,e,i){let r=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e.startsWith("/"))throw new Ra(r);return r}applyRedirectCreateUrlTree(t,e,i,r){let s=this.createSegmentGroup(t,e.root,i,r);return new Sn(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&s.startsWith(":")){let c=s.substring(1);i[r]=e[c]}else i[r]=s}),i}createSegmentGroup(t,e,i,r){let s=this.createSegments(t,e.segments,i,r),o={};return Object.entries(e.children).forEach(([c,u])=>{o[c]=this.createSegmentGroup(t,u,i,r)}),new dt(s,o)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new St(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},Vu={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function LI(n,t,e,i,r){let s=Gu(n,t,e);return s.matched?(i=fI(t,i),NI(i,t,e,r).pipe(tt(o=>o===!0?s:N({},Vu)))):q(s)}function Gu(n,t,e){if(t.path==="**")return UI(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?N({},Vu):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||N0)(e,n,t);if(!r)return N({},Vu);let s={};Object.entries(r.posParams??{}).forEach(([c,u])=>{s[c]=u.path});let o=r.consumed.length>0?N(N({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function UI(n){return{matched:!0,parameters:n.length>0?xg(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Dg(n,t,e,i){return e.length>0&&zI(n,e,i)?{segmentGroup:new dt(t,BI(i,new dt(e,n.children))),slicedSegments:[]}:e.length===0&&$I(n,e,i)?{segmentGroup:new dt(n.segments,jI(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new dt(n.segments,n.children),slicedSegments:e}}function jI(n,t,e,i){let r={};for(let s of e)if(ka(n,t,s)&&!i[Ue(s)]){let o=new dt([],{});r[Ue(s)]=o}return N(N({},i),r)}function BI(n,t){let e={};e[X]=t;for(let i of n)if(i.path===""&&Ue(i)!==X){let r=new dt([],{});e[Ue(i)]=r}return e}function zI(n,t,e){return e.some(i=>ka(n,t,i)&&Ue(i)!==X)}function $I(n,t,e){return e.some(i=>ka(n,t,i))}function ka(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function qI(n,t,e,i){return Ue(n)!==i&&(i===X||!ka(t,e,n))?!1:Gu(t,n,e).matched}function HI(n,t,e){return t.length===0&&!n.children[e]}var Lu=class{};function GI(n,t,e,i,r,s,o="emptyOnly"){return new Uu(n,t,e,i,r,o,s).recognize()}var WI=31,Uu=class{constructor(t,e,i,r,s,o,c){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new Fu(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new St(4002,`'${t.segmentGroup}'`)}recognize(){let t=Dg(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(tt(e=>{let i=new Ms([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,{},X,this.rootComponentType,null,{}),r=new ge(i,e),s=new Sa("",r),o=tI(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,X).pipe(Li(i=>{if(i instanceof Ra)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Ns?this.noMatchError(i):i}))}inheritParamsAndData(t,e){let i=t.value,r=zu(i,e,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),t.children.forEach(s=>this.inheritParamsAndData(s,i))}processSegmentGroup(t,e,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r,!0).pipe(tt(s=>s instanceof ge?[s]:[]))}processChildren(t,e,i){let r=[];for(let s of Object.keys(i.children))s==="primary"?r.unshift(s):r.push(s);return ae(r).pipe(ls(s=>{let o=i.children[s],c=mI(e,s);return this.processSegmentGroup(t,c,o,s)}),Kl((s,o)=>(s.push(...o),s)),Gl(null),Kp(),ye(s=>{if(s===null)return Ki(i);let o=Zg(s);return KI(o),q(o)}))}processSegment(t,e,i,r,s,o){return ae(e).pipe(ls(c=>this.processSegmentAgainstRoute(c._injector??t,e,c,i,r,s,o).pipe(Li(u=>{if(u instanceof Ns)return q(null);throw u}))),Cn(c=>!!c),Li(c=>{if(Qg(c))return HI(i,r,s)?q(new Lu):Ki(i);throw c}))}processSegmentAgainstRoute(t,e,i,r,s,o,c){return qI(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,s,o):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,s,o):Ki(r):Ki(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o){let{matched:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=Gu(e,r,s);if(!c)return Ki(e);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>WI&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,d);return this.applyRedirects.lineralizeSegments(r,p).pipe(ye(b=>this.processSegment(t,i,e,b.concat(f),o,!1)))}matchSegmentAgainstRoute(t,e,i,r,s){let o=LI(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),o.pipe(Ae(c=>c.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(Ae(({routes:u})=>{let d=i._loadedInjector??t,{consumedSegments:f,remainingSegments:p,parameters:b}=c,A=new Ms(f,b,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,QI(i),Ue(i),i.component??i._loadedComponent??null,i,XI(i)),{segmentGroup:R,slicedSegments:M}=Dg(e,f,p,u);if(M.length===0&&R.hasChildren())return this.processChildren(d,u,R).pipe(tt(z=>z===null?null:new ge(A,z)));if(u.length===0&&M.length===0)return q(new ge(A,[]));let k=Ue(i)===s;return this.processSegment(d,u,R,M,k?X:s,!0).pipe(tt(z=>new ge(A,z instanceof ge?[z]:[])))}))):Ki(e)))}getChildConfig(t,e,i){return e.children?q({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?q({routes:e._loadedRoutes,injector:e._loadedInjector}):OI(t,e,i,this.urlSerializer).pipe(ye(r=>r?this.configLoader.loadChildren(t,e).pipe(Nt(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):VI(e))):q({routes:[],injector:t})}};function KI(n){n.sort((t,e)=>t.value.outlet===X?-1:e.value.outlet===X?1:t.value.outlet.localeCompare(e.value.outlet))}function YI(n){let t=n.value.routeConfig;return t&&t.path===""}function Zg(n){let t=[],e=new Set;for(let i of n){if(!YI(i)){t.push(i);continue}let r=t.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=Zg(i.children);t.push(new ge(i.value,r))}return t.filter(i=>!e.has(i))}function QI(n){return n.data||{}}function XI(n){return n.resolve||{}}function ZI(n,t,e,i,r,s){return ye(o=>GI(n,t,e,i,o.extractedUrl,r,s).pipe(tt(({state:c,tree:u})=>mt(N({},o),{targetSnapshot:c,urlAfterRedirects:u}))))}function JI(n,t){return ye(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return q(e);let s=new Set(r.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let d of Jg(u))o.add(d);let c=0;return ae(o).pipe(ls(u=>s.has(u)?tE(u,i,n,t):(u.data=zu(u,u.parent,n).resolve,q(void 0))),Nt(()=>c++),Wl(1),ye(u=>c===o.size?q(e):Tn))})}function Jg(n){let t=n.children.map(e=>Jg(e)).flat();return[n,...t]}function tE(n,t,e,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!Hg(r)&&(s[Fs]=r.title),eE(s,n,t,i).pipe(tt(o=>(n._resolvedData=o,n.data=zu(n,n.parent,e).resolve,null)))}function eE(n,t,e,i){let r=pu(n);if(r.length===0)return q({});let s={};return ae(r).pipe(ye(o=>nE(n[o],t,e,i).pipe(Cn(),Nt(c=>{s[o]=c}))),Wl(1),ds(s),Li(o=>Qg(o)?Tn:os(o)))}function nE(n,t,e,i){let r=Ls(t)??i,s=er(n,r),o=s.resolve?s.resolve(t,e):Qn(r,()=>s(t,e));return xn(o)}function fu(n){return Ae(t=>{let e=n(t);return e?ae(e).pipe(tt(()=>t)):q(t)})}var t_=(()=>{let t=class t{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===X);return r}getResolvedTitleForRoute(i){return i.data[Fs]}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:()=>j(iE),providedIn:"root"});let n=t;return n})(),iE=(()=>{let t=class t extends t_{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};t.\u0275fac=function(r){return new(r||t)(x(Eg))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),Wu=new J("",{providedIn:"root",factory:()=>({})}),Ku=new J(""),rE=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=j(tu)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return q(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=xn(i.loadComponent()).pipe(tt(e_),Nt(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),Jo(()=>{this.componentLoaders.delete(i)})),s=new Ul(r,()=>new at).pipe(Ll());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=sE(r,this.compiler,i,this.onLoadEndListener).pipe(Jo(()=>{this.childrenLoaders.delete(r)})),c=new Ul(o,()=>new at).pipe(Ll());return this.childrenLoaders.set(r,c),c}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function sE(n,t,e,i){return xn(n.loadChildren()).pipe(tt(e_),ye(r=>r instanceof ng||Array.isArray(r)?q(r):ae(t.compileModuleAsync(r))),tt(r=>{i&&i(n);let s,o,c=!1;return Array.isArray(r)?(o=r,c=!0):(s=r.create(e).injector,o=s.get(Ku,[],{optional:!0,self:!0}).flat()),{routes:o.map(Hu),injector:s}}))}function oE(n){return n&&typeof n=="object"&&"default"in n}function e_(n){return oE(n)?n.default:n}var Yu=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:()=>j(aE),providedIn:"root"});let n=t;return n})(),aE=(()=>{let t=class t{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),cE=new J("");var lE=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new at,this.transitionAbortSubject=new at,this.configLoader=j(rE),this.environmentInjector=j(ea),this.urlSerializer=j(Bu),this.rootContexts=j(xa),this.location=j(Gi),this.inputBindingEnabled=j(qu,{optional:!0})!==null,this.titleStrategy=j(t_),this.options=j(Wu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=j(Yu),this.createViewTransition=j(cE,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>q(void 0),this.rootComponentType=null;let i=s=>this.events.next(new Tu(s)),r=s=>this.events.next(new Cu(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(mt(N(N({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new oe({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:As,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ot(o=>o.id!==0),tt(o=>mt(N({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ae(o=>{let c=!1,u=!1;return q(o).pipe(Ae(d=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",_e.SupersededByNewNavigation),Tn;this.currentTransition=o,this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?mt(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=d.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!f&&p!=="reload"){let b="";return this.events.next(new oi(d.id,this.urlSerializer.serialize(d.rawUrl),b,bu.IgnoredSameUrlNavigation)),d.resolve(null),Tn}if(this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return q(d).pipe(Ae(b=>{let A=this.transitions?.getValue();return this.events.next(new Rs(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),A!==this.transitions?.getValue()?Tn:Promise.resolve(b)}),ZI(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),Nt(b=>{o.targetSnapshot=b.targetSnapshot,o.urlAfterRedirects=b.urlAfterRedirects,this.currentNavigation=mt(N({},this.currentNavigation),{finalUrl:b.urlAfterRedirects});let A=new Ta(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(A)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(d.currentRawUrl)){let{id:b,extractedUrl:A,source:R,restoredState:M,extras:k}=d,z=new Rs(b,this.urlSerializer.serialize(A),R,M);this.events.next(z);let Z=$g(this.rootComponentType).snapshot;return this.currentTransition=o=mt(N({},d),{targetSnapshot:Z,urlAfterRedirects:A,extras:mt(N({},k),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=A,q(o)}else{let b="";return this.events.next(new oi(d.id,this.urlSerializer.serialize(d.extractedUrl),b,bu.IgnoredByUrlHandlingStrategy)),d.resolve(null),Tn}}),Nt(d=>{let f=new yu(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),tt(d=>(this.currentTransition=o=mt(N({},d),{guards:gI(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),o)),AI(this.environmentInjector,d=>this.events.next(d)),Nt(d=>{if(o.guardsResult=d.guardsResult,Ji(d.guardsResult))throw Wg(this.urlSerializer,d.guardsResult);let f=new wu(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(f)}),Ot(d=>d.guardsResult?!0:(this.cancelNavigationTransition(d,"",_e.GuardRejected),!1)),fu(d=>{if(d.guards.canActivateChecks.length)return q(d).pipe(Nt(f=>{let p=new Iu(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}),Ae(f=>{let p=!1;return q(f).pipe(JI(this.paramsInheritanceStrategy,this.environmentInjector),Nt({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(f,"",_e.NoDataFromResolver)}}))}),Nt(f=>{let p=new Eu(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}))}),fu(d=>{let f=p=>{let b=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(p.routeConfig).pipe(Nt(A=>{p.component=A}),tt(()=>{})));for(let A of p.children)b.push(...f(A));return b};return as(f(d.targetSnapshot.root)).pipe(Gl(null),ie(1))}),fu(()=>this.afterPreactivation()),Ae(()=>{let{currentSnapshot:d,targetSnapshot:f}=o,p=this.createViewTransition?.(this.environmentInjector,d.root,f.root);return p?ae(p).pipe(tt(()=>o)):q(o)}),tt(d=>{let f=cI(i.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return this.currentTransition=o=mt(N({},d),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,o}),Nt(()=>{this.events.next(new ks)}),pI(this.rootContexts,i.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),ie(1),Nt({next:d=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Dn(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects))),this.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{c=!0}}),Rt(this.transitionAbortSubject.pipe(Nt(d=>{throw d}))),Jo(()=>{!c&&!u&&this.cancelNavigationTransition(o,"",_e.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Li(d=>{if(u=!0,Yg(d))this.events.next(new Rn(o.id,this.urlSerializer.serialize(o.extractedUrl),d.message,d.cancellationCode)),dI(d)?this.events.next(new Ps(d.url)):o.resolve(!1);else{this.events.next(new xs(o.id,this.urlSerializer.serialize(o.extractedUrl),d,o.targetSnapshot??void 0));try{o.resolve(i.errorHandler(d))}catch(f){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(f)}}return Tn}))}))}cancelNavigationTransition(i,r,s){let o=new Rn(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function uE(n){return n!==As}var dE=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:()=>j(hE),providedIn:"root"});let n=t;return n})(),ju=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},hE=(()=>{let t=class t extends ju{};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=Je(t)))(s||t)}})(),t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),n_=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:()=>j(fE),providedIn:"root"});let n=t;return n})(),fE=(()=>{let t=class t extends n_{constructor(){super(...arguments),this.location=j(Gi),this.urlSerializer=j(Bu),this.options=j(Wu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=j(Yu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Sn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=$g(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof Rs)this.stateMemento=this.createStateMemento();else if(i instanceof oi)this.rawUrlTree=r.initialUrl;else if(i instanceof Ta){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else i instanceof ks?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Rn&&(i.code===_e.GuardRejected||i.code===_e.NoDataFromResolver)?this.restoreHistory(r):i instanceof xs?this.restoreHistory(r,!0):i instanceof Dn&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,c=N(N({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",c)}else{let o=N(N({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=Je(t)))(s||t)}})(),t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),Ts=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ts||{});function mE(n,t){n.events.pipe(Ot(e=>e instanceof Dn||e instanceof Rn||e instanceof xs||e instanceof oi),tt(e=>e instanceof Dn||e instanceof oi?Ts.COMPLETE:(e instanceof Rn?e.code===_e.Redirect||e.code===_e.SupersededByNewNavigation:!1)?Ts.REDIRECTING:Ts.FAILED),Ot(e=>e!==Ts.REDIRECTING),ie(1)).subscribe(()=>{t()})}function pE(n){throw n}var gE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_E={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},js=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=j(da),this.stateManager=j(n_),this.options=j(Wu,{optional:!0})||{},this.pendingTasks=j(rg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=j(lE),this.urlSerializer=j(Bu),this.location=j(Gi),this.urlHandlingStrategy=j(Yu),this._events=new at,this.errorHandler=this.options.errorHandler||pE,this.navigated=!1,this.routeReuseStrategy=j(dE),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=j(Ku,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!j(qu,{optional:!0}),this.eventsSubscription=new Yn,this.isNgZoneEnabled=j(G)instanceof G&&G.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Rn&&r.code!==_e.Redirect&&r.code!==_e.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Dn)this.navigated=!0;else if(r instanceof Ps){let c=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),u={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||uE(s.source)};this.scheduleNavigation(c,As,null,u,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}bE(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),As,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},c=s?.navigationId?s:null;if(s){let d=N({},s);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(o.state=d)}let u=this.parseUrl(i);this.scheduleNavigation(u,r,c,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(Hu),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:c,queryParamsHandling:u,preserveFragment:d}=r,f=d?this.currentUrlTree.fragment:c,p=null;switch(u){case"merge":p=N(N({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let b;try{let A=s?s.snapshot:this.routerState.snapshot.root;b=Ug(A)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),b=this.currentUrlTree.root}return jg(b,i,p,f??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=Ji(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,As,null,r)}navigate(i,r={skipLocationChange:!1}){return vE(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=N({},gE):r===!1?s=N({},_E):s=r,Ji(i))return Tg(this.currentUrlTree,i,s);let o=this.parseUrl(i);return Tg(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,c){if(this.disposed)return Promise.resolve(!1);let u,d,f;c?(u=c.resolve,d=c.reject,f=c.promise):f=new Promise((b,A)=>{u=b,d=A});let p=this.pendingTasks.add();return mE(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:u,reject:d,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(b=>Promise.reject(b))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function vE(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new St(4008,!1)}function bE(n){return!(n instanceof ks)&&!(n instanceof Ps)}var i_=(()=>{let t=class t{constructor(i,r,s,o,c,u){this.router=i,this.route=r,this.tabIndexAttribute=s,this.renderer=o,this.el=c,this.locationStrategy=u,this.href=null,this.commands=null,this.onChanges=new at,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let d=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement=d==="a"||d==="area",this.isAnchorElement?this.subscription=i.events.subscribe(f=>{f instanceof Dn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(i){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",i)}ngOnChanges(i){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(i){i!=null?(this.commands=Array.isArray(i)?i:[i],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(i,r,s,o,c){let u=this.urlTree;if(u===null||this.isAnchorElement&&(i!==0||r||s||o||c||typeof this.target=="string"&&this.target!="_self"))return!0;let d={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,d),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let i=this.urlTree;this.href=i!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(i)):null;let r=this.href===null?null:Jp(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(i,r){let s=this.renderer,o=this.el.nativeElement;r!==null?s.setAttribute(o,i,r):s.removeAttribute(o,i)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};t.\u0275fac=function(r){return new(r||t)(F(js),F(sn),Ql("tabindex"),F(ps),F(bt),F(eu))},t.\u0275dir=Ft({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){r&1&&Re("click",function(c){return s.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),r&2&&De("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Xt.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Ve],skipLocationChange:[Xt.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Ve],replaceUrl:[Xt.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Ve],routerLink:"routerLink"},standalone:!0,features:[nn,An]});let n=t;return n})();var yE=new J("");function r_(n,...t){return Se([{provide:Ku,multi:!0,useValue:n},[],{provide:sn,useFactory:wE,deps:[js]},{provide:cg,multi:!0,useFactory:IE},t.map(e=>e.\u0275providers)])}function wE(n){return n.routerState.root}function IE(){let n=j(le);return t=>{let e=n.get(qi);if(t!==e.components[0])return;let i=n.get(js),r=n.get(EE);n.get(TE)===1&&i.initialNavigation(),n.get(CE,null,Yl.Optional)?.setUpPreloading(),n.get(yE,null,Yl.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var EE=new J("",{factory:()=>new at}),TE=new J("",{providedIn:"root",factory:()=>1});var CE=new J("");var h_=(()=>{let t=class t{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};t.\u0275fac=function(r){return new(r||t)(F(ps),F(bt))},t.\u0275dir=Ft({type:t});let n=t;return n})(),SE=(()=>{let t=class t extends h_{};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=Je(t)))(s||t)}})(),t.\u0275dir=Ft({type:t,features:[he]});let n=t;return n})(),f_=new J("");var DE={provide:f_,useExisting:ji(()=>Na),multi:!0};function RE(){let n=Hi()?Hi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var xE=new J(""),Na=(()=>{let t=class t extends h_{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!RE())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};t.\u0275fac=function(r){return new(r||t)(F(ps),F(bt),F(xE,8))},t.\u0275dir=Ft({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&Re("input",function(c){return s._handleInput(c.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(c){return s._compositionEnd(c.target.value)})},features:[me([DE]),he]});let n=t;return n})();var kE=new J(""),PE=new J("");function m_(n){return n!=null}function p_(n){return ha(n)?ae(n):n}function g_(n){let t={};return n.forEach(e=>{t=e!=null?N(N({},t),e):t}),Object.keys(t).length===0?null:t}function __(n,t){return t.map(e=>e(n))}function ME(n){return!n.validate}function v_(n){return n.map(t=>ME(t)?t:e=>t.validate(e))}function OE(n){if(!n)return null;let t=n.filter(m_);return t.length==0?null:function(e){return g_(__(e,t))}}function b_(n){return n!=null?OE(v_(n)):null}function NE(n){if(!n)return null;let t=n.filter(m_);return t.length==0?null:function(e){let i=__(e,t).map(p_);return Wp(i).pipe(tt(g_))}}function y_(n){return n!=null?NE(v_(n)):null}function s_(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function FE(n){return n._rawValidators}function VE(n){return n._rawAsyncValidators}function Qu(n){return n?Array.isArray(n)?n:[n]:[]}function Ma(n,t){return Array.isArray(n)?n.includes(t):n===t}function o_(n,t){let e=Qu(t);return Qu(n).forEach(r=>{Ma(e,r)||e.push(r)}),e}function a_(n,t){return Qu(t).filter(e=>!Ma(n,e))}var Oa=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=b_(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=y_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Xu=class extends Oa{get formDirective(){return null}get path(){return null}},$s=class extends Oa{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Zu=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},LE={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},DP=mt(N({},LE),{"[class.ng-submitted]":"isSubmitted"}),w_=(()=>{let t=class t extends Zu{constructor(i){super(i)}};t.\u0275fac=function(r){return new(r||t)(F($s,2))},t.\u0275dir=Ft({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&re("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[he]});let n=t;return n})();var Bs="VALID",Pa="INVALID",nr="PENDING",zs="DISABLED";function UE(n){return(Fa(n)?n.validators:n)||null}function jE(n){return Array.isArray(n)?b_(n):n||null}function BE(n,t){return(Fa(t)?t.asyncValidators:n)||null}function zE(n){return Array.isArray(n)?y_(n):n||null}function Fa(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var Ju=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Bs}get invalid(){return this.status===Pa}get pending(){return this.status==nr}get disabled(){return this.status===zs}get enabled(){return this.status!==zs}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(o_(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(o_(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(a_(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(a_(t,this._rawAsyncValidators))}hasValidator(t){return Ma(this._rawValidators,t)}hasAsyncValidator(t){return Ma(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=nr,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=zs,this.errors=null,this._forEachChild(i=>{i.disable(mt(N({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(mt(N({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Bs,this._forEachChild(i=>{i.enable(mt(N({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(mt(N({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Bs||this.status===nr)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zs:Bs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=nr,this._hasOwnPendingAsyncValidator=!0;let e=p_(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new xt,this.statusChanges=new xt}_calculateStatus(){return this._allControlsDisabled()?zs:this.errors?Pa:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(nr)?nr:this._anyControlsHaveStatus(Pa)?Pa:Bs}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Fa(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=jE(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=zE(this._rawAsyncValidators)}};var I_=new J("CallSetDisabledState",{providedIn:"root",factory:()=>td}),td="always";function $E(n,t){return[...t.path,n]}function qE(n,t,e=td){GE(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),WE(n,t),YE(n,t),KE(n,t),HE(n,t)}function c_(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function HE(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function GE(n,t){let e=FE(n);t.validator!==null?n.setValidators(s_(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=VE(n);t.asyncValidator!==null?n.setAsyncValidators(s_(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();c_(t._rawValidators,r),c_(t._rawAsyncValidators,r)}function WE(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&E_(n,t)})}function KE(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&E_(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function E_(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function YE(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function QE(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function XE(n){return Object.getPrototypeOf(n.constructor)===SE}function ZE(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(s=>{s.constructor===Na?e=s:XE(s)?i=s:r=s}),r||i||e||null}function l_(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function u_(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var JE=class extends Ju{constructor(t=null,e,i){super(UE(e),BE(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Fa(e)&&(e.nonNullable||e.initialValueIsDefault)&&(u_(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){l_(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){l_(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){u_(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var tT={provide:$s,useExisting:ji(()=>ed)},d_=Promise.resolve(),ed=(()=>{let t=class t extends $s{constructor(i,r,s,o,c,u){super(),this._changeDetectorRef=c,this.callSetDisabledState=u,this.control=new JE,this._registered=!1,this.name="",this.update=new xt,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=ZE(this,o)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),QE(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){qE(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){d_.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,s=r!==0&&Ve(r);d_.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?$E(i,this._parent):[i]}};t.\u0275fac=function(r){return new(r||t)(F(Xu,9),F(kE,10),F(PE,10),F(f_,10),F(pe,8),F(I_,8))},t.\u0275dir=Ft({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Xt.None,"disabled","isDisabled"],model:[Xt.None,"ngModel","model"],options:[Xt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[me([tT]),he,An]});let n=t;return n})();var eT=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ut({type:t}),t.\u0275inj=lt({});let n=t;return n})();var T_=(()=>{let t=class t{static withConfig(i){return{ngModule:t,providers:[{provide:I_,useValue:i.callSetDisabledState??td}]}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ut({type:t}),t.\u0275inj=lt({imports:[eT]});let n=t;return n})();var A_=function(n){let t=[],e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},iT=function(n){let t=[],e=0,i=0;for(;e<n.length;){let r=n[e++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[e++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[e++],o=n[e++],c=n[e++],u=((r&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{let s=n[e++],o=n[e++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},S_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,c=o?n[r+1]:0,u=r+2<n.length,d=u?n[r+2]:0,f=s>>2,p=(s&3)<<4|c>>4,b=(c&15)<<2|d>>6,A=d&63;u||(A=64,o||(b=64)),i.push(e[f],e[p],e[b],e[A])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(A_(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):iT(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();let e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=e[n.charAt(r++)],c=r<n.length?e[n.charAt(r)]:0;++r;let d=r<n.length?e[n.charAt(r)]:64;++r;let p=r<n.length?e[n.charAt(r)]:64;if(++r,s==null||c==null||d==null||p==null)throw new id;let b=s<<2|c>>4;if(i.push(b),d!==64){let A=c<<4&240|d>>2;if(i.push(A),p!==64){let R=d<<6&192|p;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},id=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},rT=function(n){let t=A_(n);return S_.encodeByteArray(t,!0)},qs=function(n){return rT(n).replace(/\./g,"")},sd=function(n){try{return S_.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function sT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var oT=()=>sT().__FIREBASE_DEFAULTS__,aT=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},cT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=n&&sd(n[1]);return t&&JSON.parse(t)},La=()=>{try{return oT()||aT()||cT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},od=n=>{var t,e;return(e=(t=La())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},D_=n=>{let t=od(n);if(!t)return;let e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},ad=()=>{var n;return(n=La())===null||n===void 0?void 0:n.config},cd=n=>{var t;return(t=La())===null||t===void 0?void 0:t[`_${n}`]};var Va=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}};function R_(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let e={alg:"none",type:"JWT"},i=t||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[qs(JSON.stringify(e)),qs(JSON.stringify(o)),""].join(".")}function Vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function x_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vt())}function lT(){var n;let t=(n=La())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function k_(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function P_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function M_(){let n=Vt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function O_(){return!lT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ld(){try{return typeof indexedDB=="object"}catch{return!1}}function N_(){return new Promise((n,t)=>{try{let e=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(e){t(e)}})}var uT="FirebaseError",ve=class n extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=uT,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,on.prototype.create)}},on=class{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){let i=e[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?dT(s,i):"Error",c=`${this.serviceName}: ${o} (${r}).`;return new ve(r,c,i)}};function dT(n,t){return n.replace(hT,(e,i)=>{let r=t[i];return r!=null?String(r):`<${i}?>`})}var hT=/\{\$([^}]+)}/g;function F_(n){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function ai(n,t){if(n===t)return!0;let e=Object.keys(n),i=Object.keys(t);for(let r of e){if(!i.includes(r))return!1;let s=n[r],o=t[r];if(C_(s)&&C_(o)){if(!ai(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!e.includes(r))return!1;return!0}function C_(n){return n!==null&&typeof n=="object"}function Hs(n){let t=[];for(let[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function V_(n,t){let e=new rd(n,t);return e.subscribe.bind(e)}var rd=class{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let r;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");fT(t,["next","error","complete"])?r=t:r={next:t,error:e,complete:i},r.next===void 0&&(r.next=nd),r.error===void 0&&(r.error=nd),r.complete===void 0&&(r.complete=nd);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function fT(n,t){if(typeof n!="object"||n===null)return!1;for(let e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function nd(){}var kP=4*60*60*1e3;function ue(n){return n&&n._delegate?n._delegate:n}var Ie=class{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var ci="[DEFAULT]";var ud=class{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){let i=new Va;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:e});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;let i=this.normalizeInstanceIdentifier(t?.identifier),r=(e=t?.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(pT(t))try{this.getOrInitializeService({instanceIdentifier:ci})}catch{}for(let[e,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(e);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=ci){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return y(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=ci){return this.instances.has(t)}getOptions(t=ci){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:e});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);i===c&&o.resolve(r)}return r}onInit(t,e){var i;let r=this.normalizeInstanceIdentifier(e),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(t),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){let i=this.onInitCallbacks.get(e);if(i)for(let r of i)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:mT(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=ci){return this.component?this.component.multipleInstances?t:ci:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function mT(n){return n===ci?void 0:n}function pT(n){return n.instantiationMode==="EAGER"}var Ua=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let e=new ud(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}};var gT=[],et=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(et||{}),_T={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},vT=et.INFO,bT={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},yT=(n,t,...e)=>{if(t<n.logLevel)return;let i=new Date().toISOString(),r=bT[t];if(r)console[r](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},kn=class{constructor(t){this.name=t,this._logLevel=vT,this._logHandler=yT,this._userLogHandler=null,gT.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in et))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?_T[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...t),this._logHandler(this,et.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...t),this._logHandler(this,et.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,et.INFO,...t),this._logHandler(this,et.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,et.WARN,...t),this._logHandler(this,et.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...t),this._logHandler(this,et.ERROR,...t)}};var wT=(n,t)=>t.some(e=>n instanceof e),L_,U_;function IT(){return L_||(L_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ET(){return U_||(U_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var j_=new WeakMap,hd=new WeakMap,B_=new WeakMap,dd=new WeakMap,md=new WeakMap;function TT(n){let t=new Promise((e,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{e(je(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&j_.set(e,n)}).catch(()=>{}),md.set(t,n),t}function CT(n){if(hd.has(n))return;let t=new Promise((e,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{e(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});hd.set(n,t)}var fd={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return hd.get(n);if(t==="objectStoreNames")return n.objectStoreNames||B_.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return je(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function z_(n){fd=n(fd)}function AT(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){let i=n.call(ja(this),t,...e);return B_.set(i,t.sort?t.sort():[t]),je(i)}:ET().includes(n)?function(...t){return n.apply(ja(this),t),je(j_.get(this))}:function(...t){return je(n.apply(ja(this),t))}}function ST(n){return typeof n=="function"?AT(n):(n instanceof IDBTransaction&&CT(n),wT(n,IT())?new Proxy(n,fd):n)}function je(n){if(n instanceof IDBRequest)return TT(n);if(dd.has(n))return dd.get(n);let t=ST(n);return t!==n&&(dd.set(n,t),md.set(t,n)),t}var ja=n=>md.get(n);function q_(n,t,{blocked:e,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(n,t),c=je(o);return i&&o.addEventListener("upgradeneeded",u=>{i(je(o.result),u.oldVersion,u.newVersion,je(o.transaction),u)}),e&&o.addEventListener("blocked",u=>e(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var DT=["get","getKey","getAll","getAllKeys","count"],RT=["put","add","delete","clear"],pd=new Map;function $_(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(pd.get(t))return pd.get(t);let e=t.replace(/FromIndex$/,""),i=t!==e,r=RT.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(r||DT.includes(e)))return;let s=function(o,...c){return y(this,null,function*(){let u=this.transaction(o,r?"readwrite":"readonly"),d=u.store;return i&&(d=d.index(c.shift())),(yield Promise.all([d[e](...c),r&&u.done]))[0]})};return pd.set(t,s),s}z_(n=>mt(N({},n),{get:(t,e,i)=>$_(t,e)||n.get(t,e,i),has:(t,e)=>!!$_(t,e)||n.has(t,e)}));var _d=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(xT(e)){let i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}};function xT(n){let t=n.getComponent();return t?.type==="VERSION"}var vd="@firebase/app",H_="0.10.3";var li=new kn("@firebase/app"),kT="@firebase/app-compat",PT="@firebase/analytics-compat",MT="@firebase/analytics",OT="@firebase/app-check-compat",NT="@firebase/app-check",FT="@firebase/auth",VT="@firebase/auth-compat",LT="@firebase/database",UT="@firebase/database-compat",jT="@firebase/functions",BT="@firebase/functions-compat",zT="@firebase/installations",$T="@firebase/installations-compat",qT="@firebase/messaging",HT="@firebase/messaging-compat",GT="@firebase/performance",WT="@firebase/performance-compat",KT="@firebase/remote-config",YT="@firebase/remote-config-compat",QT="@firebase/storage",XT="@firebase/storage-compat",ZT="@firebase/firestore",JT="@firebase/vertexai-preview",tC="@firebase/firestore-compat",eC="firebase",nC="10.12.0";var bd="[DEFAULT]",iC={[vd]:"fire-core",[kT]:"fire-core-compat",[MT]:"fire-analytics",[PT]:"fire-analytics-compat",[NT]:"fire-app-check",[OT]:"fire-app-check-compat",[FT]:"fire-auth",[VT]:"fire-auth-compat",[LT]:"fire-rtdb",[UT]:"fire-rtdb-compat",[jT]:"fire-fn",[BT]:"fire-fn-compat",[zT]:"fire-iid",[$T]:"fire-iid-compat",[qT]:"fire-fcm",[HT]:"fire-fcm-compat",[GT]:"fire-perf",[WT]:"fire-perf-compat",[KT]:"fire-rc",[YT]:"fire-rc-compat",[QT]:"fire-gcs",[XT]:"fire-gcs-compat",[ZT]:"fire-fst",[tC]:"fire-fst-compat",[JT]:"fire-vertex","fire-js":"fire-js",[eC]:"fire-js-all"};var Gs=new Map,rC=new Map,yd=new Map;function G_(n,t){try{n.container.addComponent(t)}catch(e){li.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Mn(n){let t=n.name;if(yd.has(t))return li.debug(`There were multiple attempts to register component ${t}.`),!1;yd.set(t,n);for(let e of Gs.values())G_(e,n);for(let e of rC.values())G_(e,n);return!0}function Ks(n,t){let e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function an(n){return n.settings!==void 0}var sC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pn=new on("app","Firebase",sC);var wd=class{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ie("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Pn.create("app-deleted",{appName:this._name})}};var On=nC;function Td(n,t={}){let e=n;typeof t!="object"&&(t={name:t});let i=Object.assign({name:bd,automaticDataCollectionEnabled:!1},t),r=i.name;if(typeof r!="string"||!r)throw Pn.create("bad-app-name",{appName:String(r)});if(e||(e=ad()),!e)throw Pn.create("no-options");let s=Gs.get(r);if(s){if(ai(e,s.options)&&ai(i,s.config))return s;throw Pn.create("duplicate-app",{appName:r})}let o=new Ua(r);for(let u of yd.values())o.addComponent(u);let c=new wd(e,i,o);return Gs.set(r,c),c}function ir(n=bd){let t=Gs.get(n);if(!t&&n===bd&&ad())return Td();if(!t)throw Pn.create("no-app",{appName:n});return t}function Ba(){return Array.from(Gs.values())}function Lt(n,t,e){var i;let r=(i=iC[n])!==null&&i!==void 0?i:n;e&&(r+=`-${e}`);let s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){let c=[`Unable to register library "${r}" with version "${t}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),li.warn(c.join(" "));return}Mn(new Ie(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}var oC="firebase-heartbeat-database",aC=1,Ws="firebase-heartbeat-store",gd=null;function Q_(){return gd||(gd=q_(oC,aC,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Ws)}catch(e){console.warn(e)}}}}).catch(n=>{throw Pn.create("idb-open",{originalErrorMessage:n.message})})),gd}function cC(n){return y(this,null,function*(){try{let e=(yield Q_()).transaction(Ws),i=yield e.objectStore(Ws).get(X_(n));return yield e.done,i}catch(t){if(t instanceof ve)li.warn(t.message);else{let e=Pn.create("idb-get",{originalErrorMessage:t?.message});li.warn(e.message)}}})}function W_(n,t){return y(this,null,function*(){try{let i=(yield Q_()).transaction(Ws,"readwrite");yield i.objectStore(Ws).put(t,X_(n)),yield i.done}catch(e){if(e instanceof ve)li.warn(e.message);else{let i=Pn.create("idb-set",{originalErrorMessage:e?.message});li.warn(i.message)}}})}function X_(n){return`${n.name}!${n.options.appId}`}var lC=1024,uC=30*24*60*60*1e3,Id=class{constructor(t){this.container=t,this._heartbeatsCache=null;let e=this.container.getProvider("app").getImmediate();this._storage=new Ed(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return y(this,null,function*(){var t,e;let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=K_();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=uC}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return y(this,null,function*(){var t;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=K_(),{heartbeatsToSend:i,unsentEntries:r}=dC(this._heartbeatsCache.heartbeats),s=qs(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function K_(){return new Date().toISOString().substring(0,10)}function dC(n,t=lC){let e=[],i=n.slice();for(let r of n){let s=e.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Y_(e)>t){s.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),Y_(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}var Ed=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return y(this,null,function*(){return ld()?N_().then(()=>!0).catch(()=>!1):!1})}read(){return y(this,null,function*(){if(yield this._canUseIndexedDBPromise){let e=yield cC(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return y(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return W_(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return y(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return W_(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return})}};function Y_(n){return qs(JSON.stringify({version:2,heartbeats:n})).length}function hC(n){Mn(new Ie("platform-logger",t=>new _d(t),"PRIVATE")),Mn(new Ie("heartbeat",t=>new Id(t),"PRIVATE")),Lt(vd,H_,n),Lt(vd,H_,"esm2017"),Lt("fire-js","")}hC("");var fC="firebase",mC="10.12.0";Lt(fC,mC,"app");var di=new $i("ANGULARFIRE2_VERSION");function $a(n,t,e){if(t){if(t.length===1)return t[0];let s=t.filter(o=>o.app===e);if(s.length===1)return s[0]}return e.container.getProvider(n).getImmediate({optional:!0})}var Ys=(n,t)=>{let e=t?[t]:Ba(),i=[];return e.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},sr=class{constructor(){return Ys(pC)}},pC="app-check";function rr(){}var za=class{zone;delegate;constructor(t,e=Hp){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,i){let r=this.zone,s=function(o){r.runGuarded(()=>{t.apply(this,[o])})};return this.delegate.schedule(s,e,i)}},Cd=class{zone;task=null;constructor(t){this.zone=t}call(t,e){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",rr,{},rr,rr)),e.pipe(Nt({next:i,complete:i,error:i})).subscribe(t).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},or=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new za(Zone.current)),this.insideAngular=e.run(()=>new za(Zone.current,qp)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(x(G))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qa(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function gC(n){return qa().ngZone.runOutsideAngular(()=>n())}function ui(n){return qa().ngZone.run(()=>n())}function _C(n){return vC(qa())(n)}function vC(n){return function(e){return e=e.lift(new Cd(n.ngZone)),e.pipe(zl(n.outsideAngular),Bl(n.insideAngular))}}var bC=(n,t)=>function(){let i=arguments;return t&&setTimeout(()=>{t.state==="scheduled"&&t.invoke()},10),ui(()=>n.apply(void 0,i))},cn=(n,t)=>function(){let e,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(t&&(e||=ui(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",rr,{},rr,rr))),i[s]=bC(i[s],e));let r=gC(()=>n.apply(this,i));if(!t)if(r instanceof Fe){let s=qa();return r.pipe(zl(s.outsideAngular),Bl(s.insideAngular))}else return ui(()=>r);return r instanceof Fe?r.pipe(_C):r instanceof Promise?ui(()=>new Promise((s,o)=>r.then(c=>ui(()=>s(c)),c=>ui(()=>o(c))))):typeof r=="function"&&e?function(){return setTimeout(()=>{e&&e.state==="scheduled"&&e.invoke()},10),r.apply(this,arguments)}:ui(()=>r)};var ln=class{constructor(t){return t}},hi=class{constructor(){return Ba()}};function yC(n){return n&&n.length===1?n[0]:new ln(ir())}var Ad=new J("angularfire2._apps"),wC={provide:ln,useFactory:yC,deps:[[new ce,Ad]]},IC={provide:hi,deps:[[new ce,Ad]]};function EC(n){return(t,e)=>{let i=e.get(tn);Lt("angularfire",di.full,"core"),Lt("angularfire",di.full,"app"),Lt("angular",ag.full,i.toString());let r=t.runOutsideAngular(()=>n(e));return new ln(r)}}function Z_(n,...t){return Se([wC,IC,{provide:Ad,useFactory:EC(n),multi:!0,deps:[G,le,or,...t]}])}var J_=cn(Td,!0);function mv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var pv=mv,gv=new on("auth","Firebase",mv());var Qa=new kn("@firebase/auth");function TC(n,...t){Qa.logLevel<=et.WARN&&Qa.warn(`Auth (${On}): ${n}`,...t)}function Ga(n,...t){Qa.logLevel<=et.ERROR&&Qa.error(`Auth (${On}): ${n}`,...t)}function Fn(n,...t){throw Gd(n,...t)}function mi(n,...t){return Gd(n,...t)}function _v(n,t,e){let i=Object.assign(Object.assign({},pv()),{[t]:e});return new on("auth","Firebase",i).create(t,{appName:n.name})}function fi(n){return _v(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gd(n,...t){if(typeof n!="string"){let e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return gv.create(n,...t)}function H(n,t,...e){if(!n)throw Gd(t,...e)}function un(n){let t="INTERNAL ASSERTION FAILED: "+n;throw Ga(t),new Error(t)}function Vn(n,t){n||un(t)}function xd(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function CC(){return tv()==="http:"||tv()==="https:"}function tv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function AC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CC()||k_()||"connection"in navigator)?navigator.onLine:!0}function SC(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var pi=class{constructor(t,e){this.shortDelay=t,this.longDelay=e,Vn(e>t,"Short delay should be less than long delay!"),this.isMobile=x_()||P_()}get(){return AC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Wd(n,t){Vn(n.emulator,"Emulator should always be set here");let{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}var Xa=class{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var DC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var RC=new pi(3e4,6e4);function Kd(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}function cr(s,o,c,u){return y(this,arguments,function*(n,t,e,i,r={}){return vv(n,r,()=>y(this,null,function*(){let d={},f={};i&&(t==="GET"?f=i:d={body:JSON.stringify(i)});let p=Hs(Object.assign({key:n.config.apiKey},f)).slice(1),b=yield n._getAdditionalHeaders();return b["Content-Type"]="application/json",n.languageCode&&(b["X-Firebase-Locale"]=n.languageCode),Xa.fetch()(bv(n,n.config.apiHost,e,p),Object.assign({method:t,headers:b,referrerPolicy:"no-referrer"},d))}))})}function vv(n,t,e){return y(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},DC),t);try{let r=new kd(n),s=yield Promise.race([e(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Ha(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ha(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ha(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ha(n,"user-disabled",o);let f=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw _v(n,f,d);Fn(n,f)}}catch(r){if(r instanceof ve)throw r;Fn(n,"network-request-failed",{message:String(r)})}})}function xC(s,o,c,u){return y(this,arguments,function*(n,t,e,i,r={}){let d=yield cr(n,t,e,i,r);return"mfaPendingCredential"in d&&Fn(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function bv(n,t,e,i){let r=`${t}${e}?${i}`;return n.config.emulator?Wd(n.config,r):`${n.config.apiScheme}://${r}`}var kd=class{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(mi(this.auth,"network-request-failed")),RC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ha(n,t,e){let i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);let r=mi(n,t,i);return r.customData._tokenResponse=e,r}function kC(n,t){return y(this,null,function*(){return cr(n,"POST","/v1/accounts:delete",t)})}function yv(n,t){return y(this,null,function*(){return cr(n,"POST","/v1/accounts:lookup",t)})}function Qs(n){if(n)try{let t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function Yd(n,t=!1){return y(this,null,function*(){let e=ue(n),i=yield e.getIdToken(t),r=Qd(i);H(r&&r.exp&&r.auth_time&&r.iat,e.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:Qs(Sd(r.auth_time)),issuedAtTime:Qs(Sd(r.iat)),expirationTime:Qs(Sd(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Sd(n){return Number(n)*1e3}function Qd(n){let[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return Ga("JWT malformed, contained fewer than 3 sections"),null;try{let r=sd(e);return r?JSON.parse(r):(Ga("Failed to decode base64 JWT payload"),null)}catch(r){return Ga("Caught error parsing JWT payload as JSON",r?.toString()),null}}function ev(n){let t=Qd(n);return H(t,"internal-error"),H(typeof t.exp<"u","internal-error"),H(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}function Zs(n,t,e=!1){return y(this,null,function*(){if(e)return t;try{return yield t}catch(i){throw i instanceof ve&&PC(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function PC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Pd=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;let e=this.getInterval(t);this.timerId=setTimeout(()=>y(this,null,function*(){yield this.iteration()}),e)}iteration(){return y(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Js=class{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qs(this.lastLoginAt),this.creationTime=Qs(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Za(n){return y(this,null,function*(){var t;let e=n.auth,i=yield n.getIdToken(),r=yield Zs(n,yv(e,{idToken:i}));H(r?.users.length,e,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?wv(s.providerUserInfo):[],c=MC(n.providerData,o),u=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!c?.length,f=u?d:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Js(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,p)})}function Xd(n){return y(this,null,function*(){let t=ue(n);yield Za(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}function MC(n,t){return[...n.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function wv(n){return n.map(t=>{var{providerId:e}=t,i=jl(t,["providerId"]);return{providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function OC(n,t){return y(this,null,function*(){let e=yield vv(n,{},()=>y(this,null,function*(){let i=Hs({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=bv(n,r,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Xa.fetch()(o,{method:"POST",headers:c,body:i})}));return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}})}function NC(n,t){return y(this,null,function*(){return cr(n,"POST","/v2/accounts:revokeToken",Kd(n,t))})}var Xs=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){H(t.idToken,"internal-error"),H(typeof t.idToken<"u","internal-error"),H(typeof t.refreshToken<"u","internal-error");let e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):ev(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){H(t.length!==0,"internal-error");let e=ev(t);this.updateTokensAndExpiration(t,null,e)}getToken(t,e=!1){return y(this,null,function*(){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(H(this.refreshToken,t,"user-token-expired"),this.refreshToken?(yield this.refresh(t,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(t,e){return y(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield OC(t,e);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){let{refreshToken:i,accessToken:r,expirationTime:s}=e,o=new n;return i&&(H(typeof i=="string","internal-error",{appName:t}),o.refreshToken=i),r&&(H(typeof r=="string","internal-error",{appName:t}),o.accessToken=r),s&&(H(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return un("not implemented")}};function Nn(n,t){H(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}var ar=class n{constructor(t){var{uid:e,auth:i,stsTokenManager:r}=t,s=jl(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pd(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Js(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(t){return y(this,null,function*(){let e=yield Zs(this,this.stsTokenManager.getToken(this.auth,t));return H(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e})}getIdTokenResult(t){return Yd(this,t)}reload(){return Xd(this)}_assign(t){this!==t&&(H(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let e=new n(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,e=!1){return y(this,null,function*(){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&(yield Za(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return y(this,null,function*(){if(an(this.auth.app))return Promise.reject(fi(this.auth));let t=yield this.getIdToken();return yield Zs(this,kC(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var i,r,s,o,c,u,d,f;let p=(i=e.displayName)!==null&&i!==void 0?i:void 0,b=(r=e.email)!==null&&r!==void 0?r:void 0,A=(s=e.phoneNumber)!==null&&s!==void 0?s:void 0,R=(o=e.photoURL)!==null&&o!==void 0?o:void 0,M=(c=e.tenantId)!==null&&c!==void 0?c:void 0,k=(u=e._redirectEventId)!==null&&u!==void 0?u:void 0,z=(d=e.createdAt)!==null&&d!==void 0?d:void 0,Z=(f=e.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:rt,emailVerified:gt,isAnonymous:te,providerData:ht,stsTokenManager:I}=e;H(rt&&I,t,"internal-error");let g=Xs.fromJSON(this.name,I);H(typeof rt=="string",t,"internal-error"),Nn(p,t.name),Nn(b,t.name),H(typeof gt=="boolean",t,"internal-error"),H(typeof te=="boolean",t,"internal-error"),Nn(A,t.name),Nn(R,t.name),Nn(M,t.name),Nn(k,t.name),Nn(z,t.name),Nn(Z,t.name);let v=new n({uid:rt,auth:t,email:b,emailVerified:gt,displayName:p,isAnonymous:te,photoURL:R,phoneNumber:A,tenantId:M,stsTokenManager:g,createdAt:z,lastLoginAt:Z});return ht&&Array.isArray(ht)&&(v.providerData=ht.map(w=>Object.assign({},w))),k&&(v._redirectEventId=k),v}static _fromIdTokenResponse(t,e,i=!1){return y(this,null,function*(){let r=new Xs;r.updateFromServerResponse(e);let s=new n({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:i});return yield Za(s),s})}static _fromGetAccountInfoResponse(t,e,i){return y(this,null,function*(){let r=e.users[0];H(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?wv(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,c=new Xs;c.updateFromIdToken(i);let u=new n({uid:r.localId,auth:t,stsTokenManager:c,isAnonymous:o}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Js(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(u,d),u})}};var nv=new Map;function dn(n){Vn(n instanceof Function,"Expected a class definition");let t=nv.get(n);return t?(Vn(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,nv.set(n,t),t)}var FC=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(this,null,function*(){return!0})}_set(e,i){return y(this,null,function*(){this.storage[e]=i})}_get(e){return y(this,null,function*(){let i=this.storage[e];return i===void 0?null:i})}_remove(e){return y(this,null,function*(){delete this.storage[e]})}_addListener(e,i){}_removeListener(e,i){}}return n.type="NONE",n})(),Md=FC;function Wa(n,t,e){return`firebase:${n}:${t}:${e}`}var Ja=class n{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=Wa(this.userKey,r.apiKey,s),this.fullPersistenceKey=Wa("persistence",r.apiKey,s),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){return y(this,null,function*(){let t=yield this.persistence._get(this.fullUserKey);return t?ar._fromJSON(this.auth,t):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){return y(this,null,function*(){if(this.persistence===t)return;let e=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,e,i="authUser"){return y(this,null,function*(){if(!e.length)return new n(dn(Md),t,i);let r=(yield Promise.all(e.map(d=>y(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=r[0]||dn(Md),o=Wa(i,t.config.apiKey,t.name),c=null;for(let d of e)try{let f=yield d._get(o);if(f){let p=ar._fromJSON(t,f);d!==s&&(c=p),s=d;break}}catch{}let u=r.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,t,i):(s=u[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(e.map(d=>y(this,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new n(s,t,i))})}};function iv(n){let t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Tv(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Iv(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Av(t))return"Blackberry";if(Sv(t))return"Webos";if(Zd(t))return"Safari";if((t.includes("chrome/")||Ev(t))&&!t.includes("edge/"))return"Chrome";if(Cv(t))return"Android";{let e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if(i?.length===2)return i[1]}return"Other"}function Iv(n=Vt()){return/firefox\//i.test(n)}function Zd(n=Vt()){let t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Ev(n=Vt()){return/crios\//i.test(n)}function Tv(n=Vt()){return/iemobile/i.test(n)}function Cv(n=Vt()){return/android/i.test(n)}function Av(n=Vt()){return/blackberry/i.test(n)}function Sv(n=Vt()){return/webos/i.test(n)}function ac(n=Vt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function VC(n=Vt()){var t;return ac(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function LC(){return M_()&&document.documentMode===10}function Dv(n=Vt()){return ac(n)||Cv(n)||Sv(n)||Av(n)||/windows phone/i.test(n)||Tv(n)}function UC(){try{return!!(window&&window!==window.top)}catch{return!1}}function Rv(n,t=[]){let e;switch(n){case"Browser":e=iv(Vt());break;case"Worker":e=`${iv(Vt())}-${n}`;break;default:e=n}let i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${On}/${i}`}var Od=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){let i=s=>new Promise((o,c)=>{try{let u=t(s);o(u)}catch(u){c(u)}});i.onAbort=e,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(t){return y(this,null,function*(){if(this.auth.currentUser===t)return;let e=[];try{for(let i of this.queue)yield i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(let r of e)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function jC(e){return y(this,arguments,function*(n,t={}){return cr(n,"GET","/v2/passwordPolicy",Kd(n,t))})}var BC=6,Nd=class{constructor(t){var e,i,r,s;let o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=o.minPasswordLength)!==null&&e!==void 0?e:BC,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,i,r,s,o,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(e=u.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(t,e){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}};var Fd=class{constructor(t,e,i,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tc(this),this.idTokenSubscription=new tc(this),this.beforeStateQueue=new Od(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=dn(e)),this._initializationPromise=this.queue(()=>y(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield Ja.create(this,t),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(e),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return y(this,null,function*(){if(this._deleted)return;let t=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(t,!0)}})}initializeCurrentUserFromIdToken(t){return y(this,null,function*(){try{let e=yield yv(this,{idToken:t}),i=yield ar._fromGetAccountInfoResponse(this,e,t);yield this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(t){return y(this,null,function*(){var e;if(an(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(t&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,c=r?._redirectEventId,u=yield this.tryRedirectSignIn(t);(!o||o===c)&&u?.user&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return H(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(t){return y(this,null,function*(){let e=null;try{e=yield this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{yield this._setRedirectUser(null)}return e})}reloadAndSetCurrentUserOrClear(t){return y(this,null,function*(){try{yield Za(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)})}useDeviceLanguage(){this.languageCode=SC()}_delete(){return y(this,null,function*(){this._deleted=!0})}updateCurrentUser(t){return y(this,null,function*(){if(an(this.app))return Promise.reject(fi(this));let e=t?ue(t):null;return e&&H(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))})}_updateCurrentUser(t,e=!1){return y(this,null,function*(){if(!this._deleted)return t&&H(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||(yield this.beforeStateQueue.runMiddleware(t)),this.queue(()=>y(this,null,function*(){yield this.directlySetCurrentUser(t),this.notifyAuthListeners()}))})}signOut(){return y(this,null,function*(){return an(this.app)?Promise.reject(fi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(t){return an(this.app)?Promise.reject(fi(this)):this.queue(()=>y(this,null,function*(){yield this.assertedPersistence.setPersistence(dn(t))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(t){return y(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return y(this,null,function*(){let t=yield jC(this),e=new Nd(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new on("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{let i=this.onAuthStateChanged(()=>{i(),t()},e)}})}revokeAccessToken(t){return y(this,null,function*(){if(this.currentUser){let e=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),yield NC(this,i)}})}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}_setRedirectUser(t,e){return y(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)})}getOrInitRedirectPersistenceManager(t){return y(this,null,function*(){if(!this.redirectPersistenceManager){let e=t&&dn(t)||this._popupRedirectResolver;H(e,this,"argument-error"),this.redirectPersistenceManager=yield Ja.create(this,[dn(e._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(t){return y(this,null,function*(){var e,i;return this._isInitialized&&(yield this.queue(()=>y(this,null,function*(){}))),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null})}_persistUserIfCurrent(t){return y(this,null,function*(){if(t===this.currentUser)return this.queue(()=>y(this,null,function*(){return this.directlySetCurrentUser(t)}))})}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,r){if(this._deleted)return()=>{};let s=typeof e=="function"?e:e.next.bind(e),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(H(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof e=="function"){let u=t.addObserver(e,i,r);return()=>{o=!0,u()}}else{let u=t.addObserver(e);return()=>{o=!0,u()}}}directlySetCurrentUser(t){return y(this,null,function*(){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?yield this.assertedPersistence.setCurrentUser(t):yield this.assertedPersistence.removeCurrentUser()})}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Rv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return y(this,null,function*(){var t;let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader();i&&(e["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return y(this,null,function*(){var t;let e=yield(t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken();return e?.error&&TC(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function Jd(n){return ue(n)}var tc=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=V_(e=>this.observer=e)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var th={loadJS(){return y(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zC(n){th=n}function $C(n){return th.loadJS(n)}function qC(){return th.gapiScript}function xv(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function eh(n,t){let e=Ks(n,"auth");if(e.isInitialized()){let r=e.getImmediate(),s=e.getOptions();if(ai(s,t??{}))return r;Fn(r,"already-initialized")}return e.initialize({options:t})}function HC(n,t){let e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(dn);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t?.popupRedirectResolver)}function nh(n,t,e){let i=Jd(n);H(i._canInitEmulator,i,"emulator-config-failed"),H(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");let r=!!e?.disableWarnings,s=kv(t),{host:o,port:c}=GC(t),u=c===null?"":`:${c}`;i.config.emulator={url:`${s}//${o}${u}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||WC()}function kv(n){let t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function GC(n){let t=kv(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};let i=e[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:rv(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:rv(o)}}}function rv(n){if(!n)return null;let t=Number(n);return isNaN(t)?null:t}function WC(){function n(){let t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var ec=class{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return un("not implemented")}_getIdTokenResponse(t){return un("not implemented")}_linkToIdToken(t,e){return un("not implemented")}_getReauthenticationResolver(t){return un("not implemented")}};function Dd(n,t){return y(this,null,function*(){return xC(n,"POST","/v1/accounts:signInWithIdp",Kd(n,t))})}var nc=class{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}};var Vd=class extends nc{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}};var to=class n{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,e,i,r=!1){return y(this,null,function*(){let s=yield ar._fromIdTokenResponse(t,i,r),o=sv(i);return new n({user:s,providerId:o,_tokenResponse:i,operationType:e})})}static _forOperation(t,e,i){return y(this,null,function*(){yield t._updateTokensIfNecessary(i,!0);let r=sv(i);return new n({user:t,providerId:r,_tokenResponse:i,operationType:e})})}};function sv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Ld=class n extends ve{constructor(t,e,i,r){var s;super(e.code,e.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,r){return new n(t,e,i,r)}};function Pv(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ld._fromErrorAndOperation(n,s,t,i):s})}function KC(n,t,e=!1){return y(this,null,function*(){let i=yield Zs(n,t._linkToIdToken(n.auth,yield n.getIdToken()),e);return to._forOperation(n,"link",i)})}function YC(n,t,e=!1){return y(this,null,function*(){let{auth:i}=n;if(an(i.app))return Promise.reject(fi(i));let r="reauthenticate";try{let s=yield Zs(n,Pv(i,r,t,n),e);H(s.idToken,i,"internal-error");let o=Qd(s.idToken);H(o,i,"internal-error");let{sub:c}=o;return H(n.uid===c,i,"user-mismatch"),to._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Fn(i,"user-mismatch"),s}})}function QC(n,t,e=!1){return y(this,null,function*(){if(an(n.app))return Promise.reject(fi(n));let i="signIn",r=yield Pv(n,i,t),s=yield to._fromIdTokenResponse(n,i,r);return e||(yield n._updateCurrentUser(s.user)),s})}function ih(n,t,e,i){return ue(n).onIdTokenChanged(t,e,i)}function rh(n,t,e){return ue(n).beforeAuthStateChanged(t,e)}var ic="__sak";var rc=class{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(ic,"1"),this.storage.removeItem(ic),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){let e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}};function XC(){let n=Vt();return Zd(n)||ac(n)}var ZC=1e3,JC=10,tA=(()=>{class n extends rc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,i)=>this.onStorageEvent(e,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=XC()&&UC(),this.fallbackToPolling=Dv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&e(i,s,r)}}onStorageEvent(e,i=!1){if(!e.key){this.forAllChangedKeys((c,u,d)=>{this.notifyListeners(c,d)});return}let r=e.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let c=this.storage.getItem(r);if(e.newValue!==c)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!i)return}let s=()=>{let c=this.storage.getItem(r);!i&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);LC()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,JC):s()}notifyListeners(e,i){this.localCache[e]=i;let r=this.listeners[e];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:i,newValue:r}),!0)})},ZC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(e,i){return y(this,null,function*(){yield En(n.prototype,this,"_set").call(this,e,i),this.localCache[e]=JSON.stringify(i)})}_get(e){return y(this,null,function*(){let i=yield En(n.prototype,this,"_get").call(this,e);return this.localCache[e]=JSON.stringify(i),i})}_remove(e){return y(this,null,function*(){yield En(n.prototype,this,"_remove").call(this,e),delete this.localCache[e]})}}return n.type="LOCAL",n})(),Mv=tA;var eA=(()=>{class n extends rc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,i){}_removeListener(e,i){}}return n.type="SESSION",n})(),sh=eA;function nA(n){return Promise.all(n.map(t=>y(this,null,function*(){try{return{fulfilled:!0,value:yield t}}catch(e){return{fulfilled:!1,reason:e}}})))}var iA=(()=>{class n{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let i=this.receivers.find(s=>s.isListeningto(e));if(i)return i;let r=new n(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){return y(this,null,function*(){let i=e,{eventId:r,eventType:s,data:o}=i.data,c=this.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let u=Array.from(c).map(f=>y(this,null,function*(){return f(i.origin,o)})),d=yield nA(u);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})})}_subscribe(e,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(i)}_unsubscribe(e,i){this.handlersMap[e]&&i&&this.handlersMap[e].delete(i),(!i||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Ov(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}var Ud=class{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,e,i=50){return y(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((c,u)=>{let d=Ov("",20);r.port1.start();let f=setTimeout(()=>{u(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(p){let b=p;if(b.data.eventId===d)switch(b.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(b.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:d,data:e},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Be(){return window}function rA(n){Be().location.href=n}function Nv(){return typeof Be().WorkerGlobalScope<"u"&&typeof Be().importScripts=="function"}function sA(){return y(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function oA(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function aA(){return Nv()?self:null}var Fv="firebaseLocalStorageDb",cA=1,sc="firebaseLocalStorage",Vv="fbase_key",gi=class{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}};function cc(n,t){return n.transaction([sc],t?"readwrite":"readonly").objectStore(sc)}function lA(){let n=indexedDB.deleteDatabase(Fv);return new gi(n).toPromise()}function jd(){let n=indexedDB.open(Fv,cA);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(sc,{keyPath:Vv})}catch(r){e(r)}}),n.addEventListener("success",()=>y(this,null,function*(){let i=n.result;i.objectStoreNames.contains(sc)?t(i):(i.close(),yield lA(),t(yield jd()))}))})}function ov(n,t,e){return y(this,null,function*(){let i=cc(n,!0).put({[Vv]:t,value:e});return new gi(i).toPromise()})}function uA(n,t){return y(this,null,function*(){let e=cc(n,!1).get(t),i=yield new gi(e).toPromise();return i===void 0?null:i.value})}function av(n,t){let e=cc(n,!0).delete(t);return new gi(e).toPromise()}var dA=800,hA=3,fA=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return y(this,null,function*(){return this.db?this.db:(this.db=yield jd(),this.db)})}_withRetries(e){return y(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield e(r)}catch(r){if(i++>hA)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return y(this,null,function*(){return Nv()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return y(this,null,function*(){this.receiver=iA._getInstance(aA()),this.receiver._subscribe("keyChanged",(e,i)=>y(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(e,i)=>y(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return y(this,null,function*(){var e,i;if(this.activeServiceWorker=yield sA(),!this.activeServiceWorker)return;this.sender=new Ud(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(e){return y(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||oA()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return y(this,null,function*(){try{if(!indexedDB)return!1;let e=yield jd();return yield ov(e,ic,"1"),yield av(e,ic),!0}catch{}return!1})}_withPendingWrite(e){return y(this,null,function*(){this.pendingWrites++;try{yield e()}finally{this.pendingWrites--}})}_set(e,i){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(r=>ov(r,e,i)),this.localCache[e]=i,this.notifyServiceWorker(e)}))})}_get(e){return y(this,null,function*(){let i=yield this._withRetries(r=>uA(r,e));return this.localCache[e]=i,i})}_remove(e){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(i=>av(i,e)),delete this.localCache[e],this.notifyServiceWorker(e)}))})}_poll(){return y(this,null,function*(){let e=yield this._withRetries(s=>{let o=cc(s,!1).getAll();return new gi(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(e.length!==0)for(let{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(e,i){this.localCache[e]=i;let r=this.listeners[e];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>y(this,null,function*(){return this._poll()}),dA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Lv=fA;var CM=xv("rcb"),AM=new pi(3e4,6e4);function mA(n,t){return t?dn(t):(H(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var eo=class extends ec{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Dd(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Dd(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Dd(t,this._buildIdpRequest())}_buildIdpRequest(t){let e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}};function pA(n){return QC(n.auth,new eo(n),n.bypassAuthState)}function gA(n){let{auth:t,user:e}=n;return H(e,t,"internal-error"),YC(e,new eo(n),n.bypassAuthState)}function _A(n){return y(this,null,function*(){let{auth:t,user:e}=n;return H(e,t,"internal-error"),KC(e,new eo(n),n.bypassAuthState)})}var Bd=class{constructor(t,e,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((t,e)=>y(this,null,function*(){this.pendingPromise={resolve:t,reject:e};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(t){return y(this,null,function*(){let{urlResponse:e,sessionId:i,postBody:r,tenantId:s,error:o,type:c}=t;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:e,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(d){this.reject(d)}})}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return pA;case"linkViaPopup":case"linkViaRedirect":return _A;case"reauthViaPopup":case"reauthViaRedirect":return gA;default:Fn(this.auth,"internal-error")}}resolve(t){Vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var SM=new pi(2e3,1e4);var vA="pendingRedirect",Ka=new Map,zd=class n extends Bd{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}execute(){return y(this,null,function*(){let t=Ka.get(this.auth._key());if(!t){try{let i=(yield bA(this.resolver,this.auth))?yield En(n.prototype,this,"execute").call(this):null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}Ka.set(this.auth._key(),t)}return this.bypassAuthState||Ka.set(this.auth._key(),()=>Promise.resolve(null)),t()})}onAuthEvent(t){return y(this,null,function*(){if(t.type==="signInViaRedirect")return En(n.prototype,this,"onAuthEvent").call(this,t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){let e=yield this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,En(n.prototype,this,"onAuthEvent").call(this,t);this.resolve(null)}})}onExecution(){return y(this,null,function*(){})}cleanUp(){}};function bA(n,t){return y(this,null,function*(){let e=IA(t),i=wA(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(e))==="true";return yield i._remove(e),r})}function yA(n,t){Ka.set(n._key(),t)}function wA(n){return dn(n._redirectPersistence)}function IA(n){return Wa(vA,n.config.apiKey,n.name)}function EA(n,t,e=!1){return y(this,null,function*(){if(an(n.app))return Promise.reject(fi(n));let i=Jd(n),r=mA(i,t),o=yield new zd(i,r,e).execute();return o&&!e&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,t)),o})}var TA=10*60*1e3,$d=class{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!CA(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!Uv(t)){let r=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";e.onError(mi(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){let i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=TA&&this.cachedEventUids.clear(),this.cachedEventUids.has(cv(t))}saveEventToCache(t){this.cachedEventUids.add(cv(t)),this.lastProcessedEventTime=Date.now()}};function cv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function Uv({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function CA(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Uv(n);default:return!1}}function AA(e){return y(this,arguments,function*(n,t={}){return cr(n,"GET","/v1/projects",t)})}var SA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DA=/^https?/;function RA(n){return y(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:t}=yield AA(n);for(let e of t)try{if(xA(e))return}catch{}Fn(n,"unauthorized-domain")})}function xA(n){let t=xd(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&o.hostname===i}if(!DA.test(e))return!1;if(SA.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var kA=new pi(3e4,6e4);function lv(){let n=Be().___jsl;if(n?.H){for(let t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function PA(n){return new Promise((t,e)=>{var i,r,s;function o(){lv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{lv(),e(mi(n,"network-request-failed"))},timeout:kA.get()})}if(!((r=(i=Be().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((s=Be().gapi)===null||s===void 0)&&s.load)o();else{let c=xv("iframefcb");return Be()[c]=()=>{gapi.load?o():e(mi(n,"network-request-failed"))},$C(`${qC()}?onload=${c}`).catch(u=>e(u))}}).catch(t=>{throw Ya=null,t})}var Ya=null;function MA(n){return Ya=Ya||PA(n),Ya}var OA=new pi(5e3,15e3),NA="__/auth/iframe",FA="emulator/auth/iframe",VA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UA(n){let t=n.config;H(t.authDomain,n,"auth-domain-config-required");let e=t.emulator?Wd(t,FA):`https://${n.config.authDomain}/${NA}`,i={apiKey:t.apiKey,appName:n.name,v:On},r=LA.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${e}?${Hs(i).slice(1)}`}function jA(n){return y(this,null,function*(){let t=yield MA(n),e=Be().gapi;return H(e,n,"internal-error"),t.open({where:document.body,url:UA(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VA,dontclear:!0},i=>new Promise((r,s)=>y(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=mi(n,"network-request-failed"),c=Be().setTimeout(()=>{s(o)},OA.get());function u(){Be().clearTimeout(c),r(i)}i.ping(u).then(u,()=>{s(o)})})))})}var BA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zA=500,$A=600,qA="_blank",HA="http://localhost",oc=class{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function GA(n,t,e,i=zA,r=$A){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",u=Object.assign(Object.assign({},BA),{width:i.toString(),height:r.toString(),top:s,left:o}),d=Vt().toLowerCase();e&&(c=Ev(d)?qA:e),Iv(d)&&(t=t||HA,u.scrollbars="yes");let f=Object.entries(u).reduce((b,[A,R])=>`${b}${A}=${R},`,"");if(VC(d)&&c!=="_self")return WA(t||"",c),new oc(null);let p=window.open(t||"",c,f);H(p,n,"popup-blocked");try{p.focus()}catch{}return new oc(p)}function WA(n,t){let e=document.createElement("a");e.href=n,e.target=t;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}var KA="__/auth/handler",YA="emulator/auth/handler",QA=encodeURIComponent("fac");function uv(n,t,e,i,r,s){return y(this,null,function*(){H(n.config.authDomain,n,"auth-domain-config-required"),H(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:On,eventId:r};if(t instanceof nc){t.setDefaultLanguage(n.languageCode),o.providerId=t.providerId||"",F_(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(let[f,p]of Object.entries(s||{}))o[f]=p}if(t instanceof Vd){let f=t.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let u=yield n._getAppCheckToken(),d=u?`#${QA}=${encodeURIComponent(u)}`:"";return`${XA(n)}?${Hs(c).slice(1)}${d}`})}function XA({config:n}){return n.emulator?Wd(n,YA):`https://${n.authDomain}/${KA}`}var Rd="webStorageSupport",qd=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sh,this._completeRedirectFn=EA,this._overrideRedirectResult=yA}_openPopup(t,e,i,r){return y(this,null,function*(){var s;Vn((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield uv(t,e,i,xd(),r);return GA(t,o,Ov())})}_openRedirect(t,e,i,r){return y(this,null,function*(){yield this._originValidation(t);let s=yield uv(t,e,i,xd(),r);return rA(s),new Promise(()=>{})})}_initialize(t){let e=t._key();if(this.eventManagers[e]){let{manager:r,promise:s}=this.eventManagers[e];return r?Promise.resolve(r):(Vn(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}initAndGetManager(t){return y(this,null,function*(){let e=yield jA(t),i=new $d(t);return e.register("authEvent",r=>(H(r?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i})}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Rd,{type:Rd},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[Rd];o!==void 0&&e(!!o),Fn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){let e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=RA(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Dv()||Zd()||ac()}},jv=qd;var dv="@firebase/auth",hv="1.7.3";var Hd=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}getToken(t){return y(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(t)}:null})}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function ZA(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JA(n){Mn(new Ie("auth",(t,{options:e})=>{let i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=i.options;H(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let u={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rv(n)},d=new Fd(i,r,s,u);return HC(d,e),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),Mn(new Ie("auth-internal",t=>{let e=Jd(t.getProvider("auth").getImmediate());return(i=>new Hd(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Lt(dv,hv,ZA(n)),Lt(dv,hv,"esm2017")}var tS=5*60,eS=cd("authIdTokenMaxAge")||tS,fv=null,nS=n=>t=>y(void 0,null,function*(){let e=t&&(yield t.getIdTokenResult()),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>eS)return;let r=e?.token;fv!==r&&(fv=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function oh(n=ir()){let t=Ks(n,"auth");if(t.isInitialized())return t.getImmediate();let e=eh(n,{popupRedirectResolver:jv,persistence:[Lv,Mv,sh]}),i=cd("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=nS(s.toString());rh(e,o,()=>o(e.currentUser)),ih(e,c=>o(c))}}let r=od("auth");return r&&nh(e,`http://${r}`),e}function iS(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}zC({loadJS(n){return new Promise((t,e)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=r=>{let s=mi("internal-error");s.customData=r,e(s)},i.type="text/javascript",i.charset="UTF-8",iS().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JA("Browser");var Bv="auth",no=class{constructor(t){return t}},io=class{constructor(){return Ys(Bv)}};var ah=new J("angularfire2.auth-instances");function XS(n,t){let e=$a(Bv,n,t);return e&&new no(e)}function ZS(n){return(t,e)=>{let i=t.runOutsideAngular(()=>n(e));return new no(i)}}var JS={provide:io,deps:[[new ce,ah]]},tD={provide:no,useFactory:XS,deps:[[new ce,ah],ln]};function zv(n,...t){return Lt("angularfire",di.full,"auth"),Se([tD,JS,{provide:ah,useFactory:ZS(n),multi:!0,deps:[G,le,or,hi,[new ce,sr],...t]}])}var $v=cn(oh,!0);var qv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Hv={};var Ln,ch;(function(){var n;function t(I,g){function v(){}v.prototype=g.prototype,I.D=g.prototype,I.prototype=new v,I.prototype.constructor=I,I.C=function(w,E,C){for(var _=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)_[Ye-2]=arguments[Ye];return g.prototype[E].apply(w,_)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,g,v){v||(v=0);var w=Array(16);if(typeof g=="string")for(var E=0;16>E;++E)w[E]=g.charCodeAt(v++)|g.charCodeAt(v++)<<8|g.charCodeAt(v++)<<16|g.charCodeAt(v++)<<24;else for(E=0;16>E;++E)w[E]=g[v++]|g[v++]<<8|g[v++]<<16|g[v++]<<24;g=I.g[0],v=I.g[1],E=I.g[2];var C=I.g[3],_=g+(C^v&(E^C))+w[0]+3614090360&4294967295;g=v+(_<<7&4294967295|_>>>25),_=C+(E^g&(v^E))+w[1]+3905402710&4294967295,C=g+(_<<12&4294967295|_>>>20),_=E+(v^C&(g^v))+w[2]+606105819&4294967295,E=C+(_<<17&4294967295|_>>>15),_=v+(g^E&(C^g))+w[3]+3250441966&4294967295,v=E+(_<<22&4294967295|_>>>10),_=g+(C^v&(E^C))+w[4]+4118548399&4294967295,g=v+(_<<7&4294967295|_>>>25),_=C+(E^g&(v^E))+w[5]+1200080426&4294967295,C=g+(_<<12&4294967295|_>>>20),_=E+(v^C&(g^v))+w[6]+2821735955&4294967295,E=C+(_<<17&4294967295|_>>>15),_=v+(g^E&(C^g))+w[7]+4249261313&4294967295,v=E+(_<<22&4294967295|_>>>10),_=g+(C^v&(E^C))+w[8]+1770035416&4294967295,g=v+(_<<7&4294967295|_>>>25),_=C+(E^g&(v^E))+w[9]+2336552879&4294967295,C=g+(_<<12&4294967295|_>>>20),_=E+(v^C&(g^v))+w[10]+4294925233&4294967295,E=C+(_<<17&4294967295|_>>>15),_=v+(g^E&(C^g))+w[11]+2304563134&4294967295,v=E+(_<<22&4294967295|_>>>10),_=g+(C^v&(E^C))+w[12]+1804603682&4294967295,g=v+(_<<7&4294967295|_>>>25),_=C+(E^g&(v^E))+w[13]+4254626195&4294967295,C=g+(_<<12&4294967295|_>>>20),_=E+(v^C&(g^v))+w[14]+2792965006&4294967295,E=C+(_<<17&4294967295|_>>>15),_=v+(g^E&(C^g))+w[15]+1236535329&4294967295,v=E+(_<<22&4294967295|_>>>10),_=g+(E^C&(v^E))+w[1]+4129170786&4294967295,g=v+(_<<5&4294967295|_>>>27),_=C+(v^E&(g^v))+w[6]+3225465664&4294967295,C=g+(_<<9&4294967295|_>>>23),_=E+(g^v&(C^g))+w[11]+643717713&4294967295,E=C+(_<<14&4294967295|_>>>18),_=v+(C^g&(E^C))+w[0]+3921069994&4294967295,v=E+(_<<20&4294967295|_>>>12),_=g+(E^C&(v^E))+w[5]+3593408605&4294967295,g=v+(_<<5&4294967295|_>>>27),_=C+(v^E&(g^v))+w[10]+38016083&4294967295,C=g+(_<<9&4294967295|_>>>23),_=E+(g^v&(C^g))+w[15]+3634488961&4294967295,E=C+(_<<14&4294967295|_>>>18),_=v+(C^g&(E^C))+w[4]+3889429448&4294967295,v=E+(_<<20&4294967295|_>>>12),_=g+(E^C&(v^E))+w[9]+568446438&4294967295,g=v+(_<<5&4294967295|_>>>27),_=C+(v^E&(g^v))+w[14]+3275163606&4294967295,C=g+(_<<9&4294967295|_>>>23),_=E+(g^v&(C^g))+w[3]+4107603335&4294967295,E=C+(_<<14&4294967295|_>>>18),_=v+(C^g&(E^C))+w[8]+1163531501&4294967295,v=E+(_<<20&4294967295|_>>>12),_=g+(E^C&(v^E))+w[13]+2850285829&4294967295,g=v+(_<<5&4294967295|_>>>27),_=C+(v^E&(g^v))+w[2]+4243563512&4294967295,C=g+(_<<9&4294967295|_>>>23),_=E+(g^v&(C^g))+w[7]+1735328473&4294967295,E=C+(_<<14&4294967295|_>>>18),_=v+(C^g&(E^C))+w[12]+2368359562&4294967295,v=E+(_<<20&4294967295|_>>>12),_=g+(v^E^C)+w[5]+4294588738&4294967295,g=v+(_<<4&4294967295|_>>>28),_=C+(g^v^E)+w[8]+2272392833&4294967295,C=g+(_<<11&4294967295|_>>>21),_=E+(C^g^v)+w[11]+1839030562&4294967295,E=C+(_<<16&4294967295|_>>>16),_=v+(E^C^g)+w[14]+4259657740&4294967295,v=E+(_<<23&4294967295|_>>>9),_=g+(v^E^C)+w[1]+2763975236&4294967295,g=v+(_<<4&4294967295|_>>>28),_=C+(g^v^E)+w[4]+1272893353&4294967295,C=g+(_<<11&4294967295|_>>>21),_=E+(C^g^v)+w[7]+4139469664&4294967295,E=C+(_<<16&4294967295|_>>>16),_=v+(E^C^g)+w[10]+3200236656&4294967295,v=E+(_<<23&4294967295|_>>>9),_=g+(v^E^C)+w[13]+681279174&4294967295,g=v+(_<<4&4294967295|_>>>28),_=C+(g^v^E)+w[0]+3936430074&4294967295,C=g+(_<<11&4294967295|_>>>21),_=E+(C^g^v)+w[3]+3572445317&4294967295,E=C+(_<<16&4294967295|_>>>16),_=v+(E^C^g)+w[6]+76029189&4294967295,v=E+(_<<23&4294967295|_>>>9),_=g+(v^E^C)+w[9]+3654602809&4294967295,g=v+(_<<4&4294967295|_>>>28),_=C+(g^v^E)+w[12]+3873151461&4294967295,C=g+(_<<11&4294967295|_>>>21),_=E+(C^g^v)+w[15]+530742520&4294967295,E=C+(_<<16&4294967295|_>>>16),_=v+(E^C^g)+w[2]+3299628645&4294967295,v=E+(_<<23&4294967295|_>>>9),_=g+(E^(v|~C))+w[0]+4096336452&4294967295,g=v+(_<<6&4294967295|_>>>26),_=C+(v^(g|~E))+w[7]+1126891415&4294967295,C=g+(_<<10&4294967295|_>>>22),_=E+(g^(C|~v))+w[14]+2878612391&4294967295,E=C+(_<<15&4294967295|_>>>17),_=v+(C^(E|~g))+w[5]+4237533241&4294967295,v=E+(_<<21&4294967295|_>>>11),_=g+(E^(v|~C))+w[12]+1700485571&4294967295,g=v+(_<<6&4294967295|_>>>26),_=C+(v^(g|~E))+w[3]+2399980690&4294967295,C=g+(_<<10&4294967295|_>>>22),_=E+(g^(C|~v))+w[10]+4293915773&4294967295,E=C+(_<<15&4294967295|_>>>17),_=v+(C^(E|~g))+w[1]+2240044497&4294967295,v=E+(_<<21&4294967295|_>>>11),_=g+(E^(v|~C))+w[8]+1873313359&4294967295,g=v+(_<<6&4294967295|_>>>26),_=C+(v^(g|~E))+w[15]+4264355552&4294967295,C=g+(_<<10&4294967295|_>>>22),_=E+(g^(C|~v))+w[6]+2734768916&4294967295,E=C+(_<<15&4294967295|_>>>17),_=v+(C^(E|~g))+w[13]+1309151649&4294967295,v=E+(_<<21&4294967295|_>>>11),_=g+(E^(v|~C))+w[4]+4149444226&4294967295,g=v+(_<<6&4294967295|_>>>26),_=C+(v^(g|~E))+w[11]+3174756917&4294967295,C=g+(_<<10&4294967295|_>>>22),_=E+(g^(C|~v))+w[2]+718787259&4294967295,E=C+(_<<15&4294967295|_>>>17),_=v+(C^(E|~g))+w[9]+3951481745&4294967295,I.g[0]=I.g[0]+g&4294967295,I.g[1]=I.g[1]+(E+(_<<21&4294967295|_>>>11))&4294967295,I.g[2]=I.g[2]+E&4294967295,I.g[3]=I.g[3]+C&4294967295}i.prototype.u=function(I,g){g===void 0&&(g=I.length);for(var v=g-this.blockSize,w=this.B,E=this.h,C=0;C<g;){if(E==0)for(;C<=v;)r(this,I,C),C+=this.blockSize;if(typeof I=="string"){for(;C<g;)if(w[E++]=I.charCodeAt(C++),E==this.blockSize){r(this,w),E=0;break}}else for(;C<g;)if(w[E++]=I[C++],E==this.blockSize){r(this,w),E=0;break}}this.h=E,this.o+=g},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var g=1;g<I.length-8;++g)I[g]=0;var v=8*this.o;for(g=I.length-8;g<I.length;++g)I[g]=v&255,v/=256;for(this.u(I),I=Array(16),g=v=0;4>g;++g)for(var w=0;32>w;w+=8)I[v++]=this.g[g]>>>w&255;return I};function s(I,g){var v=c;return Object.prototype.hasOwnProperty.call(v,I)?v[I]:v[I]=g(I)}function o(I,g){this.h=g;for(var v=[],w=!0,E=I.length-1;0<=E;E--){var C=I[E]|0;w&&C==g||(v[E]=C,w=!1)}this.g=v}var c={};function u(I){return-128<=I&&128>I?s(I,function(g){return new o([g|0],0>g?-1:0)}):new o([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return k(d(-I));for(var g=[],v=1,w=0;I>=v;w++)g[w]=I/v|0,v*=4294967296;return new o(g,0)}function f(I,g){if(I.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(I.charAt(0)=="-")return k(f(I.substring(1),g));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=d(Math.pow(g,8)),w=p,E=0;E<I.length;E+=8){var C=Math.min(8,I.length-E),_=parseInt(I.substring(E,E+C),g);8>C?(C=d(Math.pow(g,C)),w=w.j(C).add(d(_))):(w=w.j(v),w=w.add(d(_)))}return w}var p=u(0),b=u(1),A=u(16777216);n=o.prototype,n.m=function(){if(M(this))return-k(this).m();for(var I=0,g=1,v=0;v<this.g.length;v++){var w=this.i(v);I+=(0<=w?w:4294967296+w)*g,g*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R(this))return"0";if(M(this))return"-"+k(this).toString(I);for(var g=d(Math.pow(I,6)),v=this,w="";;){var E=gt(v,g).g;v=z(v,E.j(g));var C=((0<v.g.length?v.g[0]:v.h)>>>0).toString(I);if(v=E,R(v))return C+w;for(;6>C.length;)C="0"+C;w=C+w}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function R(I){if(I.h!=0)return!1;for(var g=0;g<I.g.length;g++)if(I.g[g]!=0)return!1;return!0}function M(I){return I.h==-1}n.l=function(I){return I=z(this,I),M(I)?-1:R(I)?0:1};function k(I){for(var g=I.g.length,v=[],w=0;w<g;w++)v[w]=~I.g[w];return new o(v,~I.h).add(b)}n.abs=function(){return M(this)?k(this):this},n.add=function(I){for(var g=Math.max(this.g.length,I.g.length),v=[],w=0,E=0;E<=g;E++){var C=w+(this.i(E)&65535)+(I.i(E)&65535),_=(C>>>16)+(this.i(E)>>>16)+(I.i(E)>>>16);w=_>>>16,C&=65535,_&=65535,v[E]=_<<16|C}return new o(v,v[v.length-1]&-2147483648?-1:0)};function z(I,g){return I.add(k(g))}n.j=function(I){if(R(this)||R(I))return p;if(M(this))return M(I)?k(this).j(k(I)):k(k(this).j(I));if(M(I))return k(this.j(k(I)));if(0>this.l(A)&&0>I.l(A))return d(this.m()*I.m());for(var g=this.g.length+I.g.length,v=[],w=0;w<2*g;w++)v[w]=0;for(w=0;w<this.g.length;w++)for(var E=0;E<I.g.length;E++){var C=this.i(w)>>>16,_=this.i(w)&65535,Ye=I.i(E)>>>16,Br=I.i(E)&65535;v[2*w+2*E]+=_*Br,Z(v,2*w+2*E),v[2*w+2*E+1]+=C*Br,Z(v,2*w+2*E+1),v[2*w+2*E+1]+=_*Ye,Z(v,2*w+2*E+1),v[2*w+2*E+2]+=C*Ye,Z(v,2*w+2*E+2)}for(w=0;w<g;w++)v[w]=v[2*w+1]<<16|v[2*w];for(w=g;w<2*g;w++)v[w]=0;return new o(v,0)};function Z(I,g){for(;(I[g]&65535)!=I[g];)I[g+1]+=I[g]>>>16,I[g]&=65535,g++}function rt(I,g){this.g=I,this.h=g}function gt(I,g){if(R(g))throw Error("division by zero");if(R(I))return new rt(p,p);if(M(I))return g=gt(k(I),g),new rt(k(g.g),k(g.h));if(M(g))return g=gt(I,k(g)),new rt(k(g.g),g.h);if(30<I.g.length){if(M(I)||M(g))throw Error("slowDivide_ only works with positive integers.");for(var v=b,w=g;0>=w.l(I);)v=te(v),w=te(w);var E=ht(v,1),C=ht(w,1);for(w=ht(w,2),v=ht(v,2);!R(w);){var _=C.add(w);0>=_.l(I)&&(E=E.add(v),C=_),w=ht(w,1),v=ht(v,1)}return g=z(I,E.j(g)),new rt(E,g)}for(E=p;0<=I.l(g);){for(v=Math.max(1,Math.floor(I.m()/g.m())),w=Math.ceil(Math.log(v)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),C=d(v),_=C.j(g);M(_)||0<_.l(I);)v-=w,C=d(v),_=C.j(g);R(C)&&(C=b),E=E.add(C),I=z(I,_)}return new rt(E,I)}n.A=function(I){return gt(this,I).h},n.and=function(I){for(var g=Math.max(this.g.length,I.g.length),v=[],w=0;w<g;w++)v[w]=this.i(w)&I.i(w);return new o(v,this.h&I.h)},n.or=function(I){for(var g=Math.max(this.g.length,I.g.length),v=[],w=0;w<g;w++)v[w]=this.i(w)|I.i(w);return new o(v,this.h|I.h)},n.xor=function(I){for(var g=Math.max(this.g.length,I.g.length),v=[],w=0;w<g;w++)v[w]=this.i(w)^I.i(w);return new o(v,this.h^I.h)};function te(I){for(var g=I.g.length+1,v=[],w=0;w<g;w++)v[w]=I.i(w)<<1|I.i(w-1)>>>31;return new o(v,I.h)}function ht(I,g){var v=g>>5;g%=32;for(var w=I.g.length-v,E=[],C=0;C<w;C++)E[C]=0<g?I.i(C+v)>>>g|I.i(C+v+1)<<32-g:I.i(C+v);return new o(E,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,ch=Hv.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Ln=Hv.Integer=o}).apply(typeof qv<"u"?qv:typeof self<"u"?self:typeof window<"u"?window:{});var lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hn={};var lh,uh,lr,dh,ro,uc,hh,fh,mh;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,l,h){return a==Array.prototype||a==Object.prototype||(a[l]=h.value),a};function e(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof lc=="object"&&lc];for(var l=0;l<a.length;++l){var h=a[l];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var i=e(this);function r(a,l){if(l)t:{var h=i;a=a.split(".");for(var m=0;m<a.length-1;m++){var T=a[m];if(!(T in h))break t;h=h[T]}a=a[a.length-1],m=h[a],l=l(m),l!=m&&l!=null&&t(h,a,{configurable:!0,writable:!0,value:l})}}function s(a,l){a instanceof String&&(a+="");var h=0,m=!1,T={next:function(){if(!m&&h<a.length){var S=h++;return{value:l(S,a[S]),done:!1}}return m=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}r("Array.prototype.values",function(a){return a||function(){return s(this,function(l,h){return h})}});var o=o||{},c=this||self;function u(a){var l=typeof a;return l=l!="object"?l:a?Array.isArray(a)?"array":l:"null",l=="array"||l=="object"&&typeof a.length=="number"}function d(a){var l=typeof a;return l=="object"&&a!=null||l=="function"}function f(a,l,h){return a.call.apply(a.bind,arguments)}function p(a,l,h){if(!a)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,m),a.apply(l,T)}}return function(){return a.apply(l,arguments)}}function b(a,l,h){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,b.apply(null,arguments)}function A(a,l){var h=Array.prototype.slice.call(arguments,1);return function(){var m=h.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function R(a,l){function h(){}h.prototype=l.prototype,a.aa=l.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(m,T,S){for(var O=Array(arguments.length-2),ft=2;ft<arguments.length;ft++)O[ft-2]=arguments[ft];return l.prototype[T].apply(m,O)}}function M(a){let l=a.length;if(0<l){let h=Array(l);for(let m=0;m<l;m++)h[m]=a[m];return h}return[]}function k(a,l){for(let h=1;h<arguments.length;h++){let m=arguments[h];if(u(m)){let T=a.length||0,S=m.length||0;a.length=T+S;for(let O=0;O<S;O++)a[T+O]=m[O]}else a.push(m)}}class z{constructor(l,h){this.i=l,this.j=h,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function Z(a){return/^[\s\xa0]*$/.test(a)}function rt(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function gt(a){return gt[" "](a),a}gt[" "]=function(){};var te=rt().indexOf("Gecko")!=-1&&!(rt().toLowerCase().indexOf("webkit")!=-1&&rt().indexOf("Edge")==-1)&&!(rt().indexOf("Trident")!=-1||rt().indexOf("MSIE")!=-1)&&rt().indexOf("Edge")==-1;function ht(a,l,h){for(let m in a)l.call(h,a[m],m,a)}function I(a,l){for(let h in a)l.call(void 0,a[h],h,a)}function g(a){let l={};for(let h in a)l[h]=a[h];return l}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,l){let h,m;for(let T=1;T<arguments.length;T++){m=arguments[T];for(h in m)a[h]=m[h];for(let S=0;S<v.length;S++)h=v[S],Object.prototype.hasOwnProperty.call(m,h)&&(a[h]=m[h])}}function E(a){var l=1;a=a.split(":");let h=[];for(;0<l&&a.length;)h.push(a.shift()),l--;return a.length&&h.push(a.join(":")),h}function C(a){c.setTimeout(()=>{throw a},0)}function _(){var a=hl;let l=null;return a.g&&(l=a.g,a.g=a.g.next,a.g||(a.h=null),l.next=null),l}class Ye{constructor(){this.h=this.g=null}add(l,h){let m=Br.get();m.set(l,h),this.h?this.h.next=m:this.g=m,this.h=m}}var Br=new z(()=>new Mw,a=>a.reset());class Mw{constructor(){this.next=this.g=this.h=null}set(l,h){this.h=l,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let zr,$r=!1,hl=new Ye,$m=()=>{let a=c.Promise.resolve(void 0);zr=()=>{a.then(Ow)}};var Ow=()=>{for(var a;a=_();){try{a.h.call(a.g)}catch(h){C(h)}var l=Br;l.j(a),100>l.h&&(l.h++,a.next=l.g,l.g=a)}$r=!1};function bn(){this.s=this.s,this.C=this.C}bn.prototype.s=!1,bn.prototype.ma=function(){this.s||(this.s=!0,this.N())},bn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Wt(a,l){this.type=a,this.g=this.target=l,this.defaultPrevented=!1}Wt.prototype.h=function(){this.defaultPrevented=!0};var Nw=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,l=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,l),c.removeEventListener("test",h,l)}catch{}return a}();function qr(a,l){if(Wt.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=l,l=a.relatedTarget){if(te){t:{try{gt(l.nodeName);var T=!0;break t}catch{}T=!1}T||(l=null)}}else h=="mouseover"?l=a.fromElement:h=="mouseout"&&(l=a.toElement);this.relatedTarget=l,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Fw[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&qr.aa.h.call(this)}}R(qr,Wt);var Fw={2:"touch",3:"pen",4:"mouse"};qr.prototype.h=function(){qr.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Hr="closure_listenable_"+(1e6*Math.random()|0),Vw=0;function Lw(a,l,h,m,T){this.listener=a,this.proxy=null,this.src=l,this.type=h,this.capture=!!m,this.ha=T,this.key=++Vw,this.da=this.fa=!1}function Oo(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function No(a){this.src=a,this.g={},this.h=0}No.prototype.add=function(a,l,h,m,T){var S=a.toString();a=this.g[S],a||(a=this.g[S]=[],this.h++);var O=ml(a,l,m,T);return-1<O?(l=a[O],h||(l.fa=!1)):(l=new Lw(l,this.src,S,!!m,T),l.fa=h,a.push(l)),l};function fl(a,l){var h=l.type;if(h in a.g){var m=a.g[h],T=Array.prototype.indexOf.call(m,l,void 0),S;(S=0<=T)&&Array.prototype.splice.call(m,T,1),S&&(Oo(l),a.g[h].length==0&&(delete a.g[h],a.h--))}}function ml(a,l,h,m){for(var T=0;T<a.length;++T){var S=a[T];if(!S.da&&S.listener==l&&S.capture==!!h&&S.ha==m)return T}return-1}var pl="closure_lm_"+(1e6*Math.random()|0),gl={};function qm(a,l,h,m,T){if(m&&m.once)return Gm(a,l,h,m,T);if(Array.isArray(l)){for(var S=0;S<l.length;S++)qm(a,l[S],h,m,T);return null}return h=yl(h),a&&a[Hr]?a.K(l,h,d(m)?!!m.capture:!!m,T):Hm(a,l,h,!1,m,T)}function Hm(a,l,h,m,T,S){if(!l)throw Error("Invalid event type");var O=d(T)?!!T.capture:!!T,ft=vl(a);if(ft||(a[pl]=ft=new No(a)),h=ft.add(l,h,m,O,S),h.proxy)return h;if(m=Uw(),h.proxy=m,m.src=a,m.listener=h,a.addEventListener)Nw||(T=O),T===void 0&&(T=!1),a.addEventListener(l.toString(),m,T);else if(a.attachEvent)a.attachEvent(Km(l.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return h}function Uw(){function a(h){return l.call(a.src,a.listener,h)}let l=jw;return a}function Gm(a,l,h,m,T){if(Array.isArray(l)){for(var S=0;S<l.length;S++)Gm(a,l[S],h,m,T);return null}return h=yl(h),a&&a[Hr]?a.L(l,h,d(m)?!!m.capture:!!m,T):Hm(a,l,h,!0,m,T)}function Wm(a,l,h,m,T){if(Array.isArray(l))for(var S=0;S<l.length;S++)Wm(a,l[S],h,m,T);else m=d(m)?!!m.capture:!!m,h=yl(h),a&&a[Hr]?(a=a.i,l=String(l).toString(),l in a.g&&(S=a.g[l],h=ml(S,h,m,T),-1<h&&(Oo(S[h]),Array.prototype.splice.call(S,h,1),S.length==0&&(delete a.g[l],a.h--)))):a&&(a=vl(a))&&(l=a.g[l.toString()],a=-1,l&&(a=ml(l,h,m,T)),(h=-1<a?l[a]:null)&&_l(h))}function _l(a){if(typeof a!="number"&&a&&!a.da){var l=a.src;if(l&&l[Hr])fl(l.i,a);else{var h=a.type,m=a.proxy;l.removeEventListener?l.removeEventListener(h,m,a.capture):l.detachEvent?l.detachEvent(Km(h),m):l.addListener&&l.removeListener&&l.removeListener(m),(h=vl(l))?(fl(h,a),h.h==0&&(h.src=null,l[pl]=null)):Oo(a)}}}function Km(a){return a in gl?gl[a]:gl[a]="on"+a}function jw(a,l){if(a.da)a=!0;else{l=new qr(l,this);var h=a.listener,m=a.ha||a.src;a.fa&&_l(a),a=h.call(m,l)}return a}function vl(a){return a=a[pl],a instanceof No?a:null}var bl="__closure_events_fn_"+(1e9*Math.random()>>>0);function yl(a){return typeof a=="function"?a:(a[bl]||(a[bl]=function(l){return a.handleEvent(l)}),a[bl])}function Kt(){bn.call(this),this.i=new No(this),this.M=this,this.F=null}R(Kt,bn),Kt.prototype[Hr]=!0,Kt.prototype.removeEventListener=function(a,l,h,m){Wm(this,a,l,h,m)};function ee(a,l){var h,m=a.F;if(m)for(h=[];m;m=m.F)h.push(m);if(a=a.M,m=l.type||l,typeof l=="string")l=new Wt(l,a);else if(l instanceof Wt)l.target=l.target||a;else{var T=l;l=new Wt(m,a),w(l,T)}if(T=!0,h)for(var S=h.length-1;0<=S;S--){var O=l.g=h[S];T=Fo(O,m,!0,l)&&T}if(O=l.g=a,T=Fo(O,m,!0,l)&&T,T=Fo(O,m,!1,l)&&T,h)for(S=0;S<h.length;S++)O=l.g=h[S],T=Fo(O,m,!1,l)&&T}Kt.prototype.N=function(){if(Kt.aa.N.call(this),this.i){var a=this.i,l;for(l in a.g){for(var h=a.g[l],m=0;m<h.length;m++)Oo(h[m]);delete a.g[l],a.h--}}this.F=null},Kt.prototype.K=function(a,l,h,m){return this.i.add(String(a),l,!1,h,m)},Kt.prototype.L=function(a,l,h,m){return this.i.add(String(a),l,!0,h,m)};function Fo(a,l,h,m){if(l=a.i.g[String(l)],!l)return!0;l=l.concat();for(var T=!0,S=0;S<l.length;++S){var O=l[S];if(O&&!O.da&&O.capture==h){var ft=O.listener,zt=O.ha||O.src;O.fa&&fl(a.i,O),T=ft.call(zt,m)!==!1&&T}}return T&&!m.defaultPrevented}function Ym(a,l,h){if(typeof a=="function")h&&(a=b(a,h));else if(a&&typeof a.handleEvent=="function")a=b(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:c.setTimeout(a,l||0)}function Qm(a){a.g=Ym(()=>{a.g=null,a.i&&(a.i=!1,Qm(a))},a.l);let l=a.h;a.h=null,a.m.apply(null,l)}class Bw extends bn{constructor(l,h){super(),this.m=l,this.l=h,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:Qm(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gr(a){bn.call(this),this.h=a,this.g={}}R(Gr,bn);var Xm=[];function Zm(a){ht(a.g,function(l,h){this.g.hasOwnProperty(h)&&_l(l)},a),a.g={}}Gr.prototype.N=function(){Gr.aa.N.call(this),Zm(this)},Gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wl=c.JSON.stringify,zw=c.JSON.parse,$w=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Il(){}Il.prototype.h=null;function Jm(a){return a.h||(a.h=a.i())}function tp(){}var Wr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function El(){Wt.call(this,"d")}R(El,Wt);function Tl(){Wt.call(this,"c")}R(Tl,Wt);var Hn={},ep=null;function Vo(){return ep=ep||new Kt}Hn.La="serverreachability";function np(a){Wt.call(this,Hn.La,a)}R(np,Wt);function Kr(a){let l=Vo();ee(l,new np(l))}Hn.STAT_EVENT="statevent";function ip(a,l){Wt.call(this,Hn.STAT_EVENT,a),this.stat=l}R(ip,Wt);function ne(a){let l=Vo();ee(l,new ip(l,a))}Hn.Ma="timingevent";function rp(a,l){Wt.call(this,Hn.Ma,a),this.size=l}R(rp,Wt);function Yr(a,l){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},l)}function Qr(){this.g=!0}Qr.prototype.xa=function(){this.g=!1};function qw(a,l,h,m,T,S){a.info(function(){if(a.g)if(S)for(var O="",ft=S.split("&"),zt=0;zt<ft.length;zt++){var ot=ft[zt].split("=");if(1<ot.length){var Yt=ot[0];ot=ot[1];var Qt=Yt.split("_");O=2<=Qt.length&&Qt[1]=="type"?O+(Yt+"="+ot+"&"):O+(Yt+"=redacted&")}}else O=null;else O=S;return"XMLHTTP REQ ("+m+") [attempt "+T+"]: "+l+`
`+h+`
`+O})}function Hw(a,l,h,m,T,S,O){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+T+"]: "+l+`
`+h+`
`+S+" "+O})}function Oi(a,l,h,m){a.info(function(){return"XMLHTTP TEXT ("+l+"): "+Ww(a,h)+(m?" "+m:"")})}function Gw(a,l){a.info(function(){return"TIMEOUT: "+l})}Qr.prototype.info=function(){};function Ww(a,l){if(!a.g)return l;if(!l)return null;try{var h=JSON.parse(l);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var m=h[a];if(!(2>m.length)){var T=m[1];if(Array.isArray(T)&&!(1>T.length)){var S=T[0];if(S!="noop"&&S!="stop"&&S!="close")for(var O=1;O<T.length;O++)T[O]=""}}}}return wl(h)}catch{return l}}var Lo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Cl;function Uo(){}R(Uo,Il),Uo.prototype.g=function(){return new XMLHttpRequest},Uo.prototype.i=function(){return{}},Cl=new Uo;function yn(a,l,h,m){this.j=a,this.i=l,this.l=h,this.R=m||1,this.U=new Gr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new op}function op(){this.i=null,this.g="",this.h=!1}var ap={},Al={};function Sl(a,l,h){a.L=1,a.v=$o(Qe(l)),a.m=h,a.P=!0,cp(a,null)}function cp(a,l){a.F=Date.now(),jo(a),a.A=Qe(a.v);var h=a.A,m=a.R;Array.isArray(m)||(m=[String(m)]),Ip(h.i,"t",m),a.C=0,h=a.j.J,a.h=new op,a.g=jp(a.j,h?l:null,!a.m),0<a.O&&(a.M=new Bw(b(a.Y,a,a.g),a.O)),l=a.U,h=a.g,m=a.ca;var T="readystatechange";Array.isArray(T)||(T&&(Xm[0]=T.toString()),T=Xm);for(var S=0;S<T.length;S++){var O=qm(h,T[S],m||l.handleEvent,!1,l.h||l);if(!O)break;l.g[O.key]=O}l=a.H?g(a.H):{},a.m?(a.u||(a.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,l)):(a.u="GET",a.g.ea(a.A,a.u,null,l)),Kr(),qw(a.i,a.u,a.A,a.l,a.R,a.m)}yn.prototype.ca=function(a){a=a.target;let l=this.M;l&&Xe(a)==3?l.j():this.Y(a)},yn.prototype.Y=function(a){try{if(a==this.g)t:{let Qt=Xe(this.g);var l=this.g.Ba();let Vi=this.g.Z();if(!(3>Qt)&&(Qt!=3||this.g&&(this.h.h||this.g.oa()||Rp(this.g)))){this.J||Qt!=4||l==7||(l==8||0>=Vi?Kr(3):Kr(2)),Dl(this);var h=this.g.Z();this.X=h;e:if(lp(this)){var m=Rp(this.g);a="";var T=m.length,S=Xe(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gn(this),Xr(this);var O="";break e}this.h.i=new c.TextDecoder}for(l=0;l<T;l++)this.h.h=!0,a+=this.h.i.decode(m[l],{stream:!(S&&l==T-1)});m.length=0,this.h.g+=a,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=h==200,Hw(this.i,this.u,this.A,this.l,this.R,Qt,h),this.o){if(this.T&&!this.K){e:{if(this.g){var ft,zt=this.g;if((ft=zt.g?zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(ft)){var ot=ft;break e}}ot=null}if(h=ot)Oi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rl(this,h);else{this.o=!1,this.s=3,ne(12),Gn(this),Xr(this);break t}}if(this.P){h=!0;let Ce;for(;!this.J&&this.C<O.length;)if(Ce=Kw(this,O),Ce==Al){Qt==4&&(this.s=4,ne(14),h=!1),Oi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ce==ap){this.s=4,ne(15),Oi(this.i,this.l,O,"[Invalid Chunk]"),h=!1;break}else Oi(this.i,this.l,Ce,null),Rl(this,Ce);if(lp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qt!=4||O.length!=0||this.h.h||(this.s=1,ne(16),h=!1),this.o=this.o&&h,!h)Oi(this.i,this.l,O,"[Invalid Chunked Response]"),Gn(this),Xr(this);else if(0<O.length&&!this.W){this.W=!0;var Yt=this.j;Yt.g==this&&Yt.ba&&!Yt.M&&(Yt.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),Nl(Yt),Yt.M=!0,ne(11))}}else Oi(this.i,this.l,O,null),Rl(this,O);Qt==4&&Gn(this),this.o&&!this.J&&(Qt==4?Fp(this.j,this):(this.o=!1,jo(this)))}else d0(this.g),h==400&&0<O.indexOf("Unknown SID")?(this.s=3,ne(12)):(this.s=0,ne(13)),Gn(this),Xr(this)}}}catch{}finally{}};function lp(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Kw(a,l){var h=a.C,m=l.indexOf(`
`,h);return m==-1?Al:(h=Number(l.substring(h,m)),isNaN(h)?ap:(m+=1,m+h>l.length?Al:(l=l.slice(m,m+h),a.C=m+h,l)))}yn.prototype.cancel=function(){this.J=!0,Gn(this)};function jo(a){a.S=Date.now()+a.I,up(a,a.I)}function up(a,l){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Yr(b(a.ba,a),l)}function Dl(a){a.B&&(c.clearTimeout(a.B),a.B=null)}yn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(Gw(this.i,this.A),this.L!=2&&(Kr(),ne(17)),Gn(this),this.s=2,Xr(this)):up(this,this.S-a)};function Xr(a){a.j.G==0||a.J||Fp(a.j,a)}function Gn(a){Dl(a);var l=a.M;l&&typeof l.ma=="function"&&l.ma(),a.M=null,Zm(a.U),a.g&&(l=a.g,a.g=null,l.abort(),l.ma())}function Rl(a,l){try{var h=a.j;if(h.G!=0&&(h.g==a||xl(h.h,a))){if(!a.K&&xl(h.h,a)&&h.G==3){try{var m=h.Da.g.parse(l)}catch{m=null}if(Array.isArray(m)&&m.length==3){var T=m;if(T[0]==0){t:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)Ko(h),Go(h);else break t;Ol(h),ne(18)}}else h.za=T[1],0<h.za-h.T&&37500>T[2]&&h.F&&h.v==0&&!h.C&&(h.C=Yr(b(h.Za,h),6e3));if(1>=fp(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Kn(h,11)}else if((a.K||h.g==a)&&Ko(h),!Z(l))for(T=h.Da.g.parse(l),l=0;l<T.length;l++){let ot=T[l];if(h.T=ot[0],ot=ot[1],h.G==2)if(ot[0]=="c"){h.K=ot[1],h.ia=ot[2];let Yt=ot[3];Yt!=null&&(h.la=Yt,h.j.info("VER="+h.la));let Qt=ot[4];Qt!=null&&(h.Aa=Qt,h.j.info("SVER="+h.Aa));let Vi=ot[5];Vi!=null&&typeof Vi=="number"&&0<Vi&&(m=1.5*Vi,h.L=m,h.j.info("backChannelRequestTimeoutMs_="+m)),m=h;let Ce=a.g;if(Ce){let Qo=Ce.g?Ce.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qo){var S=m.h;S.g||Qo.indexOf("spdy")==-1&&Qo.indexOf("quic")==-1&&Qo.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(kl(S,S.h),S.h=null))}if(m.D){let Fl=Ce.g?Ce.g.getResponseHeader("X-HTTP-Session-Id"):null;Fl&&(m.ya=Fl,_t(m.I,m.D,Fl))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),m=h;var O=a;if(m.qa=Up(m,m.J?m.ia:null,m.W),O.K){mp(m.h,O);var ft=O,zt=m.L;zt&&(ft.I=zt),ft.B&&(Dl(ft),jo(ft)),m.g=O}else Op(m);0<h.i.length&&Wo(h)}else ot[0]!="stop"&&ot[0]!="close"||Kn(h,7);else h.G==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?Kn(h,7):Ml(h):ot[0]!="noop"&&h.l&&h.l.ta(ot),h.v=0)}}Kr(4)}catch{}}var Yw=class{constructor(a,l){this.g=a,this.map=l}};function dp(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function fp(a){return a.h?1:a.g?a.g.size:0}function xl(a,l){return a.h?a.h==l:a.g?a.g.has(l):!1}function kl(a,l){a.g?a.g.add(l):a.h=l}function mp(a,l){a.h&&a.h==l?a.h=null:a.g&&a.g.has(l)&&a.g.delete(l)}dp.prototype.cancel=function(){if(this.i=pp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function pp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let l=a.i;for(let h of a.g.values())l=l.concat(h.D);return l}return M(a.i)}function Qw(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var l=[],h=a.length,m=0;m<h;m++)l.push(a[m]);return l}l=[],h=0;for(m in a)l[h++]=a[m];return l}function Xw(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var l=[];a=a.length;for(var h=0;h<a;h++)l.push(h);return l}l=[],h=0;for(let m in a)l[h++]=m;return l}}}function gp(a,l){if(a.forEach&&typeof a.forEach=="function")a.forEach(l,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,l,void 0);else for(var h=Xw(a),m=Qw(a),T=m.length,S=0;S<T;S++)l.call(void 0,m[S],h&&h[S],a)}var _p=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zw(a,l){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var m=a[h].indexOf("="),T=null;if(0<=m){var S=a[h].substring(0,m);T=a[h].substring(m+1)}else S=a[h];l(S,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function Wn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Wn){this.h=a.h,Bo(this,a.j),this.o=a.o,this.g=a.g,zo(this,a.s),this.l=a.l;var l=a.i,h=new ts;h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),vp(this,h),this.m=a.m}else a&&(l=String(a).match(_p))?(this.h=!1,Bo(this,l[1]||"",!0),this.o=Zr(l[2]||""),this.g=Zr(l[3]||"",!0),zo(this,l[4]),this.l=Zr(l[5]||"",!0),vp(this,l[6]||"",!0),this.m=Zr(l[7]||"")):(this.h=!1,this.i=new ts(null,this.h))}Wn.prototype.toString=function(){var a=[],l=this.j;l&&a.push(Jr(l,bp,!0),":");var h=this.g;return(h||l=="file")&&(a.push("//"),(l=this.o)&&a.push(Jr(l,bp,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(Jr(h,h.charAt(0)=="/"?e0:t0,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",Jr(h,i0)),a.join("")};function Qe(a){return new Wn(a)}function Bo(a,l,h){a.j=h?Zr(l,!0):l,a.j&&(a.j=a.j.replace(/:$/,""))}function zo(a,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);a.s=l}else a.s=null}function vp(a,l,h){l instanceof ts?(a.i=l,r0(a.i,a.h)):(h||(l=Jr(l,n0)),a.i=new ts(l,a.h))}function _t(a,l,h){a.i.set(l,h)}function $o(a){return _t(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Zr(a,l){return a?l?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Jr(a,l,h){return typeof a=="string"?(a=encodeURI(a).replace(l,Jw),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Jw(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var bp=/[#\/\?@]/g,t0=/[#\?:]/g,e0=/[#\?]/g,n0=/[#\?@]/g,i0=/#/g;function ts(a,l){this.h=this.g=null,this.i=a||null,this.j=!!l}function wn(a){a.g||(a.g=new Map,a.h=0,a.i&&Zw(a.i,function(l,h){a.add(decodeURIComponent(l.replace(/\+/g," ")),h)}))}n=ts.prototype,n.add=function(a,l){wn(this),this.i=null,a=Ni(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(l),this.h+=1,this};function yp(a,l){wn(a),l=Ni(a,l),a.g.has(l)&&(a.i=null,a.h-=a.g.get(l).length,a.g.delete(l))}function wp(a,l){return wn(a),l=Ni(a,l),a.g.has(l)}n.forEach=function(a,l){wn(this),this.g.forEach(function(h,m){h.forEach(function(T){a.call(l,T,m,this)},this)},this)},n.na=function(){wn(this);let a=Array.from(this.g.values()),l=Array.from(this.g.keys()),h=[];for(let m=0;m<l.length;m++){let T=a[m];for(let S=0;S<T.length;S++)h.push(l[m])}return h},n.V=function(a){wn(this);let l=[];if(typeof a=="string")wp(this,a)&&(l=l.concat(this.g.get(Ni(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)l=l.concat(a[h])}return l},n.set=function(a,l){return wn(this),this.i=null,a=Ni(this,a),wp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[l]),this.h+=1,this},n.get=function(a,l){return a?(a=this.V(a),0<a.length?String(a[0]):l):l};function Ip(a,l,h){yp(a,l),0<h.length&&(a.i=null,a.g.set(Ni(a,l),M(h)),a.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],l=Array.from(this.g.keys());for(var h=0;h<l.length;h++){var m=l[h];let S=encodeURIComponent(String(m)),O=this.V(m);for(m=0;m<O.length;m++){var T=S;O[m]!==""&&(T+="="+encodeURIComponent(String(O[m]))),a.push(T)}}return this.i=a.join("&")};function Ni(a,l){return l=String(l),a.j&&(l=l.toLowerCase()),l}function r0(a,l){l&&!a.j&&(wn(a),a.i=null,a.g.forEach(function(h,m){var T=m.toLowerCase();m!=T&&(yp(this,m),Ip(this,T,h))},a)),a.j=l}function s0(a,l){let h=new Qr;if(c.Image){let m=new Image;m.onload=A(In,h,"TestLoadImage: loaded",!0,l,m),m.onerror=A(In,h,"TestLoadImage: error",!1,l,m),m.onabort=A(In,h,"TestLoadImage: abort",!1,l,m),m.ontimeout=A(In,h,"TestLoadImage: timeout",!1,l,m),c.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else l(!1)}function o0(a,l){let h=new Qr,m=new AbortController,T=setTimeout(()=>{m.abort(),In(h,"TestPingServer: timeout",!1,l)},1e4);fetch(a,{signal:m.signal}).then(S=>{clearTimeout(T),S.ok?In(h,"TestPingServer: ok",!0,l):In(h,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(T),In(h,"TestPingServer: error",!1,l)})}function In(a,l,h,m,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),m(h)}catch{}}function a0(){this.g=new $w}function c0(a,l,h){let m=h||"";try{gp(a,function(T,S){let O=T;d(T)&&(O=wl(T)),l.push(m+S+"="+encodeURIComponent(O))})}catch(T){throw l.push(m+"type="+encodeURIComponent("_badmap")),T}}function es(a){this.l=a.Ub||null,this.j=a.eb||!1}R(es,Il),es.prototype.g=function(){return new qo(this.l,this.j)},es.prototype.i=function(a){return function(){return a}}({});function qo(a,l){Kt.call(this),this.D=a,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(qo,Kt),n=qo.prototype,n.open=function(a,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=l,this.readyState=1,is(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(l.body=a),(this.D||c).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ns(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,is(this)),this.g&&(this.readyState=3,is(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ep(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ep(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var l=a.value?a.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!a.done}))&&(this.response=this.responseText+=l)}a.done?ns(this):is(this),this.readyState==3&&Ep(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,ns(this))},n.Qa=function(a){this.g&&(this.response=a,ns(this))},n.ga=function(){this.g&&ns(this)};function ns(a){a.readyState=4,a.l=null,a.j=null,a.v=null,is(a)}n.setRequestHeader=function(a,l){this.u.append(a,l)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],l=this.h.entries();for(var h=l.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=l.next();return a.join(`\r
`)};function is(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(qo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Tp(a){let l="";return ht(a,function(h,m){l+=m,l+=":",l+=h,l+=`\r
`}),l}function Pl(a,l,h){t:{for(m in h){var m=!1;break t}m=!0}m||(h=Tp(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):_t(a,l,h))}function It(a){Kt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(It,Kt);var l0=/^https?$/i,u0=["POST","PUT"];n=It.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,l,h,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);l=l?l.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Cl.g(),this.v=this.o?Jm(this.o):Jm(Cl),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(l,String(a),!0),this.B=!1}catch(S){Cp(this,S);return}if(a=h||"",h=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var T in m)h.set(T,m[T]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let S of m.keys())h.set(S,m.get(S));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(h.keys()).find(S=>S.toLowerCase()=="content-type"),T=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(u0,l,void 0))||m||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,O]of h)this.g.setRequestHeader(S,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Dp(this),this.u=!0,this.g.send(a),this.u=!1}catch(S){Cp(this,S)}};function Cp(a,l){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=l,a.m=5,Ap(a),Ho(a)}function Ap(a){a.A||(a.A=!0,ee(a,"complete"),ee(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ee(this,"complete"),ee(this,"abort"),Ho(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ho(this,!0)),It.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Sp(this):this.bb())},n.bb=function(){Sp(this)};function Sp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Xe(a)!=4||a.Z()!=2)){if(a.u&&Xe(a)==4)Ym(a.Ea,0,a);else if(ee(a,"readystatechange"),Xe(a)==4){a.h=!1;try{let O=a.Z();t:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break t;default:l=!1}var h;if(!(h=l)){var m;if(m=O===0){var T=String(a.D).match(_p)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),m=!l0.test(T?T.toLowerCase():"")}h=m}if(h)ee(a,"complete"),ee(a,"success");else{a.m=6;try{var S=2<Xe(a)?a.g.statusText:""}catch{S=""}a.l=S+" ["+a.Z()+"]",Ap(a)}}finally{Ho(a)}}}}function Ho(a,l){if(a.g){Dp(a);let h=a.g,m=a.v[0]?()=>{}:null;a.g=null,a.v=null,l||ee(a,"ready");try{h.onreadystatechange=m}catch{}}}function Dp(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Xe(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Xe(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var l=this.g.responseText;return a&&l.indexOf(a)==0&&(l=l.substring(a.length)),zw(l)}};function Rp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function d0(a){let l={};a=(a.g&&2<=Xe(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(Z(a[m]))continue;var h=E(a[m]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let S=l[T]||[];l[T]=S,S.push(h)}I(l,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function rs(a,l,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||l}function xp(a){this.Aa=0,this.i=[],this.j=new Qr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rs("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rs("baseRetryDelayMs",5e3,a),this.cb=rs("retryDelaySeedMs",1e4,a),this.Wa=rs("forwardChannelMaxRetries",2,a),this.wa=rs("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new dp(a&&a.concurrentRequestLimit),this.Da=new a0,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=xp.prototype,n.la=8,n.G=1,n.connect=function(a,l,h,m){ne(0),this.W=a,this.H=l||{},h&&m!==void 0&&(this.H.OSID=h,this.H.OAID=m),this.F=this.X,this.I=Up(this,null,this.W),Wo(this)};function Ml(a){if(kp(a),a.G==3){var l=a.U++,h=Qe(a.I);if(_t(h,"SID",a.K),_t(h,"RID",l),_t(h,"TYPE","terminate"),ss(a,h),l=new yn(a,a.j,l),l.L=2,l.v=$o(Qe(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(l.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=l.v,h=!0),h||(l.g=jp(l.j,null),l.g.ea(l.v)),l.F=Date.now(),jo(l)}Lp(a)}function Go(a){a.g&&(Nl(a),a.g.cancel(),a.g=null)}function kp(a){Go(a),a.u&&(c.clearTimeout(a.u),a.u=null),Ko(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Wo(a){if(!hp(a.h)&&!a.s){a.s=!0;var l=a.Ga;zr||$m(),$r||(zr(),$r=!0),hl.add(l,a),a.B=0}}function h0(a,l){return fp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=l.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Yr(b(a.Ga,a,l),Vp(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let T=new yn(this,this.j,a),S=this.o;if(this.S&&(S?(S=g(S),w(S,this.S)):S=this.S),this.m!==null||this.O||(T.H=S,S=null),this.P)t:{for(var l=0,h=0;h<this.i.length;h++){e:{var m=this.i[h];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break e}m=void 0}if(m===void 0)break;if(l+=m,4096<l){l=h;break t}if(l===4096||h===this.i.length-1){l=h+1;break t}}l=1e3}else l=1e3;l=Mp(this,T,l),h=Qe(this.I),_t(h,"RID",a),_t(h,"CVER",22),this.D&&_t(h,"X-HTTP-Session-Id",this.D),ss(this,h),S&&(this.O?l="headers="+encodeURIComponent(String(Tp(S)))+"&"+l:this.m&&Pl(h,this.m,S)),kl(this.h,T),this.Ua&&_t(h,"TYPE","init"),this.P?(_t(h,"$req",l),_t(h,"SID","null"),T.T=!0,Sl(T,h,null)):Sl(T,h,l),this.G=2}}else this.G==3&&(a?Pp(this,a):this.i.length==0||hp(this.h)||Pp(this))};function Pp(a,l){var h;l?h=l.l:h=a.U++;let m=Qe(a.I);_t(m,"SID",a.K),_t(m,"RID",h),_t(m,"AID",a.T),ss(a,m),a.m&&a.o&&Pl(m,a.m,a.o),h=new yn(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),l&&(a.i=l.D.concat(a.i)),l=Mp(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),kl(a.h,h),Sl(h,m,l)}function ss(a,l){a.H&&ht(a.H,function(h,m){_t(l,m,h)}),a.l&&gp({},function(h,m){_t(l,m,h)})}function Mp(a,l,h){h=Math.min(a.i.length,h);var m=a.l?b(a.l.Na,a.l,a):null;t:{var T=a.i;let S=-1;for(;;){let O=["count="+h];S==-1?0<h?(S=T[0].g,O.push("ofs="+S)):S=0:O.push("ofs="+S);let ft=!0;for(let zt=0;zt<h;zt++){let ot=T[zt].g,Yt=T[zt].map;if(ot-=S,0>ot)S=Math.max(0,T[zt].g-100),ft=!1;else try{c0(Yt,O,"req"+ot+"_")}catch{m&&m(Yt)}}if(ft){m=O.join("&");break t}}}return a=a.i.splice(0,h),l.D=a,m}function Op(a){if(!a.g&&!a.u){a.Y=1;var l=a.Fa;zr||$m(),$r||(zr(),$r=!0),hl.add(l,a),a.v=0}}function Ol(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Yr(b(a.Fa,a),Vp(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,Np(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Yr(b(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ne(10),Go(this),Np(this))};function Nl(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Np(a){a.g=new yn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var l=Qe(a.qa);_t(l,"RID","rpc"),_t(l,"SID",a.K),_t(l,"AID",a.T),_t(l,"CI",a.F?"0":"1"),!a.F&&a.ja&&_t(l,"TO",a.ja),_t(l,"TYPE","xmlhttp"),ss(a,l),a.m&&a.o&&Pl(l,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=$o(Qe(l)),h.m=null,h.P=!0,cp(h,a)}n.Za=function(){this.C!=null&&(this.C=null,Go(this),Ol(this),ne(19))};function Ko(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Fp(a,l){var h=null;if(a.g==l){Ko(a),Nl(a),a.g=null;var m=2}else if(xl(a.h,l))h=l.D,mp(a.h,l),m=1;else return;if(a.G!=0){if(l.o)if(m==1){h=l.m?l.m.length:0,l=Date.now()-l.F;var T=a.B;m=Vo(),ee(m,new rp(m,h)),Wo(a)}else Op(a);else if(T=l.s,T==3||T==0&&0<l.X||!(m==1&&h0(a,l)||m==2&&Ol(a)))switch(h&&0<h.length&&(l=a.h,l.i=l.i.concat(h)),T){case 1:Kn(a,5);break;case 4:Kn(a,10);break;case 3:Kn(a,6);break;default:Kn(a,2)}}}function Vp(a,l){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*l}function Kn(a,l){if(a.j.info("Error code "+l),l==2){var h=b(a.fb,a),m=a.Xa;let T=!m;m=new Wn(m||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Bo(m,"https"),$o(m),T?s0(m.toString(),h):o0(m.toString(),h)}else ne(2);a.G=0,a.l&&a.l.sa(l),Lp(a),kp(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ne(2)):(this.j.info("Failed to ping google.com"),ne(1))};function Lp(a){if(a.G=0,a.ka=[],a.l){let l=pp(a.h);(l.length!=0||a.i.length!=0)&&(k(a.ka,l),k(a.ka,a.i),a.h.i.length=0,M(a.i),a.i.length=0),a.l.ra()}}function Up(a,l,h){var m=h instanceof Wn?Qe(h):new Wn(h);if(m.g!="")l&&(m.g=l+"."+m.g),zo(m,m.s);else{var T=c.location;m=T.protocol,l=l?l+"."+T.hostname:T.hostname,T=+T.port;var S=new Wn(null);m&&Bo(S,m),l&&(S.g=l),T&&zo(S,T),h&&(S.l=h),m=S}return h=a.D,l=a.ya,h&&l&&_t(m,h,l),_t(m,"VER",a.la),ss(a,m),m}function jp(a,l,h){if(l&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=a.Ca&&!a.pa?new It(new es({eb:h})):new It(a.pa),l.Ha(a.J),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bp(){}n=Bp.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Yo(){}Yo.prototype.g=function(a,l){return new de(a,l)};function de(a,l){Kt.call(this),this.g=new xp(l),this.l=a,this.h=l&&l.messageUrlParams||null,a=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(a?a["X-WebChannel-Content-Type"]=l.messageContentType:a={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(a?a["X-WebChannel-Client-Profile"]=l.va:a={"X-WebChannel-Client-Profile":l.va}),this.g.S=a,(a=l&&l.Sb)&&!Z(a)&&(this.g.m=a),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!Z(l)&&(this.g.D=l,a=this.h,a!==null&&l in a&&(a=this.h,l in a&&delete a[l])),this.j=new Fi(this)}R(de,Kt),de.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},de.prototype.close=function(){Ml(this.g)},de.prototype.o=function(a){var l=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=wl(a),a=h);l.i.push(new Yw(l.Ya++,a)),l.G==3&&Wo(l)},de.prototype.N=function(){this.g.l=null,delete this.j,Ml(this.g),delete this.g,de.aa.N.call(this)};function zp(a){El.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var l=a.__sm__;if(l){t:{for(let h in l){a=h;break t}a=void 0}(this.i=a)&&(a=this.i,l=l!==null&&a in l?l[a]:void 0),this.data=l}else this.data=a}R(zp,El);function $p(){Tl.call(this),this.status=1}R($p,Tl);function Fi(a){this.g=a}R(Fi,Bp),Fi.prototype.ua=function(){ee(this.g,"a")},Fi.prototype.ta=function(a){ee(this.g,new zp(a))},Fi.prototype.sa=function(a){ee(this.g,new $p)},Fi.prototype.ra=function(){ee(this.g,"b")},Yo.prototype.createWebChannel=Yo.prototype.g,de.prototype.send=de.prototype.o,de.prototype.open=de.prototype.m,de.prototype.close=de.prototype.close,mh=hn.createWebChannelTransport=function(){return new Yo},fh=hn.getStatEventTarget=function(){return Vo()},hh=hn.Event=Hn,uc=hn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Lo.NO_ERROR=0,Lo.TIMEOUT=8,Lo.HTTP_ERROR=6,ro=hn.ErrorCode=Lo,sp.COMPLETE="complete",dh=hn.EventType=sp,tp.EventType=Wr,Wr.OPEN="a",Wr.CLOSE="b",Wr.ERROR="c",Wr.MESSAGE="d",Kt.prototype.listen=Kt.prototype.K,lr=hn.WebChannel=tp,uh=hn.FetchXmlHttpFactory=es,It.prototype.listenOnce=It.prototype.L,It.prototype.getLastError=It.prototype.Ka,It.prototype.getLastErrorCode=It.prototype.Ba,It.prototype.getStatus=It.prototype.Z,It.prototype.getResponseJson=It.prototype.Oa,It.prototype.getResponseText=It.prototype.oa,It.prototype.send=It.prototype.ea,It.prototype.setWithCredentials=It.prototype.Ha,lh=hn.XhrIo=It}).apply(typeof lc<"u"?lc:typeof self<"u"?self:typeof window<"u"?window:{});var Gv="@firebase/firestore";var Bt=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");var xr="10.12.0";var wi=new kn("@firebase/firestore");function so(){return wi.logLevel}function V(n,...t){if(wi.logLevel<=et.DEBUG){let e=t.map(Xf);wi.debug(`Firestore (${xr}): ${n}`,...e)}}function mn(n,...t){if(wi.logLevel<=et.ERROR){let e=t.map(Xf);wi.error(`Firestore (${xr}): ${n}`,...e)}}function gr(n,...t){if(wi.logLevel<=et.WARN){let e=t.map(Xf);wi.warn(`Firestore (${xr}): ${n}`,...e)}}function Xf(n){if(typeof n=="string")return n;try{return function(e){return JSON.stringify(e)}(n)}catch{return n}}function $(n="Unexpected state"){let t=`FIRESTORE (${xr}) INTERNAL ASSERTION FAILED: `+n;throw mn(t),new Error(t)}function pt(n,t){n||$()}function K(n,t){return n}var D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends ve{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var fn=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};var pc=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},bh=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Bt.UNAUTHENTICATED))}shutdown(){}},yh=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}},wh=class{constructor(t){this.t=t,this.currentUser=Bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let i=this.i,r=u=>this.i!==i?(i=this.i,e(u)):Promise.resolve(),s=new fn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new fn,t.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let u=s;t.enqueueRetryable(()=>y(this,null,function*(){yield u.promise,yield r(this.currentUser)}))},c=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new fn)}},0),o()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(pt(typeof i.accessToken=="string"),new pc(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return pt(t===null||typeof t=="string"),new Bt(t)}},Ih=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=Bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Eh=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new Ih(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(Bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Th=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ch=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){let i=s=>{s.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,V("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};let r=s=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(pt(typeof e.token=="string"),this.R=e.token,new Th(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function eD(n){let t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}var gc=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,i="";for(;i.length<20;){let r=eD(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}};function ct(n,t){return n<t?-1:n>t?1:0}function _r(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}var Ht=class n{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new L(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new L(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new L(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new L(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return n.fromMillis(Date.now())}static fromDate(t){return n.fromMillis(t.getTime())}static fromMillis(t){let e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new n(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?ct(this.nanoseconds,t.nanoseconds):ct(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Y=class n{constructor(t){this.timestamp=t}static fromTimestamp(t){return new n(t)}static min(){return new n(new Ht(0,0))}static max(){return new n(new Ht(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var _c=class n{constructor(t,e,i){e===void 0?e=0:e>t.length&&$(),i===void 0?i=t.length-e:i>t.length-e&&$(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return n.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof n?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let i=Math.min(t.length,e.length);for(let r=0;r<i;r++){let s=t.get(r),o=e.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}},Ct=class n extends _c{construct(t,e,i){return new n(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let i of t){if(i.indexOf("//")>=0)throw new L(D.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new n(e)}static emptyPath(){return new n([])}},nD=/^[_a-zA-Z][_a-zA-Z0-9]*$/,be=class n extends _c{construct(t,e,i){return new n(t,e,i)}static isValidIdentifier(t){return nD.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(t){let e=[],i="",r=0,s=()=>{if(i.length===0)throw new L(D.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""},o=!1;for(;r<t.length;){let c=t[r];if(c==="\\"){if(r+1===t.length)throw new L(D.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let u=t[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,r+=2}else c==="`"?(o=!o,r++):c!=="."||o?(i+=c,r++):(s(),r++)}if(s(),o)throw new L(D.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)}static emptyPath(){return new n([])}};var B=class n{constructor(t){this.path=t}static fromPath(t){return new n(Ct.fromString(t))}static fromName(t){return new n(Ct.fromString(t).popFirst(5))}static empty(){return new n(Ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ct.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Ct.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new n(new Ct(t.slice()))}};var Ah=class{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}};Ah.UNKNOWN_ID=-1;function iD(n,t){let e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Y.fromTimestamp(i===1e9?new Ht(e+1,0):new Ht(e,i));return new Ii(r,B.empty(),t)}function rD(n){return new Ii(n.readTime,n.key,-1)}var Ii=class n{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new n(Y.min(),B.empty(),-1)}static max(){return new n(Y.max(),B.empty(),-1)}};function sD(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=B.comparator(n.documentKey,t.documentKey),e!==0?e:ct(n.largestBatchId,t.largestBatchId))}var oD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Sh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function Eo(n){return y(this,null,function*(){if(n.code!==D.FAILED_PRECONDITION||n.message!==oD)throw n;V("LocalStore","Unexpectedly lost primary lease")})}var P=class n{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&$(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{let e=t();return e instanceof n?e:n.resolve(e)}catch(e){return n.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):n.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):n.reject(e)}static resolve(t){return new n((e,i)=>{e(t)})}static reject(t){return new n((e,i)=>{i(t)})}static waitFor(t){return new n((e,i)=>{let r=0,s=0,o=!1;t.forEach(c=>{++r,c.next(()=>{++s,o&&s===r&&e()},u=>i(u))}),o=!0,s===r&&e()})}static or(t){let e=n.resolve(!1);for(let i of t)e=e.next(r=>r?n.resolve(r):i());return e}static forEach(t,e){let i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new n((i,r)=>{let s=t.length,o=new Array(s),c=0;for(let u=0;u<s;u++){let d=u;e(t[d]).next(f=>{o[d]=f,++c,c===s&&i(o)},f=>r(f))}})}static doWhile(t,e){return new n((i,r)=>{let s=()=>{t()===!0?e().next(()=>{s()},r):i()};s()})}};function aD(n){let t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function To(n){return n.name==="IndexedDbTransactionError"}var Ib=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.se&&this.se(e),e}}return n.oe=-1,n})();function Gc(n){return n==null}function fo(n){return n===0&&1/n==-1/0}function cD(n){return typeof n=="number"&&Number.isInteger(n)&&!fo(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var lD=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],AO=[...lD,"documentOverlays"],uD=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],dD=uD,SO=[...dD,"indexConfiguration","indexState","indexEntries"];function Wv(n){let t=0;for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function kr(n,t){for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Eb(n){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}var At=class n{constructor(t,e){this.comparator=t,this.root=e||qe.EMPTY}insert(t,e){return new n(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,qe.BLACK,null,null))}remove(t){return new n(this.comparator,this.root.remove(t,this.comparator).copy(null,null,qe.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){let t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new fr(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new fr(this.root,t,this.comparator,!1)}getReverseIterator(){return new fr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new fr(this.root,t,this.comparator,!0)}},fr=class{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},qe=class n{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new n(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this,s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):s===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $();let t=this.left.check();if(t!==this.right.check())throw $();return t+(this.isRed()?0:1)}};qe.EMPTY=null,qe.RED=!0,qe.BLACK=!1;qe.EMPTY=new class{constructor(){this.size=0}get key(){throw $()}get value(){throw $()}get color(){throw $()}get left(){throw $()}get right(){throw $()}copy(t,e,i,r,s){return this}insert(t,e,i){return new qe(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Jt=class n{constructor(t){this.comparator=t,this.data=new At(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){let i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new vc(this.data.getIterator())}getIteratorFrom(t){return new vc(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){let r=e.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new n(this.comparator);return e.data=t,e}},vc=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var $e=class n{constructor(t){this.fields=t,t.sort(be.comparator)}static empty(){return new n([])}unionWith(t){let e=new Jt(be.comparator);for(let i of this.fields)e=e.add(i);for(let i of t)e=e.add(i);return new n(e.toArray())}covers(t){for(let e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return _r(this.fields,t.fields,(e,i)=>e.isEqual(i))}};var bc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var se=class n{constructor(t){this.binaryString=t}static fromBase64String(t){let e=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new bc("Invalid base64 string: "+s):s}}(t);return new n(e)}static fromUint8Array(t){let e=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new n(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ct(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};se.EMPTY_BYTE_STRING=new se("");var hD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pn(n){if(pt(!!n),typeof n=="string"){let t=0,e=hD.exec(n);if(pt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Tt(n.seconds),nanos:Tt(n.nanos)}}function Tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function jn(n){return typeof n=="string"?se.fromBase64String(n):se.fromUint8Array(n)}function Zf(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function Jf(n){let t=n.mapValue.fields.__previous_value__;return Zf(t)?Jf(t):t}function mo(n){let t=pn(n.mapValue.fields.__local_write_time__.timestampValue);return new Ht(t.seconds,t.nanos)}var Dh=class{constructor(t,e,i,r,s,o,c,u,d){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}},yc=class n{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof n&&t.projectId===this.projectId&&t.database===this.database}};var dc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ei(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Zf(n)?4:Tb(n)?9007199254740991:10:$()}function We(n,t){if(n===t)return!0;let e=Ei(n);if(e!==Ei(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return mo(n).isEqual(mo(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=pn(r.timestampValue),c=pn(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,s){return jn(r.bytesValue).isEqual(jn(s.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,s){return Tt(r.geoPointValue.latitude)===Tt(s.geoPointValue.latitude)&&Tt(r.geoPointValue.longitude)===Tt(s.geoPointValue.longitude)}(n,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Tt(r.integerValue)===Tt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=Tt(r.doubleValue),c=Tt(s.doubleValue);return o===c?fo(o)===fo(c):isNaN(o)&&isNaN(c)}return!1}(n,t);case 9:return _r(n.arrayValue.values||[],t.arrayValue.values||[],We);case 10:return function(r,s){let o=r.mapValue.fields||{},c=s.mapValue.fields||{};if(Wv(o)!==Wv(c))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!We(o[u],c[u])))return!1;return!0}(n,t);default:return $()}}function po(n,t){return(n.values||[]).find(e=>We(e,t))!==void 0}function vr(n,t){if(n===t)return 0;let e=Ei(n),i=Ei(t);if(e!==i)return ct(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return ct(n.booleanValue,t.booleanValue);case 2:return function(s,o){let c=Tt(s.integerValue||s.doubleValue),u=Tt(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(n,t);case 3:return Kv(n.timestampValue,t.timestampValue);case 4:return Kv(mo(n),mo(t));case 5:return ct(n.stringValue,t.stringValue);case 6:return function(s,o){let c=jn(s),u=jn(o);return c.compareTo(u)}(n.bytesValue,t.bytesValue);case 7:return function(s,o){let c=s.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){let f=ct(c[d],u[d]);if(f!==0)return f}return ct(c.length,u.length)}(n.referenceValue,t.referenceValue);case 8:return function(s,o){let c=ct(Tt(s.latitude),Tt(o.latitude));return c!==0?c:ct(Tt(s.longitude),Tt(o.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(s,o){let c=s.values||[],u=o.values||[];for(let d=0;d<c.length&&d<u.length;++d){let f=vr(c[d],u[d]);if(f)return f}return ct(c.length,u.length)}(n.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===dc.mapValue&&o===dc.mapValue)return 0;if(s===dc.mapValue)return 1;if(o===dc.mapValue)return-1;let c=s.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let b=ct(u[p],f[p]);if(b!==0)return b;let A=vr(c[u[p]],d[f[p]]);if(A!==0)return A}return ct(u.length,f.length)}(n.mapValue,t.mapValue);default:throw $()}}function Kv(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return ct(n,t);let e=pn(n),i=pn(t),r=ct(e.seconds,i.seconds);return r!==0?r:ct(e.nanos,i.nanos)}function br(n){return Rh(n)}function Rh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){let i=pn(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return jn(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return B.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(let s of e.values||[])r?r=!1:i+=",",i+=Rh(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){let i=Object.keys(e.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${Rh(e.fields[o])}`;return r+"}"}(n.mapValue):$()}function xh(n){return!!n&&"integerValue"in n}function tm(n){return!!n&&"arrayValue"in n}function Yv(n){return!!n&&"nullValue"in n}function Qv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function fc(n){return!!n&&"mapValue"in n}function ao(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let t={mapValue:{fields:{}}};return kr(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=ao(i)),t}if(n.arrayValue){let t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=ao(n.arrayValue.values[e]);return t}return Object.assign({},n)}function Tb(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Pe=class n{constructor(t){this.value=t}static empty(){return new n({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!fc(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ao(e)}setAll(t){let e=be.emptyPath(),i={},r=[];t.forEach((o,c)=>{if(!e.isImmediateParentOf(c)){let u=this.getFieldsMap(e);this.applyChanges(u,i,r),i={},r=[],e=c.popLast()}o?i[c.lastSegment()]=ao(o):r.push(c.lastSegment())});let s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){let e=this.field(t.popLast());fc(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return We(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];fc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){kr(e,(r,s)=>t[r]=s);for(let r of i)delete t[r]}clone(){return new n(ao(this.value))}};function Cb(n){let t=[];return kr(n.fields,(e,i)=>{let r=new be([e]);if(fc(i)){let s=Cb(i.mapValue).fields;if(s.length===0)t.push(r);else for(let o of s)t.push(r.child(o))}else t.push(r)}),new $e(t)}var Me=class n{constructor(t,e,i,r,s,o,c){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(t){return new n(t,0,Y.min(),Y.min(),Y.min(),Pe.empty(),0)}static newFoundDocument(t,e,i,r){return new n(t,1,e,Y.min(),i,r,0)}static newNoDocument(t,e){return new n(t,2,e,Y.min(),Y.min(),Pe.empty(),0)}static newUnknownDocument(t,e){return new n(t,3,e,Y.min(),Y.min(),Pe.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Pe.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Pe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var yr=class{constructor(t,e){this.position=t,this.inclusive=e}};function Xv(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){let s=t[r],o=n.position[r];if(s.field.isKeyField()?i=B.comparator(B.fromName(o.referenceValue),e.key):i=vr(o,e.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Zv(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!We(n.position[e],t.position[e]))return!1;return!0}var wr=class{constructor(t,e="asc"){this.field=t,this.dir=e}};function fD(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}var wc=class{},Ut=class n extends wc{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new Ph(t,e,i):e==="array-contains"?new Nh(t,i):e==="in"?new Fh(t,i):e==="not-in"?new Vh(t,i):e==="array-contains-any"?new Lh(t,i):new n(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new Mh(t,i):new Oh(t,i)}matches(t){let e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(vr(e,this.value)):e!==null&&Ei(this.value)===Ei(e)&&this.matchesComparison(vr(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return $()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ke=class n extends wc{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new n(t,e)}matches(t){return Ab(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Ab(n){return n.op==="and"}function Sb(n){return mD(n)&&Ab(n)}function mD(n){for(let t of n.filters)if(t instanceof Ke)return!1;return!0}function kh(n){if(n instanceof Ut)return n.field.canonicalString()+n.op.toString()+br(n.value);if(Sb(n))return n.filters.map(t=>kh(t)).join(",");{let t=n.filters.map(e=>kh(e)).join(",");return`${n.op}(${t})`}}function Db(n,t){return n instanceof Ut?function(i,r){return r instanceof Ut&&i.op===r.op&&i.field.isEqual(r.field)&&We(i.value,r.value)}(n,t):n instanceof Ke?function(i,r){return r instanceof Ke&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,c)=>s&&Db(o,r.filters[c]),!0):!1}(n,t):void $()}function Rb(n){return n instanceof Ut?function(e){return`${e.field.canonicalString()} ${e.op} ${br(e.value)}`}(n):n instanceof Ke?function(e){return e.op.toString()+" {"+e.getFilters().map(Rb).join(" ,")+"}"}(n):"Filter"}var Ph=class extends Ut{constructor(t,e,i){super(t,e,i),this.key=B.fromName(i.referenceValue)}matches(t){let e=B.comparator(t.key,this.key);return this.matchesComparison(e)}},Mh=class extends Ut{constructor(t,e){super(t,"in",e),this.keys=xb("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}},Oh=class extends Ut{constructor(t,e){super(t,"not-in",e),this.keys=xb("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}};function xb(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>B.fromName(i.referenceValue))}var Nh=class extends Ut{constructor(t,e){super(t,"array-contains",e)}matches(t){let e=t.data.field(this.field);return tm(e)&&po(e.arrayValue,this.value)}},Fh=class extends Ut{constructor(t,e){super(t,"in",e)}matches(t){let e=t.data.field(this.field);return e!==null&&po(this.value.arrayValue,e)}},Vh=class extends Ut{constructor(t,e){super(t,"not-in",e)}matches(t){if(po(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let e=t.data.field(this.field);return e!==null&&!po(this.value.arrayValue,e)}},Lh=class extends Ut{constructor(t,e){super(t,"array-contains-any",e)}matches(t){let e=t.data.field(this.field);return!(!tm(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>po(this.value.arrayValue,i))}};var Uh=class{constructor(t,e=null,i=[],r=[],s=null,o=null,c=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function Jv(n,t=null,e=[],i=[],r=null,s=null,o=null){return new Uh(n,t,e,i,r,s,o)}function em(n){let t=K(n);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>kh(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Gc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>br(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>br(i)).join(",")),t.ue=e}return t.ue}function nm(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!fD(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!Db(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Zv(n.startAt,t.startAt)&&Zv(n.endAt,t.endAt)}function jh(n){return B.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ir=class{constructor(t,e=null,i=[],r=[],s=null,o="F",c=null,u=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function pD(n,t,e,i,r,s,o,c){return new Ir(n,t,e,i,r,s,o,c)}function im(n){return new Ir(n)}function tb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function gD(n){return n.collectionGroup!==null}function co(n){let t=K(n);if(t.ce===null){t.ce=[];let e=new Set;for(let s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());let i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Jt(be.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.ce.push(new wr(s,i))}),e.has(be.keyField().canonicalString())||t.ce.push(new wr(be.keyField(),i))}return t.ce}function He(n){let t=K(n);return t.le||(t.le=_D(t,co(n))),t.le}function _D(n,t){if(n.limitType==="F")return Jv(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new wr(r.field,s)});let e=n.endAt?new yr(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new yr(n.startAt.position,n.startAt.inclusive):null;return Jv(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function Bh(n,t,e){return new Ir(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Wc(n,t){return nm(He(n),He(t))&&n.limitType===t.limitType}function kb(n){return`${em(He(n))}|lt:${n.limitType}`}function ur(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>Rb(r)).join(", ")}]`),Gc(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>br(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>br(r)).join(",")),`Target(${i})`}(He(n))}; limitType=${n.limitType})`}function Kc(n,t){return t.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):B.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,t)&&function(i,r){for(let s of co(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,t)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(n,t)&&function(i,r){return!(i.startAt&&!function(o,c,u){let d=Xv(o,c,u);return o.inclusive?d<=0:d<0}(i.startAt,co(i),r)||i.endAt&&!function(o,c,u){let d=Xv(o,c,u);return o.inclusive?d>=0:d>0}(i.endAt,co(i),r))}(n,t)}function vD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Pb(n){return(t,e)=>{let i=!1;for(let r of co(n)){let s=bD(r,t,e);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function bD(n,t,e){let i=n.field.isKeyField()?B.comparator(t.key,e.key):function(s,o,c){let u=o.data.field(s),d=c.data.field(s);return u!==null&&d!==null?vr(u,d):$()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return $()}}var Bn=class{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){let i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){kr(this.inner,(e,i)=>{for(let[r,s]of i)t(r,s)})}isEmpty(){return Eb(this.inner)}size(){return this.innerSize}};var yD=new At(B.comparator);function gn(){return yD}var Mb=new At(B.comparator);function oo(...n){let t=Mb;for(let e of n)t=t.insert(e.key,e);return t}function Ob(n){let t=Mb;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function _i(){return lo()}function Nb(){return lo()}function lo(){return new Bn(n=>n.toString(),(n,t)=>n.isEqual(t))}var wD=new At(B.comparator),ID=new Jt(B.comparator);function nt(...n){let t=ID;for(let e of n)t=t.add(e);return t}var ED=new Jt(ct);function TD(){return ED}function Fb(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fo(t)?"-0":t}}function Vb(n){return{integerValue:""+n}}function CD(n,t){return cD(t)?Vb(t):Fb(n,t)}var Er=class{constructor(){this._=void 0}};function AD(n,t,e){return n instanceof Tr?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Zf(s)&&(s=Jf(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(e,t):n instanceof Ti?Ub(n,t):n instanceof Ci?jb(n,t):function(r,s){let o=Lb(r,s),c=eb(o)+eb(r.Pe);return xh(o)&&xh(r.Pe)?Vb(c):Fb(r.serializer,c)}(n,t)}function SD(n,t,e){return n instanceof Ti?Ub(n,t):n instanceof Ci?jb(n,t):e}function Lb(n,t){return n instanceof Cr?function(i){return xh(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}var Tr=class extends Er{},Ti=class extends Er{constructor(t){super(),this.elements=t}};function Ub(n,t){let e=Bb(t);for(let i of n.elements)e.some(r=>We(r,i))||e.push(i);return{arrayValue:{values:e}}}var Ci=class extends Er{constructor(t){super(),this.elements=t}};function jb(n,t){let e=Bb(t);for(let i of n.elements)e=e.filter(r=>!We(r,i));return{arrayValue:{values:e}}}var Cr=class extends Er{constructor(t,e){super(),this.serializer=t,this.Pe=e}};function eb(n){return Tt(n.integerValue||n.doubleValue)}function Bb(n){return tm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function DD(n,t){return n.field.isEqual(t.field)&&function(i,r){return i instanceof Ti&&r instanceof Ti||i instanceof Ci&&r instanceof Ci?_r(i.elements,r.elements,We):i instanceof Cr&&r instanceof Cr?We(i.Pe,r.Pe):i instanceof Tr&&r instanceof Tr}(n.transform,t.transform)}var zh=class{constructor(t,e){this.version=t,this.transformResults=e}},yi=class n{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new n}static exists(t){return new n(void 0,t)}static updateTime(t){return new n(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function mc(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}var Ar=class{};function zb(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Ic(n.key,yi.none()):new Ai(n.key,n.data,yi.none());{let e=n.data,i=Pe.empty(),r=new Jt(be.comparator);for(let s of t.fields)if(!r.has(s)){let o=e.field(s);o===null&&s.length>1&&(s=s.popLast(),o=e.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new _n(n.key,i,new $e(r.toArray()),yi.none())}}function RD(n,t,e){n instanceof Ai?function(r,s,o){let c=r.value.clone(),u=ib(r.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,t,e):n instanceof _n?function(r,s,o){if(!mc(r.precondition,s))return void s.convertToUnknownDocument(o.version);let c=ib(r.fieldTransforms,s,o.transformResults),u=s.data;u.setAll($b(r)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,t,e):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,e)}function uo(n,t,e,i){return n instanceof Ai?function(s,o,c,u){if(!mc(s.precondition,o))return c;let d=s.value.clone(),f=rb(s.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,t,e,i):n instanceof _n?function(s,o,c,u){if(!mc(s.precondition,o))return c;let d=rb(s.fieldTransforms,u,o),f=o.data;return f.setAll($b(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,t,e,i):function(s,o,c){return mc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,t,e)}function xD(n,t){let e=null;for(let i of n.fieldTransforms){let r=t.data.field(i.field),s=Lb(i.transform,r||null);s!=null&&(e===null&&(e=Pe.empty()),e.set(i.field,s))}return e||null}function nb(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&_r(i,r,(s,o)=>DD(s,o))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}var Ai=class extends Ar{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},_n=class extends Ar{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function $b(n){let t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){let i=n.data.field(e);t.set(e,i)}}),t}function ib(n,t,e){let i=new Map;pt(n.length===e.length);for(let r=0;r<e.length;r++){let s=n[r],o=s.transform,c=t.data.field(s.field);i.set(s.field,SD(o,c,e[r]))}return i}function rb(n,t,e){let i=new Map;for(let r of n){let s=r.transform,o=e.data.field(r.field);i.set(r.field,AD(s,o,t))}return i}var Ic=class extends Ar{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},$h=class extends Ar{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var qh=class{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){let i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(t.key)&&RD(s,t,i[r])}}applyToLocalView(t,e){for(let i of this.baseMutations)i.key.isEqual(t.key)&&(e=uo(i,t,e,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(t.key)&&(e=uo(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){let i=Nb();return this.mutations.forEach(r=>{let s=t.get(r.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=e.has(r.key)?null:c;let u=zb(o,c);u!==null&&i.set(r.key,u),o.isValidDocument()||o.convertToNoDocument(Y.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),nt())}isEqual(t){return this.batchId===t.batchId&&_r(this.mutations,t.mutations,(e,i)=>nb(e,i))&&_r(this.baseMutations,t.baseMutations,(e,i)=>nb(e,i))}},Hh=class n{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){pt(t.mutations.length===i.length);let r=function(){return wD}(),s=t.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new n(t,e,i,r)}};var Gh=class{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Wh=class{constructor(t,e){this.count=t,this.unchangedNames=e}};var Pt,st;function kD(n){switch(n){default:return $();case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0}}function qb(n){if(n===void 0)return mn("GRPC error has no .code"),D.UNKNOWN;switch(n){case Pt.OK:return D.OK;case Pt.CANCELLED:return D.CANCELLED;case Pt.UNKNOWN:return D.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return D.INTERNAL;case Pt.UNAVAILABLE:return D.UNAVAILABLE;case Pt.UNAUTHENTICATED:return D.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case Pt.NOT_FOUND:return D.NOT_FOUND;case Pt.ALREADY_EXISTS:return D.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return D.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case Pt.ABORTED:return D.ABORTED;case Pt.OUT_OF_RANGE:return D.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return D.UNIMPLEMENTED;case Pt.DATA_LOSS:return D.DATA_LOSS;default:return $()}}(st=Pt||(Pt={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";var sb=null;function PD(){return new TextEncoder}var MD=new Ln([4294967295,4294967295],0);function ob(n){let t=PD().encode(n),e=new ch;return e.update(t),new Uint8Array(e.digest())}function ab(n){let t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ln([e,i],0),new Ln([r,s],0)]}var Kh=class n{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new vi(`Invalid padding: ${e}`);if(i<0)throw new vi(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new vi(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new vi(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=Ln.fromNumber(this.Ie)}Ee(t,e,i){let r=t.add(e.multiply(Ln.fromNumber(i)));return r.compare(MD)===1&&(r=new Ln([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;let e=ob(t),[i,r]=ab(e);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(t,e,i){let r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new n(s,r,e);return i.forEach(c=>o.insert(c)),o}insert(t){if(this.Ie===0)return;let e=ob(t),[i,r]=ab(e);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);this.Ae(o)}}Ae(t){let e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}},vi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ec=class n{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){let r=new Map;return r.set(t,go.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new n(Y.min(),r,new At(ct),gn(),nt())}},go=class n{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new n(i,e,nt(),nt(),nt())}};var mr=class{constructor(t,e,i,r){this.Re=t,this.removedTargetIds=e,this.key=i,this.Ve=r}},Tc=class{constructor(t,e){this.targetId=t,this.me=e}},Cc=class{constructor(t,e,i=se.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}},Ac=class{constructor(){this.fe=0,this.ge=lb(),this.pe=se.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=nt(),e=nt(),i=nt();return this.ge.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:$()}}),new go(this.pe,this.ye,t,e,i)}ve(){this.we=!1,this.ge=lb()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,pt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Yh=class{constructor(t){this.Le=t,this.Be=new Map,this.ke=gn(),this.qe=cb(),this.Qe=new At(ct)}Ke(t){for(let e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(let e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{let i=this.Ge(e);switch(t.state){case 0:this.ze(e)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),i.De(t.resumeToken));break;default:$()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((i,r)=>{this.ze(r)&&e(r)})}He(t){let e=t.targetId,i=t.me.count,r=this.Je(e);if(r){let s=r.target;if(jh(s))if(i===0){let o=new B(s.path);this.Ue(e,o,Me.newNoDocument(o,Y.min()))}else pt(i===1);else{let o=this.Ye(e);if(o!==i){let c=this.Ze(t),u=c?this.Xe(c,t,o):1;if(u!==0){this.je(e);let d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,d)}sb?.et(function(f,p,b,A,R){var M,k,z,Z,rt,gt;let te={localCacheCount:f,existenceFilterCount:p.count,databaseId:b.database,projectId:b.projectId},ht=p.unchangedNames;return ht&&(te.bloomFilter={applied:R===0,hashCount:(M=ht?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(Z=(z=(k=ht?.bits)===null||k===void 0?void 0:k.bitmap)===null||z===void 0?void 0:z.length)!==null&&Z!==void 0?Z:0,padding:(gt=(rt=ht?.bits)===null||rt===void 0?void 0:rt.padding)!==null&&gt!==void 0?gt:0,mightContain:I=>{var g;return(g=A?.mightContain(I))!==null&&g!==void 0&&g}}),te}(o,t.me,this.Le.tt(),c,u))}}}}Ze(t){let e=t.me.unchangedNames;if(!e||!e.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=e,o,c;try{o=jn(i).toUint8Array()}catch(u){if(u instanceof bc)return gr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Kh(o,r,s)}catch(u){return gr(u instanceof vi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(t,e,i){return e.me.count===i-this.nt(t,e.targetId)?0:2}nt(t,e){let i=this.Le.getRemoteKeysForTarget(e),r=0;return i.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(c)||(this.Ue(e,s,null),r++)}),r}rt(t){let e=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&jh(c.target)){let u=new B(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Me.newNoDocument(u,t))}s.be&&(e.set(o,s.Ce()),s.ve())}});let i=nt();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{let d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));let r=new Ec(t,e,this.Qe,this.ke,i);return this.ke=gn(),this.qe=cb(),this.Qe=new At(ct),r}$e(t,e){if(!this.ze(t))return;let i=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,i),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,i){if(!this.ze(t))return;let r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),i&&(this.ke=this.ke.insert(e,i))}removeTarget(t){this.Be.delete(t)}Ye(t){let e=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new Ac,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new Jt(ct),this.qe=this.qe.insert(t,e)),e}ze(t){let e=this.Je(t)!==null;return e||V("WatchChangeAggregator","Detected inactive target",t),e}Je(t){let e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Ac),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}};function cb(){return new At(B.comparator)}function lb(){return new At(B.comparator)}var OD={asc:"ASCENDING",desc:"DESCENDING"},ND={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FD={and:"AND",or:"OR"},Qh=class{constructor(t,e){this.databaseId=t,this.useProto3Json=e}};function Xh(n,t){return n.useProto3Json||Gc(t)?t:{value:t}}function Sc(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Hb(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function VD(n,t){return Sc(n,t.toTimestamp())}function Ge(n){return pt(!!n),Y.fromTimestamp(function(e){let i=pn(e);return new Ht(i.seconds,i.nanos)}(n))}function rm(n,t){return Zh(n,t).canonicalString()}function Zh(n,t){let e=function(r){return new Ct(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function Gb(n){let t=Ct.fromString(n);return pt(Xb(t)),t}function Jh(n,t){return rm(n.databaseId,t.path)}function ph(n,t){let e=Gb(t);if(e.get(1)!==n.databaseId.projectId)throw new L(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new L(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new B(Kb(e))}function Wb(n,t){return rm(n.databaseId,t)}function LD(n){let t=Gb(n);return t.length===4?Ct.emptyPath():Kb(t)}function tf(n){return new Ct(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Kb(n){return pt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function ub(n,t,e){return{name:Jh(n,t),fields:e.value.mapValue.fields}}function UD(n,t){let e;if("targetChange"in t){t.targetChange;let i=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:$()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(pt(f===void 0||typeof f=="string"),se.fromBase64String(f||"")):(pt(f===void 0||f instanceof Buffer||f instanceof Uint8Array),se.fromUint8Array(f||new Uint8Array))}(n,t.targetChange.resumeToken),o=t.targetChange.cause,c=o&&function(d){let f=d.code===void 0?D.UNKNOWN:qb(d.code);return new L(f,d.message||"")}(o);e=new Cc(i,r,s,c||null)}else if("documentChange"in t){t.documentChange;let i=t.documentChange;i.document,i.document.name,i.document.updateTime;let r=ph(n,i.document.name),s=Ge(i.document.updateTime),o=i.document.createTime?Ge(i.document.createTime):Y.min(),c=new Pe({mapValue:{fields:i.document.fields}}),u=Me.newFoundDocument(r,s,o,c),d=i.targetIds||[],f=i.removedTargetIds||[];e=new mr(d,f,u.key,u)}else if("documentDelete"in t){t.documentDelete;let i=t.documentDelete;i.document;let r=ph(n,i.document),s=i.readTime?Ge(i.readTime):Y.min(),o=Me.newNoDocument(r,s),c=i.removedTargetIds||[];e=new mr([],c,o.key,o)}else if("documentRemove"in t){t.documentRemove;let i=t.documentRemove;i.document;let r=ph(n,i.document),s=i.removedTargetIds||[];e=new mr([],s,r,null)}else{if(!("filter"in t))return $();{t.filter;let i=t.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new Wh(r,s),c=i.targetId;e=new Tc(c,o)}}return e}function jD(n,t){let e;if(t instanceof Ai)e={update:ub(n,t.key,t.value)};else if(t instanceof Ic)e={delete:Jh(n,t.key)};else if(t instanceof _n)e={update:ub(n,t.key,t.data),updateMask:YD(t.fieldMask)};else{if(!(t instanceof $h))return $();e={verify:Jh(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(s,o){let c=o.transform;if(c instanceof Tr)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ti)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ci)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Cr)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw $()}(0,i))),t.precondition.isNone||(e.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:VD(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:$()}(n,t.precondition)),e}function BD(n,t){return n&&n.length>0?(pt(t!==void 0),n.map(e=>function(r,s){let o=r.updateTime?Ge(r.updateTime):Ge(s);return o.isEqual(Y.min())&&(o=Ge(s)),new zh(o,r.transformResults||[])}(e,t))):[]}function zD(n,t){return{documents:[Wb(n,t.path)]}}function $D(n,t){let e={structuredQuery:{}},i=t.path,r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=Wb(n,r);let s=function(d){if(d.length!==0)return Qb(Ke.create(d,"and"))}(t.filters);s&&(e.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(f=>function(b){return{field:dr(b.field),direction:GD(b.dir)}}(f))}(t.orderBy);o&&(e.structuredQuery.orderBy=o);let c=Xh(n,t.limit);return c!==null&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(t.endAt)),{_t:e,parent:r}}function qD(n){let t=LD(n.parent),e=n.structuredQuery,i=e.from?e.from.length:0,r=null;if(i>0){pt(i===1);let f=e.from[0];f.allDescendants?r=f.collectionId:t=t.child(f.collectionId)}let s=[];e.where&&(s=function(p){let b=Yb(p);return b instanceof Ke&&Sb(b)?b.getFilters():[b]}(e.where));let o=[];e.orderBy&&(o=function(p){return p.map(b=>function(R){return new wr(hr(R.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(b))}(e.orderBy));let c=null;e.limit&&(c=function(p){let b;return b=typeof p=="object"?p.value:p,Gc(b)?null:b}(e.limit));let u=null;e.startAt&&(u=function(p){let b=!!p.before,A=p.values||[];return new yr(A,b)}(e.startAt));let d=null;return e.endAt&&(d=function(p){let b=!p.before,A=p.values||[];return new yr(A,b)}(e.endAt)),pD(t,r,o,s,c,"F",u,d)}function HD(n,t){let e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Yb(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":let i=hr(e.unaryFilter.field);return Ut.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=hr(e.unaryFilter.field);return Ut.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=hr(e.unaryFilter.field);return Ut.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=hr(e.unaryFilter.field);return Ut.create(o,"!=",{nullValue:"NULL_VALUE"});default:return $()}}(n):n.fieldFilter!==void 0?function(e){return Ut.create(hr(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return Ke.create(e.compositeFilter.filters.map(i=>Yb(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return $()}}(e.compositeFilter.op))}(n):$()}function GD(n){return OD[n]}function WD(n){return ND[n]}function KD(n){return FD[n]}function dr(n){return{fieldPath:n.canonicalString()}}function hr(n){return be.fromServerFormat(n.fieldPath)}function Qb(n){return n instanceof Ut?function(e){if(e.op==="=="){if(Qv(e.value))return{unaryFilter:{field:dr(e.field),op:"IS_NAN"}};if(Yv(e.value))return{unaryFilter:{field:dr(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Qv(e.value))return{unaryFilter:{field:dr(e.field),op:"IS_NOT_NAN"}};if(Yv(e.value))return{unaryFilter:{field:dr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dr(e.field),op:WD(e.op),value:e.value}}}(n):n instanceof Ke?function(e){let i=e.getFilters().map(r=>Qb(r));return i.length===1?i[0]:{compositeFilter:{op:KD(e.op),filters:i}}}(n):$()}function YD(n){let t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Xb(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var _o=class n{constructor(t,e,i,r,s=Y.min(),o=Y.min(),c=se.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(t){return new n(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var ef=class{constructor(t){this.ct=t}};function QD(n){let t=qD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Bh(t,t.limit,"L"):t}var Dc=class{constructor(){}Pt(t,e){this.It(t,e),e.Tt()}It(t,e){if("nullValue"in t)this.Et(e,5);else if("booleanValue"in t)this.Et(e,10),e.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(e,15),e.dt(Tt(t.integerValue));else if("doubleValue"in t){let i=Tt(t.doubleValue);isNaN(i)?this.Et(e,13):(this.Et(e,15),fo(i)?e.dt(0):e.dt(i))}else if("timestampValue"in t){let i=t.timestampValue;this.Et(e,20),typeof i=="string"&&(i=pn(i)),e.At(`${i.seconds||""}`),e.dt(i.nanos||0)}else if("stringValue"in t)this.Rt(t.stringValue,e),this.Vt(e);else if("bytesValue"in t)this.Et(e,30),e.ft(jn(t.bytesValue)),this.Vt(e);else if("referenceValue"in t)this.gt(t.referenceValue,e);else if("geoPointValue"in t){let i=t.geoPointValue;this.Et(e,45),e.dt(i.latitude||0),e.dt(i.longitude||0)}else"mapValue"in t?Tb(t)?this.Et(e,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,e),this.Vt(e)):"arrayValue"in t?(this.wt(t.arrayValue,e),this.Vt(e)):$()}Rt(t,e){this.Et(e,25),this.St(t,e)}St(t,e){e.At(t)}yt(t,e){let i=t.fields||{};this.Et(e,55);for(let r of Object.keys(i))this.Rt(r,e),this.It(i[r],e)}wt(t,e){let i=t.values||[];this.Et(e,50);for(let r of i)this.It(r,e)}gt(t,e){this.Et(e,37),B.fromName(t).path.forEach(i=>{this.Et(e,60),this.St(i,e)})}Et(t,e){t.dt(e)}Vt(t){t.dt(2)}};Dc.bt=new Dc;var nf=class{constructor(){this._n=new rf}addToCollectionParentIndex(t,e){return this._n.add(e),P.resolve()}getCollectionParents(t,e){return P.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return P.resolve()}deleteFieldIndex(t,e){return P.resolve()}deleteAllFieldIndexes(t){return P.resolve()}createTargetIndexes(t,e){return P.resolve()}getDocumentsMatchingTarget(t,e){return P.resolve(null)}getIndexType(t,e){return P.resolve(0)}getFieldIndexes(t,e){return P.resolve([])}getNextCollectionGroupToUpdate(t){return P.resolve(null)}getMinOffset(t,e){return P.resolve(Ii.min())}getMinOffsetFromCollectionGroup(t,e){return P.resolve(Ii.min())}updateCollectionGroup(t,e,i){return P.resolve()}updateIndexEntries(t,e){return P.resolve()}},rf=class{constructor(){this.index={}}add(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Jt(Ct.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Jt(Ct.comparator)).toArray()}};var RO=new Uint8Array(0);var ze=class n{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new n(t,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};ze.DEFAULT_COLLECTION_PERCENTILE=10,ze.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ze.DEFAULT=new ze(41943040,ze.DEFAULT_COLLECTION_PERCENTILE,ze.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ze.DISABLED=new ze(-1,0,0);var vo=class n{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new n(0)}static Ln(){return new n(-1)}};var sf=class{constructor(){this.changes=new Bn(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Me.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();let i=this.changes.get(e);return i!==void 0?P.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var of=class{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}};var af=class{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(i!==null&&uo(i.mutation,r,$e.empty(),Ht.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,nt()).next(()=>i))}getLocalViewOfDocuments(t,e,i=nt()){let r=_i();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let o=oo();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){let i=_i();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,nt()))}populateOverlays(t,e,i){let r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,c)=>{e.set(o,c)})})}computeViews(t,e,i,r){let s=gn(),o=lo(),c=function(){return lo()}();return e.forEach((u,d)=>{let f=i.get(d.key);r.has(d.key)&&(f===void 0||f.mutation instanceof _n)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),uo(f.mutation,d,f.mutation.getFieldMask(),Ht.now())):o.set(d.key,$e.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((d,f)=>o.set(d,f)),e.forEach((d,f)=>{var p;return c.set(d,new of(f,(p=o.get(d))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(t,e){let i=lo(),r=new At((o,c)=>o-c),s=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(let c of o)c.keys().forEach(u=>{let d=e.get(u);if(d===null)return;let f=i.get(u)||$e.empty();f=c.applyToLocalView(d,f),i.set(u,f);let p=(r.get(c.batchId)||nt()).add(u);r=r.insert(c.batchId,p)})}).next(()=>{let o=[],c=r.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),d=u.key,f=u.value,p=Nb();f.forEach(b=>{if(!s.has(b)){let A=zb(e.get(b),i.get(b));A!==null&&p.set(b,A),s=s.add(b)}}),o.push(this.documentOverlayCache.saveOverlays(t,d,p))}return P.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return function(o){return B.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):gD(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):P.resolve(_i()),c=-1,u=s;return o.next(d=>P.forEach(d,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),s.get(f)?P.resolve():this.remoteDocumentCache.getEntry(t,f).next(b=>{u=u.insert(f,b)}))).next(()=>this.populateOverlays(t,d,s)).next(()=>this.computeViews(t,u,d,nt())).next(f=>({batchId:c,changes:Ob(f)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new B(e)).next(i=>{let r=oo();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){let s=e.collectionGroup,o=oo();return this.indexManager.getCollectionParents(t,s).next(c=>P.forEach(c,u=>{let d=function(p,b){return new Ir(b,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(e,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,d,i,r).next(f=>{f.forEach((p,b)=>{o=o.insert(p,b)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,s,r))).next(o=>{s.forEach((u,d)=>{let f=d.getKey();o.get(f)===null&&(o=o.insert(f,Me.newInvalidDocument(f)))});let c=oo();return o.forEach((u,d)=>{let f=s.get(u);f!==void 0&&uo(f.mutation,d,$e.empty(),Ht.now()),Kc(e,d)&&(c=c.insert(u,d))}),c})}};var cf=class{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return P.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:Ge(r.createTime)}}(e)),P.resolve()}getNamedQuery(t,e){return P.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(r){return{name:r.name,query:QD(r.bundledQuery),readTime:Ge(r.readTime)}}(e)),P.resolve()}};var lf=class{constructor(){this.overlays=new At(B.comparator),this.hr=new Map}getOverlay(t,e){return P.resolve(this.overlays.get(e))}getOverlays(t,e){let i=_i();return P.forEach(e,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.ht(t,e,s)}),P.resolve()}removeOverlaysForBatchId(t,e,i){let r=this.hr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(i)),P.resolve()}getOverlaysForCollection(t,e,i){let r=_i(),s=e.length+1,o=new B(e.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let u=c.getNext().value,d=u.getKey();if(!e.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return P.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new At((d,f)=>d-f),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===e&&d.largestBatchId>i){let f=s.get(d.largestBatchId);f===null&&(f=_i(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}let c=_i(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=r)););return P.resolve(c)}ht(t,e,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Gh(e,i));let s=this.hr.get(e);s===void 0&&(s=nt(),this.hr.set(e,s)),this.hr.set(e,s.add(i.key))}};var bo=class{constructor(){this.Pr=new Jt(Mt.Ir),this.Tr=new Jt(Mt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){let i=new Mt(t,e);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Ar(new Mt(t,e))}Rr(t,e){t.forEach(i=>this.removeReference(i,e))}Vr(t){let e=new B(new Ct([])),i=new Mt(e,t),r=new Mt(e,t+1),s=[];return this.Tr.forEachInRange([i,r],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){let e=new B(new Ct([])),i=new Mt(e,t),r=new Mt(e,t+1),s=nt();return this.Tr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(t){let e=new Mt(t,0),i=this.Pr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}},Mt=class{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return B.comparator(t.key,e.key)||ct(t.pr,e.pr)}static Er(t,e){return ct(t.pr,e.pr)||B.comparator(t.key,e.key)}};var uf=class{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new Jt(Mt.Ir)}checkEmpty(t){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new qh(s,e,i,r);this.mutationQueue.push(o);for(let c of r)this.wr=this.wr.add(new Mt(c.key,s)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return P.resolve(o)}lookupMutationBatch(t,e){return P.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){let i=e+1,r=this.br(i),s=r<0?0:r;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){let i=new Mt(e,0),r=new Mt(e,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([i,r],o=>{let c=this.Sr(o.pr);s.push(c)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Jt(ct);return e.forEach(r=>{let s=new Mt(r,0),o=new Mt(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],c=>{i=i.add(c.pr)})}),P.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(t,e){let i=e.path,r=i.length+1,s=i;B.isDocumentKey(s)||(s=s.child(""));let o=new Mt(new B(s),0),c=new Jt(ct);return this.wr.forEachWhile(u=>{let d=u.key.path;return!!i.isPrefixOf(d)&&(d.length===r&&(c=c.add(u.pr)),!0)},o),P.resolve(this.Dr(c))}Dr(t){let e=[];return t.forEach(i=>{let r=this.Sr(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){pt(this.Cr(e.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return P.forEach(e.mutations,r=>{let s=new Mt(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.wr=i})}Mn(t){}containsKey(t,e){let i=new Mt(e,0),r=this.wr.firstAfterOrEqual(i);return P.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,P.resolve()}Cr(t,e){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){let e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}};var df=class{constructor(t){this.vr=t,this.docs=function(){return new At(B.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){let i=e.key,r=this.docs.get(i),s=r?r.size:0,o=this.vr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){let e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){let i=this.docs.get(e);return P.resolve(i?i.document.mutableCopy():Me.newInvalidDocument(e))}getEntries(t,e){let i=gn();return e.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Me.newInvalidDocument(r))}),P.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let s=gn(),o=e.path,c=new B(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||sD(rD(f),i)<=0||(r.has(f.key)||Kc(e,f))&&(s=s.insert(f.key,f.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(t,e,i,r){$()}Fr(t,e){return P.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new hf(this)}getSize(t){return P.resolve(this.size)}},hf=class extends sf{constructor(t){super(),this.ar=t}applyChanges(t){let e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.ar.addEntry(t,r)):this.ar.removeEntry(i)}),P.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}};var ff=class{constructor(t){this.persistence=t,this.Mr=new Bn(e=>em(e),nm),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Or=0,this.Nr=new bo,this.targetCount=0,this.Lr=vo.Nn()}forEachTarget(t,e){return this.Mr.forEach((i,r)=>e(r)),P.resolve()}getLastRemoteSnapshotVersion(t){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return P.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Or&&(this.Or=e),P.resolve()}qn(t){this.Mr.set(t.target,t);let e=t.targetId;e>this.highestTargetId&&(this.Lr=new vo(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,P.resolve()}updateTargetData(t,e){return this.qn(e),P.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,P.resolve()}removeTargets(t,e,i){let r=0,s=[];return this.Mr.forEach((o,c)=>{c.sequenceNumber<=e&&i.get(c.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,c.targetId)),r++)}),P.waitFor(s).next(()=>r)}getTargetCount(t){return P.resolve(this.targetCount)}getTargetData(t,e){let i=this.Mr.get(e)||null;return P.resolve(i)}addMatchingKeys(t,e,i){return this.Nr.dr(e,i),P.resolve()}removeMatchingKeys(t,e,i){this.Nr.Rr(e,i);let r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),P.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),P.resolve()}getMatchingKeysForTargetId(t,e){let i=this.Nr.gr(e);return P.resolve(i)}containsKey(t,e){return P.resolve(this.Nr.containsKey(e))}};var mf=class{constructor(t,e){this.Br={},this.overlays={},this.kr=new Ib(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new ff(this),this.indexManager=new nf,this.remoteDocumentCache=function(r){return new df(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new ef(e),this.$r=new cf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new lf,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Br[t.toKey()];return i||(i=new uf(e,this.referenceDelegate),this.Br[t.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,i){V("MemoryPersistence","Starting transaction:",t);let r=new pf(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(t,e){return P.or(Object.values(this.Br).map(i=>()=>i.containsKey(t,e)))}},pf=class extends Sh{constructor(t){super(),this.currentSequenceNumber=t}},gf=class n{constructor(t){this.persistence=t,this.zr=new bo,this.jr=null}static Hr(t){return new n(t)}get Jr(){if(this.jr)return this.jr;throw $()}addReference(t,e,i){return this.zr.addReference(i,e),this.Jr.delete(i.toString()),P.resolve()}removeReference(t,e,i){return this.zr.removeReference(i,e),this.Jr.add(i.toString()),P.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),P.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach(r=>this.Jr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}Ur(){this.jr=new Set}Wr(t){let e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Jr,i=>{let r=B.fromPath(i);return this.Yr(t,r).next(s=>{s||e.removeEntry(r,Y.min())})}).next(()=>(this.jr=null,e.apply(t)))}updateLimboDocument(t,e){return this.Yr(t,e).next(i=>{i?this.Jr.delete(e.toString()):this.Jr.add(e.toString())})}Kr(t){return 0}Yr(t,e){return P.or([()=>P.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}};var _f=class n{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.qi=i,this.Qi=r}static Ki(t,e){let i=nt(),r=nt();for(let s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(t,e.fromCache,i,r)}};var vf=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var bf=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return O_()?8:aD(Vt())>0?6:4}()}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,i,r){let s={result:null};return this.ji(t,e).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,e,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new vf;return this.Ji(t,e,o).next(c=>{if(s.result=c,this.Ui)return this.Yi(t,e,o,c.size)})}).next(()=>s.result)}Yi(t,e,i,r){return i.documentReadCount<this.Wi?(so()<=et.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",ur(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),P.resolve()):(so()<=et.DEBUG&&V("QueryEngine","Query:",ur(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(so()<=et.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",ur(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,He(e))):P.resolve())}ji(t,e){if(tb(e))return P.resolve(null);let i=He(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=Bh(e,null,"F"),i=He(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{let o=nt(...s);return this.zi.getDocuments(t,o).next(c=>this.indexManager.getMinOffset(t,i).next(u=>{let d=this.Zi(e,c);return this.Xi(e,d,o,u.readTime)?this.ji(t,Bh(e,null,"F")):this.es(t,d,e,u)}))})))}Hi(t,e,i,r){return tb(e)||r.isEqual(Y.min())?P.resolve(null):this.zi.getDocuments(t,i).next(s=>{let o=this.Zi(e,s);return this.Xi(e,o,i,r)?P.resolve(null):(so()<=et.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ur(e)),this.es(t,o,e,iD(r,-1)).next(c=>c))})}Zi(t,e){let i=new Jt(Pb(t));return e.forEach((r,s)=>{Kc(t,s)&&(i=i.add(s))}),i}Xi(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;let s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(t,e,i){return so()<=et.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",ur(e)),this.zi.getDocumentsMatchingQuery(t,e,Ii.min(),i)}es(t,e,i,r){return this.zi.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(o=>{s=s.insert(o.key,o)}),s))}};var yf=class{constructor(t,e,i,r){this.persistence=t,this.ts=e,this.serializer=r,this.ns=new At(ct),this.rs=new Bn(s=>em(s),nm),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(i)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new af(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ns))}};function XD(n,t,e,i){return new yf(n,t,e,i)}function Zb(n,t){return y(this,null,function*(){let e=K(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e._s(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],c=[],u=nt();for(let d of r){o.push(d.batchId);for(let f of d.mutations)u=u.add(f.key)}for(let d of s){c.push(d.batchId);for(let f of d.mutations)u=u.add(f.key)}return e.localDocuments.getDocuments(i,u).next(d=>({us:d,removedBatchIds:o,addedBatchIds:c}))})})})}function ZD(n,t){let e=K(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=t.batch.keys(),s=e.os.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){let p=d.batch,b=p.keys(),A=P.resolve();return b.forEach(R=>{A=A.next(()=>f.getEntry(u,R)).next(M=>{let k=d.docVersions.get(R);pt(k!==null),M.version.compareTo(k)<0&&(p.applyToRemoteDocument(M,d),M.isValidDocument()&&(M.setReadTime(d.commitVersion),f.addEntry(M)))})}),A.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let u=nt();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function Jb(n){let t=K(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Qr.getLastRemoteSnapshotVersion(e))}function JD(n,t){let e=K(n),i=t.snapshotVersion,r=e.ns;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=e.os.newChangeBuffer({trackRemovals:!0});r=e.ns;let c=[];t.targetChanges.forEach((f,p)=>{let b=r.get(p);if(!b)return;c.push(e.Qr.removeMatchingKeys(s,f.removedDocuments,p).next(()=>e.Qr.addMatchingKeys(s,f.addedDocuments,p)));let A=b.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(p)!==null?A=A.withResumeToken(se.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):f.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(f.resumeToken,i)),r=r.insert(p,A),function(M,k,z){return M.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(b,A,f)&&c.push(e.Qr.updateTargetData(s,A))});let u=gn(),d=nt();if(t.documentUpdates.forEach(f=>{t.resolvedLimboDocuments.has(f)&&c.push(e.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(tR(s,o,t.documentUpdates).next(f=>{u=f.cs,d=f.ls})),!i.isEqual(Y.min())){let f=e.Qr.getLastRemoteSnapshotVersion(s).next(p=>e.Qr.setTargetsMetadata(s,s.currentSequenceNumber,i));c.push(f)}return P.waitFor(c).next(()=>o.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(e.ns=r,s))}function tR(n,t,e){let i=nt(),r=nt();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let o=gn();return e.forEach((c,u)=>{let d=s.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(c)),u.isNoDocument()&&u.version.isEqual(Y.min())?(t.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(t.addEntry(u),o=o.insert(c,u)):V("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{cs:o,ls:r}})}function eR(n,t){let e=K(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function nR(n,t){let e=K(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Qr.getTargetData(i,t).next(s=>s?(r=s,P.resolve(r)):e.Qr.allocateTargetId(i).next(o=>(r=new _o(t,o,"TargetPurposeListen",i.currentSequenceNumber),e.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=e.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.ns=e.ns.insert(i.targetId,i),e.rs.set(t,i.targetId)),i})}function wf(n,t,e){return y(this,null,function*(){let i=K(n),r=i.ns.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!To(o))throw o;V("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}i.ns=i.ns.remove(t),i.rs.delete(r.target)})}function db(n,t,e){let i=K(n),r=Y.min(),s=nt();return i.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){let p=K(u),b=p.rs.get(f);return b!==void 0?P.resolve(p.ns.get(b)):p.Qr.getTargetData(d,f)}(i,o,He(t)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>i.ts.getDocumentsMatchingQuery(o,t,e?r:Y.min(),e?s:nt())).next(c=>(iR(i,vD(t),c),{documents:c,hs:s})))}function iR(n,t,e){let i=n.ss.get(t)||Y.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.ss.set(t,i)}var Rc=class{constructor(){this.activeTargetIds=TD()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}};var If=class{constructor(){this.no=new Rc,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,i){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Rc,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var Ef=class{io(t){}shutdown(){}};var xc=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.uo)t(0)}ao(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var hc=null;function gh(){return hc===null?hc=function(){return 268435456+Math.round(2147483648*Math.random())}():hc++,"0x"+hc.toString(16)}var rR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Tf=class{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}};var Zt="WebChannelConnection",Cf=class extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let i=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+e.host,this.So=`projects/${r}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Do(){return!1}Co(e,i,r,s,o){let c=gh(),u=this.vo(e,i.toUriEncodedString());V("RestConnection",`Sending RPC '${e}' ${c}:`,u,r);let d={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(d,s,o),this.Mo(e,u,d,r).then(f=>(V("RestConnection",`Received RPC '${e}' ${c}: `,f),f),f=>{throw gr("RestConnection",`RPC '${e}' ${c} failed with error: `,f,"url: ",u,"request:",r),f})}xo(e,i,r,s,o,c){return this.Co(e,i,r,s,o)}Fo(e,i,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xr}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}vo(e,i){let r=rR[e];return`${this.wo}/v1/${i}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,e,i,r){let s=gh();return new Promise((o,c)=>{let u=new lh;u.setWithCredentials(!0),u.listenOnce(dh.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ro.NO_ERROR:let f=u.getResponseJson();V(Zt,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(f)),o(f);break;case ro.TIMEOUT:V(Zt,`RPC '${t}' ${s} timed out`),c(new L(D.DEADLINE_EXCEEDED,"Request time out"));break;case ro.HTTP_ERROR:let p=u.getStatus();if(V(Zt,`RPC '${t}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let b=u.getResponseJson();Array.isArray(b)&&(b=b[0]);let A=b?.error;if(A&&A.status&&A.message){let R=function(k){let z=k.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(z)>=0?z:D.UNKNOWN}(A.status);c(new L(R,A.message))}else c(new L(D.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new L(D.UNAVAILABLE,"Connection failed."));break;default:$()}}finally{V(Zt,`RPC '${t}' ${s} completed.`)}});let d=JSON.stringify(r);V(Zt,`RPC '${t}' ${s} sending request:`,r),u.send(e,"POST",d,i,15)})}Oo(t,e,i){let r=gh(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=mh(),c=fh(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.xmlHttpFactory=new uh({})),this.Fo(u.initMessageHeaders,e,i),u.encodeInitMessageHeaders=!0;let f=s.join("");V(Zt,`Creating RPC '${t}' stream ${r}: ${f}`,u);let p=o.createWebChannel(f,u),b=!1,A=!1,R=new Tf({lo:k=>{A?V(Zt,`Not sending because RPC '${t}' stream ${r} is closed:`,k):(b||(V(Zt,`Opening RPC '${t}' stream ${r} transport.`),p.open(),b=!0),V(Zt,`RPC '${t}' stream ${r} sending:`,k),p.send(k))},ho:()=>p.close()}),M=(k,z,Z)=>{k.listen(z,rt=>{try{Z(rt)}catch(gt){setTimeout(()=>{throw gt},0)}})};return M(p,lr.EventType.OPEN,()=>{A||(V(Zt,`RPC '${t}' stream ${r} transport opened.`),R.mo())}),M(p,lr.EventType.CLOSE,()=>{A||(A=!0,V(Zt,`RPC '${t}' stream ${r} transport closed`),R.po())}),M(p,lr.EventType.ERROR,k=>{A||(A=!0,gr(Zt,`RPC '${t}' stream ${r} transport errored:`,k),R.po(new L(D.UNAVAILABLE,"The operation could not be completed")))}),M(p,lr.EventType.MESSAGE,k=>{var z;if(!A){let Z=k.data[0];pt(!!Z);let rt=Z,gt=rt.error||((z=rt[0])===null||z===void 0?void 0:z.error);if(gt){V(Zt,`RPC '${t}' stream ${r} received error:`,gt);let te=gt.status,ht=function(v){let w=Pt[v];if(w!==void 0)return qb(w)}(te),I=gt.message;ht===void 0&&(ht=D.INTERNAL,I="Unknown error status: "+te+" with message "+gt.message),A=!0,R.po(new L(ht,I)),p.close()}else V(Zt,`RPC '${t}' stream ${r} received:`,Z),R.yo(Z)}}),M(c,hh.STAT_EVENT,k=>{k.stat===uc.PROXY?V(Zt,`RPC '${t}' stream ${r} detected buffering proxy`):k.stat===uc.NOPROXY&&V(Zt,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{R.fo()},0),R}};function _h(){return typeof document<"u"?document:null}function Yc(n){return new Qh(n,!0)}var kc=class{constructor(t,e,i=1e3,r=1.5,s=6e4){this.oi=t,this.timerId=e,this.No=i,this.Lo=r,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();let e=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),r=Math.max(0,e-i);r>0&&V("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Pc=class{constructor(t,e,i,r,s,o,c,u){this.oi=t,this.Go=i,this.zo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new kc(t,e)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return y(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}r_(){return y(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(t,e){return y(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():e&&e.code===D.RESOURCE_EXHAUSTED?(mn(e.toString()),mn("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):e&&e.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.Ao(e)})}__(){}auth(){this.state=1;let t=this.a_(this.jo),e=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.jo===e&&this.u_(i,r)},i=>{t(()=>{let r=new L(D.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(r)})})}u_(t,e){let i=this.a_(this.jo);this.stream=this.l_(t,e),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{i(()=>this.c_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(()=>y(this,null,function*(){this.state=0,this.start()}))}c_(t){return V("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return e=>{this.oi.enqueueAndForget(()=>this.jo===t?e():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Af=class extends Pc{constructor(t,e,i,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,o),this.serializer=s}l_(t,e){return this.connection.Oo("Listen",t,e)}onMessage(t){this.Yo.reset();let e=UD(this.serializer,t),i=function(s){if(!("targetChange"in s))return Y.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?Ge(o.readTime):Y.min()}(t);return this.listener.h_(e,i)}P_(t){let e={};e.database=tf(this.serializer),e.addTarget=function(s,o){let c,u=o.target;if(c=jh(u)?{documents:zD(s,u)}:{query:$D(s,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=Hb(s,o.resumeToken);let d=Xh(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(Y.min())>0){c.readTime=Sc(s,o.snapshotVersion.toTimestamp());let d=Xh(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,t);let i=HD(this.serializer,t);i&&(e.labels=i),this.i_(e)}I_(t){let e={};e.database=tf(this.serializer),e.removeTarget=t,this.i_(e)}},Sf=class extends Pc{constructor(t,e,i,r,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,e){return this.connection.Oo("Write",t,e)}onMessage(t){if(pt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();let e=BD(t.writeResults,t.commitTime),i=Ge(t.commitTime);return this.listener.A_(i,e)}return pt(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let t={};t.database=tf(this.serializer),this.i_(t)}d_(t){let e={streamToken:this.lastStreamToken,writes:t.map(i=>jD(this.serializer,i))};this.i_(e)}};var Df=class extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new L(D.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,e,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,Zh(e,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(D.UNKNOWN,s.toString())})}xo(t,e,i,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.xo(t,Zh(e,i),r,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(D.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},Rf=class{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){let e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(mn(e),this.y_=!1):V("OnlineStateTracker",e)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var xf=class{constructor(t,e,i,r,s){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{i.enqueueAndForget(()=>y(this,null,function*(){Si(this)&&(V("RemoteStore","Restarting streams for network reachability change."),yield function(u){return y(this,null,function*(){let d=K(u);d.M_.add(4),yield Co(d),d.N_.set("Unknown"),d.M_.delete(4),yield Qc(d)})}(this))}))}),this.N_=new Rf(i,r)}};function Qc(n){return y(this,null,function*(){if(Si(n))for(let t of n.x_)yield t(!0)})}function Co(n){return y(this,null,function*(){for(let t of n.x_)yield t(!1)})}function ty(n,t){let e=K(n);e.F_.has(t.targetId)||(e.F_.set(t.targetId,t),cm(e)?am(e):Pr(e).Xo()&&om(e,t))}function sm(n,t){let e=K(n),i=Pr(e);e.F_.delete(t),i.Xo()&&ey(e,t),e.F_.size===0&&(i.Xo()?i.n_():Si(e)&&e.N_.set("Unknown"))}function om(n,t){if(n.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Y.min())>0){let e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Pr(n).P_(t)}function ey(n,t){n.L_.xe(t),Pr(n).I_(t)}function am(n){n.L_=new Yh({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>n.F_.get(t)||null,tt:()=>n.datastore.serializer.databaseId}),Pr(n).start(),n.N_.w_()}function cm(n){return Si(n)&&!Pr(n).Zo()&&n.F_.size>0}function Si(n){return K(n).M_.size===0}function ny(n){n.L_=void 0}function sR(n){return y(this,null,function*(){n.N_.set("Online")})}function oR(n){return y(this,null,function*(){n.F_.forEach((t,e)=>{om(n,t)})})}function aR(n,t){return y(this,null,function*(){ny(n),cm(n)?(n.N_.D_(t),am(n)):n.N_.set("Unknown")})}function cR(n,t,e){return y(this,null,function*(){if(n.N_.set("Online"),t instanceof Cc&&t.state===2&&t.cause)try{yield function(r,s){return y(this,null,function*(){let o=s.cause;for(let c of s.targetIds)r.F_.has(c)&&(yield r.remoteSyncer.rejectListen(c,o),r.F_.delete(c),r.L_.removeTarget(c))})}(n,t)}catch(i){V("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield Mc(n,i)}else if(t instanceof mr?n.L_.Ke(t):t instanceof Tc?n.L_.He(t):n.L_.We(t),!e.isEqual(Y.min()))try{let i=yield Jb(n.localStore);e.compareTo(i)>=0&&(yield function(s,o){let c=s.L_.rt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){let f=s.F_.get(d);f&&s.F_.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{let f=s.F_.get(u);if(!f)return;s.F_.set(u,f.withResumeToken(se.EMPTY_BYTE_STRING,f.snapshotVersion)),ey(s,u);let p=new _o(f.target,u,d,f.sequenceNumber);om(s,p)}),s.remoteSyncer.applyRemoteEvent(c)}(n,e))}catch(i){V("RemoteStore","Failed to raise snapshot:",i),yield Mc(n,i)}})}function Mc(n,t,e){return y(this,null,function*(){if(!To(t))throw t;n.M_.add(1),yield Co(n),n.N_.set("Offline"),e||(e=()=>Jb(n.localStore)),n.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){V("RemoteStore","Retrying IndexedDB access"),yield e(),n.M_.delete(1),yield Qc(n)}))})}function iy(n,t){return t().catch(e=>Mc(n,e,t))}function Xc(n){return y(this,null,function*(){let t=K(n),e=zn(t),i=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;lR(t);)try{let r=yield eR(t.localStore,i);if(r===null){t.v_.length===0&&e.n_();break}i=r.batchId,uR(t,r)}catch(r){yield Mc(t,r)}ry(t)&&sy(t)})}function lR(n){return Si(n)&&n.v_.length<10}function uR(n,t){n.v_.push(t);let e=zn(n);e.Xo()&&e.E_&&e.d_(t.mutations)}function ry(n){return Si(n)&&!zn(n).Zo()&&n.v_.length>0}function sy(n){zn(n).start()}function dR(n){return y(this,null,function*(){zn(n).V_()})}function hR(n){return y(this,null,function*(){let t=zn(n);for(let e of n.v_)t.d_(e.mutations)})}function fR(n,t,e){return y(this,null,function*(){let i=n.v_.shift(),r=Hh.from(i,t,e);yield iy(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Xc(n)})}function mR(n,t){return y(this,null,function*(){t&&zn(n).E_&&(yield function(i,r){return y(this,null,function*(){if(function(o){return kD(o)&&o!==D.ABORTED}(r.code)){let s=i.v_.shift();zn(i).t_(),yield iy(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield Xc(i)}})}(n,t)),ry(n)&&sy(n)})}function hb(n,t){return y(this,null,function*(){let e=K(n);e.asyncQueue.verifyOperationInProgress(),V("RemoteStore","RemoteStore received new credentials");let i=Si(e);e.M_.add(3),yield Co(e),i&&e.N_.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.M_.delete(3),yield Qc(e)})}function pR(n,t){return y(this,null,function*(){let e=K(n);t?(e.M_.delete(2),yield Qc(e)):t||(e.M_.add(2),yield Co(e),e.N_.set("Unknown"))})}function Pr(n){return n.B_||(n.B_=function(e,i,r){let s=K(e);return s.f_(),new Af(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Po:sR.bind(null,n),To:oR.bind(null,n),Ao:aR.bind(null,n),h_:cR.bind(null,n)}),n.x_.push(t=>y(this,null,function*(){t?(n.B_.t_(),cm(n)?am(n):n.N_.set("Unknown")):(yield n.B_.stop(),ny(n))}))),n.B_}function zn(n){return n.k_||(n.k_=function(e,i,r){let s=K(e);return s.f_(),new Sf(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:dR.bind(null,n),Ao:mR.bind(null,n),R_:hR.bind(null,n),A_:fR.bind(null,n)}),n.x_.push(t=>y(this,null,function*(){t?(n.k_.t_(),yield Xc(n)):(yield n.k_.stop(),n.v_.length>0&&(V("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))}))),n.k_}var kf=class n{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new fn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,s){let o=Date.now()+i,c=new n(t,e,o,r,s);return c.start(i),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(D.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function lm(n,t){if(mn("AsyncQueue",`${t}: ${n}`),To(n))return new L(D.UNAVAILABLE,`${t}: ${n}`);throw n}var Oc=class n{constructor(t){this.comparator=t?(e,i)=>t(e,i)||B.comparator(e.key,i.key):(e,i)=>B.comparator(e.key,i.key),this.keyedMap=oo(),this.sortedSet=new At(this.comparator)}static emptySet(t){return new n(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){let e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){let e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){let r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){let i=new n;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}};var Nc=class{constructor(){this.q_=new At(B.comparator)}track(t){let e=t.doc.key,i=this.q_.get(e);i?t.type!==0&&i.type===3?this.q_=this.q_.insert(e,t):t.type===3&&i.type!==1?this.q_=this.q_.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.q_=this.q_.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.q_=this.q_.remove(e):t.type===1&&i.type===2?this.q_=this.q_.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):$():this.q_=this.q_.insert(e,t)}Q_(){let t=[];return this.q_.inorderTraversal((e,i)=>{t.push(i)}),t}},Sr=class n{constructor(t,e,i,r,s,o,c,u,d){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(t,e,i,r,s){let o=[];return e.forEach(c=>{o.push({type:0,doc:c})}),new n(t,e,Oc.emptySet(e),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Wc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}};var Pf=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}},Mf=class{constructor(){this.queries=new Bn(t=>kb(t),Wc),this.onlineState="Unknown",this.z_=new Set}};function gR(n,t){return y(this,null,function*(){let e=K(n),i=3,r=t.query,s=e.queries.get(r);s?!s.W_()&&t.G_()&&(i=2):(s=new Pf,i=t.G_()?0:1);try{switch(i){case 0:s.K_=yield e.onListen(r,!0);break;case 1:s.K_=yield e.onListen(r,!1);break;case 2:yield e.onFirstRemoteStoreListen(r)}}catch(o){let c=lm(o,`Initialization of query '${ur(t.query)}' failed`);return void t.onError(c)}e.queries.set(r,s),s.U_.push(t),t.j_(e.onlineState),s.K_&&t.H_(s.K_)&&um(e)})}function _R(n,t){return y(this,null,function*(){let e=K(n),i=t.query,r=3,s=e.queries.get(i);if(s){let o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?r=t.G_()?0:1:!s.W_()&&t.G_()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}})}function vR(n,t){let e=K(n),i=!1;for(let r of t){let s=r.query,o=e.queries.get(s);if(o){for(let c of o.U_)c.H_(r)&&(i=!0);o.K_=r}}i&&um(e)}function bR(n,t,e){let i=K(n),r=i.queries.get(t);if(r)for(let s of r.U_)s.onError(e);i.queries.delete(t)}function um(n){n.z_.forEach(t=>{t.next()})}var Of,fb;(fb=Of||(Of={})).J_="default",fb.Cache="cache";var Nf=class{constructor(t,e,i){this.query=t,this.Y_=e,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(t){if(!this.options.includeMetadataChanges){let i=[];for(let r of t.docChanges)r.type!==3&&i.push(r);t=new Sr(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),e=!0):this.ta(t,this.onlineState)&&(this.na(t),e=!0),this.X_=t,e}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let e=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),e=!0),e}ta(t,e){if(!t.fromCache||!this.G_())return!0;let i=e!=="Offline";return(!this.options.ra||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ea(t){if(t.docChanges.length>0)return!0;let e=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}na(t){t=Sr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==Of.Cache}};var Fc=class{constructor(t){this.key=t}},Vc=class{constructor(t){this.key=t}},Ff=class{constructor(t,e){this.query=t,this.la=e,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=nt(),this.mutatedKeys=nt(),this.Ia=Pb(t),this.Ta=new Oc(this.Ia)}get Ea(){return this.la}da(t,e){let i=e?e.Aa:new Nc,r=e?e.Ta:this.Ta,s=e?e.mutatedKeys:this.mutatedKeys,o=r,c=!1,u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((f,p)=>{let b=r.get(f),A=Kc(this.query,p)?p:null,R=!!b&&this.mutatedKeys.has(b.key),M=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations),k=!1;b&&A?b.data.isEqual(A.data)?R!==M&&(i.track({type:3,doc:A}),k=!0):this.Ra(b,A)||(i.track({type:2,doc:A}),k=!0,(u&&this.Ia(A,u)>0||d&&this.Ia(A,d)<0)&&(c=!0)):!b&&A?(i.track({type:0,doc:A}),k=!0):b&&!A&&(i.track({type:1,doc:b}),k=!0,(u||d)&&(c=!0)),k&&(A?(o=o.add(A),s=M?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),i.track({type:1,doc:f})}return{Ta:o,Aa:i,Xi:c,mutatedKeys:s}}Ra(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){let s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;let o=t.Aa.Q_();o.sort((f,p)=>function(A,R){let M=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $()}};return M(A)-M(R)}(f.type,p.type)||this.Ia(f.doc,p.doc)),this.Va(i),r=r!=null&&r;let c=e&&!r?this.ma():[],u=this.Pa.size===0&&this.current&&!r?1:0,d=u!==this.ha;return this.ha=u,o.length!==0||d?{snapshot:new Sr(this.query,t.Ta,s,o,t.mutatedKeys,u===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:c}:{fa:c}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Nc,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(e=>this.la=this.la.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.la=this.la.delete(e)),this.current=t.current)}ma(){if(!this.current)return[];let t=this.Pa;this.Pa=nt(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});let e=[];return t.forEach(i=>{this.Pa.has(i)||e.push(new Vc(i))}),this.Pa.forEach(i=>{t.has(i)||e.push(new Fc(i))}),e}pa(t){this.la=t.hs,this.Pa=nt();let e=this.da(t.documents);return this.applyChanges(e,!0)}ya(){return Sr.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},Vf=class{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}},Lf=class{constructor(t){this.key=t,this.wa=!1}},Uf=class{constructor(t,e,i,r,s,o){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Bn(c=>kb(c),Wc),this.Da=new Map,this.Ca=new Set,this.va=new At(B.comparator),this.Fa=new Map,this.Ma=new bo,this.xa={},this.Oa=new Map,this.Na=vo.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function yR(n,t,e=!0){return y(this,null,function*(){let i=dy(n),r,s=i.ba.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ya()):r=yield oy(i,t,e,!0),r})}function wR(n,t){return y(this,null,function*(){let e=dy(n);yield oy(e,t,!0,!1)})}function oy(n,t,e,i){return y(this,null,function*(){let r=yield nR(n.localStore,He(t)),s=r.targetId,o=e?n.sharedClientState.addLocalQueryTarget(s):"not-current",c;return i&&(c=yield IR(n,t,s,o==="current",r.resumeToken)),n.isPrimaryClient&&e&&ty(n.remoteStore,r),c})}function IR(n,t,e,i,r){return y(this,null,function*(){n.Ba=(p,b,A)=>function(M,k,z,Z){return y(this,null,function*(){let rt=k.view.da(z);rt.Xi&&(rt=yield db(M.localStore,k.query,!1).then(({documents:I})=>k.view.da(I,rt)));let gt=Z&&Z.targetChanges.get(k.targetId),te=Z&&Z.targetMismatches.get(k.targetId)!=null,ht=k.view.applyChanges(rt,M.isPrimaryClient,gt,te);return pb(M,k.targetId,ht.fa),ht.snapshot})}(n,p,b,A);let s=yield db(n.localStore,t,!0),o=new Ff(t,s.hs),c=o.da(s.documents),u=go.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),d=o.applyChanges(c,n.isPrimaryClient,u);pb(n,e,d.fa);let f=new Vf(t,e,o);return n.ba.set(t,f),n.Da.has(e)?n.Da.get(e).push(t):n.Da.set(e,[t]),d.snapshot})}function ER(n,t,e){return y(this,null,function*(){let i=K(n),r=i.ba.get(t),s=i.Da.get(r.targetId);if(s.length>1)return i.Da.set(r.targetId,s.filter(o=>!Wc(o,t))),void i.ba.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield wf(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&sm(i.remoteStore,r.targetId),jf(i,r.targetId)}).catch(Eo))):(jf(i,r.targetId),yield wf(i.localStore,r.targetId,!0))})}function TR(n,t){return y(this,null,function*(){let e=K(n),i=e.ba.get(t),r=e.Da.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),sm(e.remoteStore,i.targetId))})}function CR(n,t,e){return y(this,null,function*(){let i=PR(n);try{let r=yield function(o,c){let u=K(o),d=Ht.now(),f=c.reduce((A,R)=>A.add(R.key),nt()),p,b;return u.persistence.runTransaction("Locally write mutations","readwrite",A=>{let R=gn(),M=nt();return u.os.getEntries(A,f).next(k=>{R=k,R.forEach((z,Z)=>{Z.isValidDocument()||(M=M.add(z))})}).next(()=>u.localDocuments.getOverlayedDocuments(A,R)).next(k=>{p=k;let z=[];for(let Z of c){let rt=xD(Z,p.get(Z.key).overlayedDocument);rt!=null&&z.push(new _n(Z.key,rt,Cb(rt.value.mapValue),yi.exists(!0)))}return u.mutationQueue.addMutationBatch(A,d,z,c)}).next(k=>{b=k;let z=k.applyToLocalDocumentSet(p,M);return u.documentOverlayCache.saveOverlays(A,k.batchId,z)})}).then(()=>({batchId:b.batchId,changes:Ob(p)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(o,c,u){let d=o.xa[o.currentUser.toKey()];d||(d=new At(ct)),d=d.insert(c,u),o.xa[o.currentUser.toKey()]=d}(i,r.batchId,e),yield Ao(i,r.changes),yield Xc(i.remoteStore)}catch(r){let s=lm(r,"Failed to persist write");e.reject(s)}})}function ay(n,t){return y(this,null,function*(){let e=K(n);try{let i=yield JD(e.localStore,t);t.targetChanges.forEach((r,s)=>{let o=e.Fa.get(s);o&&(pt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.wa=!0:r.modifiedDocuments.size>0?pt(o.wa):r.removedDocuments.size>0&&(pt(o.wa),o.wa=!1))}),yield Ao(e,i,t)}catch(i){yield Eo(i)}})}function mb(n,t,e){let i=K(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){let r=[];i.ba.forEach((s,o)=>{let c=o.view.j_(t);c.snapshot&&r.push(c.snapshot)}),function(o,c){let u=K(o);u.onlineState=c;let d=!1;u.queries.forEach((f,p)=>{for(let b of p.U_)b.j_(c)&&(d=!0)}),d&&um(u)}(i.eventManager,t),r.length&&i.Sa.h_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function AR(n,t,e){return y(this,null,function*(){let i=K(n);i.sharedClientState.updateQueryState(t,"rejected",e);let r=i.Fa.get(t),s=r&&r.key;if(s){let o=new At(B.comparator);o=o.insert(s,Me.newNoDocument(s,Y.min()));let c=nt().add(s),u=new Ec(Y.min(),new Map,new At(ct),o,c);yield ay(i,u),i.va=i.va.remove(s),i.Fa.delete(t),dm(i)}else yield wf(i.localStore,t,!1).then(()=>jf(i,t,e)).catch(Eo)})}function SR(n,t){return y(this,null,function*(){let e=K(n),i=t.batch.batchId;try{let r=yield ZD(e.localStore,t);ly(e,i,null),cy(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield Ao(e,r)}catch(r){yield Eo(r)}})}function DR(n,t,e){return y(this,null,function*(){let i=K(n);try{let r=yield function(o,c){let u=K(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(p=>(pt(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(i.localStore,t);ly(i,t,e),cy(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield Ao(i,r)}catch(r){yield Eo(r)}})}function cy(n,t){(n.Oa.get(t)||[]).forEach(e=>{e.resolve()}),n.Oa.delete(t)}function ly(n,t,e){let i=K(n),r=i.xa[i.currentUser.toKey()];if(r){let s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.xa[i.currentUser.toKey()]=r}}function jf(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(let i of n.Da.get(t))n.ba.delete(i),e&&n.Sa.ka(i,e);n.Da.delete(t),n.isPrimaryClient&&n.Ma.Vr(t).forEach(i=>{n.Ma.containsKey(i)||uy(n,i)})}function uy(n,t){n.Ca.delete(t.path.canonicalString());let e=n.va.get(t);e!==null&&(sm(n.remoteStore,e),n.va=n.va.remove(t),n.Fa.delete(e),dm(n))}function pb(n,t,e){for(let i of e)i instanceof Fc?(n.Ma.addReference(i.key,t),RR(n,i)):i instanceof Vc?(V("SyncEngine","Document no longer in limbo: "+i.key),n.Ma.removeReference(i.key,t),n.Ma.containsKey(i.key)||uy(n,i.key)):$()}function RR(n,t){let e=t.key,i=e.path.canonicalString();n.va.get(e)||n.Ca.has(i)||(V("SyncEngine","New document in limbo: "+e),n.Ca.add(i),dm(n))}function dm(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){let t=n.Ca.values().next().value;n.Ca.delete(t);let e=new B(Ct.fromString(t)),i=n.Na.next();n.Fa.set(i,new Lf(e)),n.va=n.va.insert(e,i),ty(n.remoteStore,new _o(He(im(e.path)),i,"TargetPurposeLimboResolution",Ib.oe))}}function Ao(n,t,e){return y(this,null,function*(){let i=K(n),r=[],s=[],o=[];i.ba.isEmpty()||(i.ba.forEach((c,u)=>{o.push(i.Ba(u,t,e).then(d=>{if((d||e)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(u.targetId,d?.fromCache?"not-current":"current"),d){r.push(d);let f=_f.Ki(u.targetId,d);s.push(f)}}))}),yield Promise.all(o),i.Sa.h_(r),yield function(u,d){return y(this,null,function*(){let f=K(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(d,b=>P.forEach(b.qi,A=>f.persistence.referenceDelegate.addReference(p,b.targetId,A)).next(()=>P.forEach(b.Qi,A=>f.persistence.referenceDelegate.removeReference(p,b.targetId,A)))))}catch(p){if(!To(p))throw p;V("LocalStore","Failed to update sequence numbers: "+p)}for(let p of d){let b=p.targetId;if(!p.fromCache){let A=f.ns.get(b),R=A.snapshotVersion,M=A.withLastLimboFreeSnapshotVersion(R);f.ns=f.ns.insert(b,M)}}})}(i.localStore,s))})}function xR(n,t){return y(this,null,function*(){let e=K(n);if(!e.currentUser.isEqual(t)){V("SyncEngine","User change. New user:",t.toKey());let i=yield Zb(e.localStore,t);e.currentUser=t,function(s,o){s.Oa.forEach(c=>{c.forEach(u=>{u.reject(new L(D.CANCELLED,o))})}),s.Oa.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield Ao(e,i.us)}})}function kR(n,t){let e=K(n),i=e.Fa.get(t);if(i&&i.wa)return nt().add(i.key);{let r=nt(),s=e.Da.get(t);if(!s)return r;for(let o of s){let c=e.ba.get(o);r=r.unionWith(c.view.Ea)}return r}}function dy(n){let t=K(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=ay.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=kR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=AR.bind(null,t),t.Sa.h_=vR.bind(null,t.eventManager),t.Sa.ka=bR.bind(null,t.eventManager),t}function PR(n){let t=K(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=SR.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=DR.bind(null,t),t}var Lc=class{constructor(){this.synchronizeTabs=!1}initialize(t){return y(this,null,function*(){this.serializer=Yc(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return XD(this.persistence,new bf,t.initialUser,this.serializer)}createPersistence(t){return new mf(gf.Hr,this.serializer)}createSharedClientState(t){return new If}terminate(){return y(this,null,function*(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Bf=class{initialize(t,e){return y(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>mb(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=xR.bind(null,this.syncEngine),yield pR(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Mf}()}createDatastore(t){let e=Yc(t.databaseInfo.databaseId),i=function(s){return new Cf(s)}(t.databaseInfo);return function(s,o,c,u){return new Df(s,o,c,u)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,r,s,o,c){return new xf(i,r,s,o,c)}(this.localStore,this.datastore,t.asyncQueue,e=>mb(this.syncEngine,e,0),function(){return xc.D()?new xc:new Ef}())}createSyncEngine(t,e){return function(r,s,o,c,u,d,f){let p=new Uf(r,s,o,c,u,d);return f&&(p.La=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return y(this,null,function*(){var t;yield function(i){return y(this,null,function*(){let r=K(i);V("RemoteStore","RemoteStore shutting down."),r.M_.add(5),yield Co(r),r.O_.shutdown(),r.N_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()})}};var zf=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):mn("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}};var $f=class{constructor(t,e,i,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Bt.UNAUTHENTICATED,this.clientId=gc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>y(this,null,function*(){V("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(V("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new L(D.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new fn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){let i=lm(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}};function vh(n,t){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),V("FirestoreClient","Initializing OfflineComponentProvider");let e=n.configuration;yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(r=>y(this,null,function*(){i.isEqual(r)||(yield Zb(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t})}function gb(n,t){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let e=yield OR(n);V("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>hb(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>hb(t.remoteStore,r)),n._onlineComponents=t})}function MR(n){return n.name==="FirebaseError"?n.code===D.FAILED_PRECONDITION||n.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function OR(n){return y(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){V("FirestoreClient","Using user provided OfflineComponentProvider");try{yield vh(n,n._uninitializedComponentsProvider._offline)}catch(t){let e=t;if(!MR(e))throw e;gr("Error using user provided cache. Falling back to memory cache: "+e),yield vh(n,new Lc)}}else V("FirestoreClient","Using default OfflineComponentProvider"),yield vh(n,new Lc);return n._offlineComponents})}function hy(n){return y(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(V("FirestoreClient","Using user provided OnlineComponentProvider"),yield gb(n,n._uninitializedComponentsProvider._online)):(V("FirestoreClient","Using default OnlineComponentProvider"),yield gb(n,new Bf))),n._onlineComponents})}function NR(n){return hy(n).then(t=>t.syncEngine)}function _b(n){return y(this,null,function*(){let t=yield hy(n),e=t.eventManager;return e.onListen=yR.bind(null,t.syncEngine),e.onUnlisten=ER.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=wR.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=TR.bind(null,t.syncEngine),e})}function fy(n){let t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}var vb=new Map;function my(n,t,e){if(!e)throw new L(D.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function FR(n,t,e,i){if(t===!0&&i===!0)throw new L(D.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function bb(n){if(!B.isDocumentKey(n))throw new L(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yb(n){if(B.isDocumentKey(n))throw new L(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function hm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":$()}function ho(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new L(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=hm(n);throw new L(D.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}var Uc=class{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new L(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new L(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}FR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fy((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new L(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new L(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new L(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},Dr=class{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new L(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new L(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uc(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new bh;switch(i.type){case"firstParty":return new Eh(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new L(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let i=vb.get(e);i&&(V("ComponentProvider","Removing Datastore"),vb.delete(e),i.terminate())}(this),Promise.resolve()}};function py(n,t,e,i={}){var r;let s=(n=ho(n,Dr))._getSettings(),o=`${t}:${e}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&gr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let c,u;if(typeof i.mockUserToken=="string")c=i.mockUserToken,u=Bt.MOCK_USER;else{c=R_(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let d=i.mockUserToken.sub||i.mockUserToken.user_id;if(!d)throw new L(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Bt(d)}n._authCredentials=new yh(new pc(c,u))}}var jc=class n{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new n(this.firestore,t,this._query)}},Ee=class n{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Un(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new n(this.firestore,t,this._key)}},Un=class n extends jc{constructor(t,e,i){super(t,e,im(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new Ee(this.firestore,null,new B(t))}withConverter(t){return new n(this.firestore,t,this._path)}};function gy(n,t,...e){if(n=ue(n),my("collection","path",t),n instanceof Dr){let i=Ct.fromString(t,...e);return yb(i),new Un(n,null,i)}{if(!(n instanceof Ee||n instanceof Un))throw new L(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Ct.fromString(t,...e));return yb(i),new Un(n.firestore,null,i)}}function _y(n,t,...e){if(n=ue(n),arguments.length===1&&(t=gc.newId()),my("doc","path",t),n instanceof Dr){let i=Ct.fromString(t,...e);return bb(i),new Ee(n,null,new B(i))}{if(!(n instanceof Ee||n instanceof Un))throw new L(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Ct.fromString(t,...e));return bb(i),new Ee(n.firestore,n instanceof Un?n.converter:null,new B(i))}}var qf=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new kc(this,"async_queue_retry"),this.hu=()=>{let e=_h();e&&V("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};let t=_h();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;let e=_h();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});let e=new fn;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}Tu(){return y(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!To(t))throw t;V("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(t){let e=this.iu.then(()=>(this.uu=!0,t().catch(i=>{this.au=i,this.uu=!1;let r=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(i);throw mn("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.uu=!1,i))));return this.iu=e,e}enqueueAfterDelay(t,e,i){this.Pu(),this.lu.indexOf(t)>-1&&(e=0);let r=kf.createAndSchedule(this,t,e,i,s=>this.Eu(s));return this._u.push(r),r}Pu(){this.au&&$()}verifyOperationInProgress(){}du(){return y(this,null,function*(){let t;do t=this.iu,yield t;while(t!==this.iu)})}Au(t){for(let e of this._u)if(e.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(let e of this._u)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){let e=this._u.indexOf(t);this._u.splice(e,1)}};function wb(n){return function(e,i){if(typeof e!="object"||e===null)return!1;let r=e;for(let s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Rr=class extends Dr{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=function(){return new qf}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||yy(this),this._firestoreClient.terminate()}};function vy(n,t){let e=typeof n=="object"?n:ir(),i=typeof n=="string"?n:t||"(default)",r=Ks(e,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=D_("firestore");s&&py(r,...s)}return r}function by(n){return n._firestoreClient||yy(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function yy(n){var t,e,i;let r=n._freezeSettings(),s=function(c,u,d,f){return new Dh(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,fy(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._firestoreClient=new $f(n._authCredentials,n._appCheckCredentials,n._queue,s),!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var yo=class n{constructor(t){this._byteString=t}static fromBase64String(t){try{return new n(se.fromBase64String(t))}catch(e){throw new L(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new n(se.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var wo=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new L(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new be(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var Bc=class{constructor(t){this._methodName=t}};var Io=class{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new L(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new L(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ct(this._lat,t._lat)||ct(this._long,t._long)}};var VR=/^__.*__$/,Hf=class{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new _n(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ai(t,this.data,e,this.fieldTransforms)}};function wy(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $()}}var Gf=class n{constructor(t,e,i,r,s,o){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new n(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.gu({path:i,yu:!1});return r.wu(t),r}Su(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return zc(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(wy(this.fu)&&VR.test(t))throw this.Du('Document fields cannot begin and end with "__"')}},Wf=class{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||Yc(t)}Fu(t,e,i,r=!1){return new Gf({fu:t,methodName:e,vu:i,path:be.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function LR(n){let t=n._freezeSettings(),e=Yc(n._databaseId);return new Wf(n._databaseId,!!t.ignoreUndefinedProperties,e)}function UR(n,t,e,i,r,s={}){let o=n.Fu(s.merge||s.mergeFields?2:0,t,e,r);Cy("Data must be an object, but it was:",o,i);let c=Ey(i,o),u,d;if(s.merge)u=new $e(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let f=[];for(let p of s.mergeFields){let b=jR(t,p,e);if(!o.contains(b))throw new L(D.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);zR(f,b)||f.push(b)}u=new $e(f),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new Hf(new Pe(c),u,d)}function Iy(n,t){if(Ty(n=ue(n)))return Cy("Unsupported field value:",t,n),Ey(n,t);if(n instanceof Bc)return function(i,r){if(!wy(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let c of i){let u=Iy(c,r.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,t)}return function(i,r){if((i=ue(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return CD(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=Ht.fromDate(i);return{timestampValue:Sc(r.serializer,s)}}if(i instanceof Ht){let s=new Ht(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Sc(r.serializer,s)}}if(i instanceof Io)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof yo)return{bytesValue:Hb(r.serializer,i._byteString)};if(i instanceof Ee){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:rm(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${hm(i)}`)}(n,t)}function Ey(n,t){let e={};return Eb(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):kr(n,(i,r)=>{let s=Iy(r,t.pu(i));s!=null&&(e[i]=s)}),{mapValue:{fields:e}}}function Ty(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ht||n instanceof Io||n instanceof yo||n instanceof Ee||n instanceof Bc)}function Cy(n,t,e){if(!Ty(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){let i=hm(e);throw i==="an object"?t.Du(n+" a custom object"):t.Du(n+" "+i)}}function jR(n,t,e){if((t=ue(t))instanceof wo)return t._internalPath;if(typeof t=="string")return Ay(n,t);throw zc("Field path arguments must be of type string or ",n,!1,void 0,e)}var BR=new RegExp("[~\\*/\\[\\]]");function Ay(n,t,e){if(t.search(BR)>=0)throw zc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new wo(...t.split("."))._internalPath}catch{throw zc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function zc(n,t,e,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,c=`Function ${t}() called with invalid data`;e&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${i}`),o&&(u+=` in document ${r}`),u+=")"),new L(D.INVALID_ARGUMENT,c+n+u)}function zR(n,t){return n.some(e=>e.isEqual(t))}var $c=class{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ee(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new Kf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let e=this._document.data.field(Sy("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}},Kf=class extends $c{data(){return super.data()}};function Sy(n,t){return typeof t=="string"?Ay(n,t):t instanceof wo?t._internalPath:t._delegate._internalPath}function $R(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new L(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Yf=class{convertValue(t,e="none"){switch(Ei(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Tt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(jn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw $()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){let i={};return kr(t,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new Io(Tt(t.latitude),Tt(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":let i=Jf(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(mo(t));default:return null}}convertTimestamp(t){let e=pn(t);return new Ht(e.seconds,e.nanos)}convertDocumentKey(t,e){let i=Ct.fromString(t);pt(Xb(i));let r=new yc(i.get(1),i.get(3)),s=new B(i.popFirst(5));return r.isEqual(e)||mn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}};function qR(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}var bi=class{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},qc=class extends $c{constructor(t,e,i,r,s,o){super(t,e,i,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let e=new pr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){let i=this._document.data.field(Sy("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}},pr=class extends qc{data(t={}){return super.data(t)}},Qf=class{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new bi(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new pr(this._firestore,this._userDataWriter,i.key,i,new bi(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new L(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>{let u=new pr(r._firestore,r._userDataWriter,c.doc.key,c.doc,new bi(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let u=new pr(r._firestore,r._userDataWriter,c.doc.key,c.doc,new bi(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:HR(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}};function HR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $()}}var Hc=class extends Yf{constructor(t){super(),this.firestore=t}convertBytes(t){return new yo(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ee(this.firestore,null,e)}};function Dy(n,t){let e=ho(n.firestore,Rr),i=_y(n),r=qR(n.converter,t);return GR(e,[UR(LR(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,yi.exists(!1))]).then(()=>i)}function fm(n,...t){var e,i,r;n=ue(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||wb(t[o])||(s=t[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(wb(t[o])){let p=t[o];t[o]=(e=p.next)===null||e===void 0?void 0:e.bind(p),t[o+1]=(i=p.error)===null||i===void 0?void 0:i.bind(p),t[o+2]=(r=p.complete)===null||r===void 0?void 0:r.bind(p)}let u,d,f;if(n instanceof Ee)d=ho(n.firestore,Rr),f=im(n._key.path),u={next:p=>{t[o]&&t[o](WR(d,n,p))},error:t[o+1],complete:t[o+2]};else{let p=ho(n,jc);d=ho(p.firestore,Rr),f=p._query;let b=new Hc(d);u={next:A=>{t[o]&&t[o](new Qf(d,b,p,A))},error:t[o+1],complete:t[o+2]},$R(n._query)}return function(b,A,R,M){let k=new zf(M),z=new Nf(A,k,R);return b.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return gR(yield _b(b),z)})),()=>{k.$a(),b.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return _R(yield _b(b),z)}))}}(by(d),f,c,u)}function GR(n,t){return function(i,r){let s=new fn;return i.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return CR(yield NR(i),r,s)})),s.promise}(by(n),t)}function WR(n,t,e){let i=e.docs.get(t._key),r=new Hc(n);return new qc(n,r,t._key,i,new bi(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(r){xr=r})(On),Mn(new Ie("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),c=new Rr(new wh(i.getProvider("auth-internal")),new Ch(i.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new L(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yc(d.options.projectId,f)}(o,r),o);return s=Object.assign({useFetchStreams:e},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Lt(Gv,"4.6.2",t),Lt(Gv,"4.6.2","esm2017")})();var Zc=function(){return Zc=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++){e=arguments[i];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Zc.apply(this,arguments)};var XR={includeMetadataChanges:!1};function Ry(n,t){return t===void 0&&(t=XR),new Fe(function(e){var i=fm(n,t,{next:e.next.bind(e),error:e.error.bind(e),complete:e.complete.bind(e)});return{unsubscribe:i}})}function xy(n,t){var e;t===void 0&&(t={});var i=n.data(t);return!n.exists()||typeof i!="object"||i===null||!t.idField?i:Zc(Zc({},i),(e={},e[t.idField]=n.id,e))}function ky(n){return Ry(n,{includeMetadataChanges:!0}).pipe(tt(function(t){return t.docs}))}function Py(n,t){return t===void 0&&(t={}),ky(n).pipe(tt(function(e){return e.map(function(i){return xy(i,t)})}))}var Di=class{constructor(t){return t}},My="firestore",mm=class{constructor(){return Ys(My)}};var pm=new J("angularfire2.firestore-instances");function ZR(n,t){let e=$a(My,n,t);return e&&new Di(e)}function JR(n){return(t,e)=>{let i=t.runOutsideAngular(()=>n(e));return new Di(i)}}var tx={provide:mm,deps:[[new ce,pm]]},ex={provide:Di,useFactory:ZR,deps:[[new ce,pm],ln]};function Oy(n,...t){return Lt("angularfire",di.full,"fst"),Se([ex,tx,{provide:pm,useFactory:JR(n),multi:!0,deps:[G,le,or,hi,[new ce,io],[new ce,sr],...t]}])}var Ny=cn(Py,!0);var Fy=cn(Dy,!0);var gm=cn(gy,!0);var Vy=cn(vy,!0);var Ly=(()=>{let t=class t{constructor(i,r,s){this.router=i,this.activatedRoute=r,this.firestore=s,this.users=[{userId:1,nombre:"gonzalo",clave:"123"},{userId:2,nombre:"ale",clave:"456"}],this.user={userId:0,nombre:"",clave:""},this.loginsCollection=[],this.countLogins=0}ngOnInit(){}Login(){this.GetUser()?this.router.navigate(["home"]):alert("Usuario o clave incorrecta")}LoginLog(){let i=gm(this.firestore,"logins");Fy(i,{fecha:new Date,user:this.user})}GetData(){debugger;let i=gm(this.firestore,"logins"),r=Ny(i);this.sub=r.subscribe(s=>{console.log(s)})}GetUsers(){let i=localStorage.getItem("users");this.users=JSON.parse(i)}GetUser(){this.GetData();let i=!1;for(let r=0;r<this.loginsCollection.length;r++)this.loginsCollection[r].nombre==this.user.nombre&&this.loginsCollection[r].clave==this.user.clave&&(i=!0);return i}};t.\u0275fac=function(r){return new(r||t)(F(js),F(sn),F(Di))},t.\u0275cmp=vt({type:t,selectors:[["app-login"]],standalone:!0,features:[wt],decls:47,vars:2,consts:[[1,"login-wrap"],[1,"login-html"],["id","tab-1","type","radio","name","tab","checked","",1,"sign-in"],["for","tab-1",1,"tab"],["id","tab-2","type","radio","name","tab",1,"sign-up"],["for","tab-2",1,"tab"],[1,"login-form"],[1,"sign-in-htm"],[1,"group"],["for","user",1,"label"],["id","user","type","text",1,"input",3,"ngModelChange","ngModel"],["for","pass",1,"label"],["id","pass","type","password","data-type","password",1,"input",3,"ngModelChange","ngModel"],["type","button","value","Sign In",1,"button",3,"click"],[1,"hr"],[1,"foot-lnk"],["href","#forgot"],[1,"sign-up-htm"],["id","user","type","text",1,"input"],["id","pass","type","password","data-type","password",1,"input"],["id","pass","type","text",1,"input"],["type","submit","value","Sign Up",1,"button"],["for","tab-1"]],template:function(r,s){r&1&&(Q(0,"div",0)(1,"div",1),kt(2,"input",2),Q(3,"label",3),yt(4,"Sign In"),W(),kt(5,"input",4),Q(6,"label",5),yt(7,"Sign Up"),W(),Q(8,"div",6)(9,"div",7)(10,"div",8)(11,"label",9),yt(12,"Username"),W(),Q(13,"input",10),Jl("ngModelChange",function(c){return Zl(s.user.nombre,c)||(s.user.nombre=c),c}),W()(),Q(14,"div",8)(15,"label",11),yt(16,"Password"),W(),Q(17,"input",12),Jl("ngModelChange",function(c){return Zl(s.user.clave,c)||(s.user.clave=c),c}),W()(),Q(18,"div",8)(19,"input",13),Re("click",function(){return s.Login()}),W()(),kt(20,"div",14),Q(21,"div",15)(22,"a",16),yt(23,"Forgot Password?"),W()()(),Q(24,"div",17)(25,"div",8)(26,"label",9),yt(27,"Username"),W(),kt(28,"input",18),W(),Q(29,"div",8)(30,"label",11),yt(31,"Password"),W(),kt(32,"input",19),W(),Q(33,"div",8)(34,"label",11),yt(35,"Repeat Password"),W(),kt(36,"input",19),W(),Q(37,"div",8)(38,"label",11),yt(39,"Email Address"),W(),kt(40,"input",20),W(),Q(41,"div",8),kt(42,"input",21),W(),kt(43,"div",14),Q(44,"div",15)(45,"label",22),yt(46,"Already Member?"),W()()()()()()),r&2&&(en(13),Xl("ngModel",s.user.nombre),en(4),Xl("ngModel",s.user.clave))},dependencies:[T_,Na,w_,ed],styles:['body[_ngcontent-%COMP%]{margin:0;color:#6a6f8c;background:#c8c8c8;font:600 16px/18px Open Sans,sans-serif}*[_ngcontent-%COMP%], [_ngcontent-%COMP%]:after, [_ngcontent-%COMP%]:before{box-sizing:border-box}.clearfix[_ngcontent-%COMP%]:after, .clearfix[_ngcontent-%COMP%]:before{content:"";display:table}.clearfix[_ngcontent-%COMP%]:after{clear:both;display:block}a[_ngcontent-%COMP%]{color:inherit;text-decoration:none}.login-wrap[_ngcontent-%COMP%]{width:100%;margin:auto;max-width:525px;min-height:540px;position:relative;background:url("./media/Dolares-YTLEJ2AY.jpg") no-repeat;box-shadow:0 12px 15px #0000003d,0 17px 50px #00000030}.login-html[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;padding:90px 70px 50px;background:#286535e6}.login-html[_ngcontent-%COMP%]   .sign-in-htm[_ngcontent-%COMP%], .login-html[_ngcontent-%COMP%]   .sign-up-htm[_ngcontent-%COMP%]{inset:0;position:absolute;transform:rotateY(180deg);backface-visibility:hidden;transition:all .4s linear}.login-html[_ngcontent-%COMP%]   .sign-in[_ngcontent-%COMP%], .login-html[_ngcontent-%COMP%]   .sign-up[_ngcontent-%COMP%], .login-form[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]{display:none}.login-html[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%], .login-form[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .login-form[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{text-transform:uppercase}.login-html[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{font-size:22px;padding-bottom:5px;margin:0 15px 10px 0;display:inline-block;border-bottom:2px solid transparent}.login-html[_ngcontent-%COMP%]   .sign-in[_ngcontent-%COMP%]:checked + .tab[_ngcontent-%COMP%], .login-html[_ngcontent-%COMP%]   .sign-up[_ngcontent-%COMP%]:checked + .tab[_ngcontent-%COMP%]{color:#fff;border-color:#1161ee}.login-form[_ngcontent-%COMP%]{min-height:345px;position:relative;perspective:1000px;transform-style:preserve-3d}.login-form[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{margin-bottom:15px}.login-form[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .login-form[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%], .login-form[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{width:100%;color:#fff;display:block}.login-form[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%], .login-form[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{border:none;padding:15px 20px;border-radius:25px;background:#ffffff1a}.login-form[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   input[data-type=password][_ngcontent-%COMP%]{-webkit-text-security:circle}.login-form[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#aaa;font-size:12px}.login-form[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{background:#1161ee}.login-form[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:15px;height:15px;border-radius:2px;position:relative;display:inline-block;background:#ffffff1a}.login-html[_ngcontent-%COMP%]   .sign-in[_ngcontent-%COMP%]:checked + .tab[_ngcontent-%COMP%] + .sign-up[_ngcontent-%COMP%] + .tab[_ngcontent-%COMP%] + .login-form[_ngcontent-%COMP%]   .sign-in-htm[_ngcontent-%COMP%]{transform:rotate(0)}.login-html[_ngcontent-%COMP%]   .sign-up[_ngcontent-%COMP%]:checked + .tab[_ngcontent-%COMP%] + .login-form[_ngcontent-%COMP%]   .sign-up-htm[_ngcontent-%COMP%]{transform:rotate(0)}.hr[_ngcontent-%COMP%]{height:2px;margin:60px 0 50px;background:#fff3}.foot-lnk[_ngcontent-%COMP%]{text-align:center}']});let n=t;return n})();var Uy=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=vt({type:t,selectors:[["app-page-not-found"]],standalone:!0,features:[wt],decls:2,vars:0,template:function(r,s){r&1&&(Q(0,"p"),yt(1,"Ruta no encontrada"),W())}});let n=t;return n})();var vm;try{vm=typeof Intl<"u"&&Intl.v8BreakIterator}catch{vm=!1}var jt=(()=>{let t=class t{constructor(i){this._platformId=i,this.isBrowser=this._platformId?mg(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||vm)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};t.\u0275fac=function(r){return new(r||t)(x(tn))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var So;function ix(){if(So==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>So=!0}))}finally{So=So||!1}return So}function Mr(n){return ix()?n:!!n.capture}var Oe=function(n){return n[n.NORMAL=0]="NORMAL",n[n.NEGATED=1]="NEGATED",n[n.INVERTED=2]="INVERTED",n}(Oe||{}),Jc,Ri;function tl(){if(Ri==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Ri=!1,Ri;if("scrollBehavior"in document.documentElement.style)Ri=!0;else{let n=Element.prototype.scrollTo;n?Ri=!/\{\s*\[native code\]\s*\}/.test(n.toString()):Ri=!1}}return Ri}function Or(){if(typeof document!="object"||!document)return Oe.NORMAL;if(Jc==null){let n=document.createElement("div"),t=n.style;n.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";let e=document.createElement("div"),i=e.style;i.width="2px",i.height="1px",n.appendChild(e),document.body.appendChild(n),Jc=Oe.NORMAL,n.scrollLeft===0&&(n.scrollLeft=1,Jc=n.scrollLeft===0?Oe.NEGATED:Oe.INVERTED),n.remove()}return Jc}var _m;function rx(){if(_m==null){let n=typeof document<"u"?document.head:null;_m=!!(n&&(n.createShadowRoot||n.attachShadow))}return _m}function jy(n){if(rx()){let t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Ne(n){return n.composedPath?n.composedPath()[0]:n.target}function Do(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function By(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function $n(n){return n!=null&&`${n}`!="false"}function xo(n,t=0){return sx(n)?Number(n):t}function sx(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function Nr(n){return Array.isArray(n)?n:[n]}function Dt(n){return n==null?"":typeof n=="string"?n:`${n}px`}function vn(n){return n instanceof bt?n.nativeElement:n}var zy=new Set,xi,ox=(()=>{let t=class t{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):cx}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&ax(i,this._nonce),this._matchMedia(i)}};t.\u0275fac=function(r){return new(r||t)(x(jt),x(fs,8))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function ax(n,t){if(!zy.has(n))try{xi||(xi=document.createElement("style"),t&&xi.setAttribute("nonce",t),xi.setAttribute("type","text/css"),document.head.appendChild(xi)),xi.sheet&&(xi.sheet.insertRule(`@media ${n} {body{ }}`,0),zy.add(n))}catch(e){console.error(e)}}function cx(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var qy=(()=>{let t=class t{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new at}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return $y(Nr(i)).some(s=>this._registerQuery(s).mql.matches)}observe(i){let s=$y(Nr(i)).map(c=>this._registerQuery(c).observable),o=as(s);return o=Xo(o.pipe(ie(1)),o.pipe(ta(1),us(0))),o.pipe(tt(c=>{let u={matches:!1,breakpoints:{}};return c.forEach(({matches:d,query:f})=>{u.matches=u.matches||d,u.breakpoints[f]=d}),u}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),o={observable:new Fe(c=>{let u=d=>this._zone.run(()=>c.next(d));return r.addListener(u),()=>{r.removeListener(u)}}).pipe(Ze(r),tt(({matches:c})=>({query:i,matches:c})),Rt(this._destroySubject)),mql:r};return this._queries.set(i,o),o}};t.\u0275fac=function(r){return new(r||t)(x(ox),x(G))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function $y(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var wm=(()=>{let t=class t{constructor(i){this._platform=i}isDisabled(i){return i.hasAttribute("disabled")}isVisible(i){return ux(i)&&getComputedStyle(i).visibility==="visible"}isTabbable(i){if(!this._platform.isBrowser)return!1;let r=lx(vx(i));if(r&&(Hy(r)===-1||!this.isVisible(r)))return!1;let s=i.nodeName.toLowerCase(),o=Hy(i);return i.hasAttribute("contenteditable")?o!==-1:s==="iframe"||s==="object"||this._platform.WEBKIT&&this._platform.IOS&&!gx(i)?!1:s==="audio"?i.hasAttribute("controls")?o!==-1:!1:s==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||i.hasAttribute("controls"):i.tabIndex>=0}isFocusable(i,r){return _x(i)&&!this.isDisabled(i)&&(r?.ignoreVisibility||this.isVisible(i))}};t.\u0275fac=function(r){return new(r||t)(x(jt))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function lx(n){try{return n.frameElement}catch{return null}}function ux(n){return!!(n.offsetWidth||n.offsetHeight||typeof n.getClientRects=="function"&&n.getClientRects().length)}function dx(n){let t=n.nodeName.toLowerCase();return t==="input"||t==="select"||t==="button"||t==="textarea"}function hx(n){return mx(n)&&n.type=="hidden"}function fx(n){return px(n)&&n.hasAttribute("href")}function mx(n){return n.nodeName.toLowerCase()=="input"}function px(n){return n.nodeName.toLowerCase()=="a"}function Ky(n){if(!n.hasAttribute("tabindex")||n.tabIndex===void 0)return!1;let t=n.getAttribute("tabindex");return!!(t&&!isNaN(parseInt(t,10)))}function Hy(n){if(!Ky(n))return null;let t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}function gx(n){let t=n.nodeName.toLowerCase(),e=t==="input"&&n.type;return e==="text"||e==="password"||t==="select"||t==="textarea"}function _x(n){return hx(n)?!1:dx(n)||fx(n)||n.hasAttribute("contenteditable")||Ky(n)}function vx(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}var ym=class{get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}constructor(t,e,i,r,s=!1){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){let t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return t=="start"?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){let e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){let i=this._getFirstTabbableElement(e);return i?.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){let e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){let e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let i=0;i<e.length;i++){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let i=e.length-1;i>=0;i--){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){let t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(ie(1)).subscribe(t)}},Yy=(()=>{let t=class t{constructor(i,r,s){this._checker=i,this._ngZone=r,this._document=s}create(i,r=!1){return new ym(i,this._checker,this._ngZone,this._document,r)}};t.\u0275fac=function(r){return new(r||t)(x(wm),x(G),x(it))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function Im(n){return n.buttons===0||n.detail===0}function Em(n){let t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var bx=new J("cdk-input-modality-detector-options"),yx={ignoreKeys:[18,17,224,91,16]},Qy=650,Fr=Mr({passive:!0,capture:!0}),wx=(()=>{let t=class t{get mostRecentModality(){return this._modality.value}constructor(i,r,s,o){this._platform=i,this._mostRecentTarget=null,this._modality=new oe(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(u=>u===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Ne(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<Qy||(this._modality.next(Im(c)?"keyboard":"mouse"),this._mostRecentTarget=Ne(c))},this._onTouchstart=c=>{if(Em(c)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ne(c)},this._options=N(N({},yx),o),this.modalityDetected=this._modality.pipe(ta(1)),this.modalityChanged=this.modalityDetected.pipe(Ui()),i.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,Fr),s.addEventListener("mousedown",this._onMousedown,Fr),s.addEventListener("touchstart",this._onTouchstart,Fr)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Fr),document.removeEventListener("mousedown",this._onMousedown,Fr),document.removeEventListener("touchstart",this._onTouchstart,Fr))}};t.\u0275fac=function(r){return new(r||t)(x(jt),x(G),x(it),x(bx,8))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var nl=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(nl||{}),Ix=new J("cdk-focus-monitor-default-options"),el=Mr({passive:!0,capture:!0}),Xy=(()=>{let t=class t{constructor(i,r,s,o,c){this._ngZone=i,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new at,this._rootNodeFocusAndBlurListener=u=>{let d=Ne(u);for(let f=d;f;f=f.parentElement)u.type==="focus"?this._onFocus(u,f):this._onBlur(u,f)},this._document=o,this._detectionMode=c?.detectionMode||nl.IMMEDIATE}monitor(i,r=!1){let s=vn(i);if(!this._platform.isBrowser||s.nodeType!==1)return q();let o=jy(s)||this._getDocument(),c=this._elementInfo.get(s);if(c)return r&&(c.checkChildren=!0),c.subject;let u={checkChildren:r,subject:new at,rootNode:o};return this._elementInfo.set(s,u),this._registerGlobalListeners(u),u.subject}stopMonitoring(i){let r=vn(i),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(i,r,s){let o=vn(i),c=this._getDocument().activeElement;o===c?this._getClosestElementsInfo(o).forEach(([u,d])=>this._originChanged(u,r,d)):(this._setOrigin(r),typeof o.focus=="function"&&o.focus(s))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===nl.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===nl.IMMEDIATE){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?Qy:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(i,r){let s=this._elementInfo.get(r),o=Ne(i);!s||!s.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),s)}_onBlur(i,r){let s=this._elementInfo.get(r);!s||s.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(s,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,el),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,el)}),this._rootNodeFocusListenerCount.set(r,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Rt(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,el),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,el),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,s){this._setClasses(i,r),this._emitOrigin(s,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((s,o)=>{(o===i||s.checkChildren&&o.contains(i))&&r.push([o,s])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let o=i.labels;if(o){for(let c=0;c<o.length;c++)if(o[c].contains(r))return!0}return!1}};t.\u0275fac=function(r){return new(r||t)(x(G),x(jt),x(wx),x(it,8),x(Ix,8))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var ki=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(ki||{}),Gy="cdk-high-contrast-black-on-white",Wy="cdk-high-contrast-white-on-black",bm="cdk-high-contrast-active",Zy=(()=>{let t=class t{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=j(qy).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return ki.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(i):null,o=(s&&s.backgroundColor||"").replace(/ /g,"");switch(i.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return ki.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return ki.BLACK_ON_WHITE}return ki.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(bm,Gy,Wy),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===ki.BLACK_ON_WHITE?i.add(bm,Gy):r===ki.WHITE_ON_BLACK&&i.add(bm,Wy)}}};t.\u0275fac=function(r){return new(r||t)(x(jt),x(it))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Ex=new J("cdk-dir-doc",{providedIn:"root",factory:Tx});function Tx(){return j(it)}var Cx=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function Ax(n){let t=n?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?Cx.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var Vr=(()=>{let t=class t{constructor(i){if(this.value="ltr",this.change=new xt,i){let r=i.body?i.body.dir:null,s=i.documentElement?i.documentElement.dir:null;this.value=Ax(r||s||"ltr")}}ngOnDestroy(){this.change.complete()}};t.\u0275fac=function(r){return new(r||t)(x(Ex,8))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var qn=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ut({type:t}),t.\u0275inj=lt({});let n=t;return n})();function Dx(){return!0}var Rx=new J("mat-sanity-checks",{providedIn:"root",factory:Dx}),Gt=(()=>{let t=class t{constructor(i,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return Do()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};t.\u0275fac=function(r){return new(r||t)(x(Zy),x(Rx,8),x(it))},t.\u0275mod=ut({type:t}),t.\u0275inj=lt({imports:[qn,qn]});let n=t;return n})();var Te=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Te||{}),Cm=class{constructor(t,e,i,r=!1){this._renderer=t,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=Te.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},tw=Mr({passive:!0,capture:!0}),Am=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let e=Ne(t);e&&this._events.get(t.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(s=>s.handleEvent(t))})}}addHandler(t,e,i,r){let s=this._events.get(e);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,tw)})}removeHandler(t,e,i){let r=this._events.get(t);if(!r)return;let s=r.get(e);s&&(s.delete(i),s.size===0&&r.delete(e),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,tw)))}},ew={enterDuration:225,exitDuration:150},xx=800,nw=Mr({passive:!0,capture:!0}),iw=["mousedown","touchstart"],rw=["mouseup","mouseleave","touchend","touchcancel"],ko=class ko{constructor(t,e,i,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=vn(i))}fadeInRipple(t,e,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=N(N({},ew),i.animation);i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);let o=i.radius||kx(t,e,r),c=t-r.left,u=e-r.top,d=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=`${c-o}px`,f.style.top=`${u-o}px`,f.style.height=`${o*2}px`,f.style.width=`${o*2}px`,i.color!=null&&(f.style.backgroundColor=i.color),f.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(f);let p=window.getComputedStyle(f),b=p.transitionProperty,A=p.transitionDuration,R=b==="none"||A==="0s"||A==="0s, 0s"||r.width===0&&r.height===0,M=new Cm(this,f,i,R);f.style.transform="scale3d(1, 1, 1)",M.state=Te.FADING_IN,i.persistent||(this._mostRecentTransientRipple=M);let k=null;return!R&&(d||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let z=()=>this._finishRippleTransition(M),Z=()=>this._destroyRipple(M);f.addEventListener("transitionend",z),f.addEventListener("transitioncancel",Z),k={onTransitionEnd:z,onTransitionCancel:Z}}),this._activeRipples.set(M,k),(R||!d)&&this._finishRippleTransition(M),M}fadeOutRipple(t){if(t.state===Te.FADING_OUT||t.state===Te.HIDDEN)return;let e=t.element,i=N(N({},ew),t.config.animation);e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=Te.FADING_OUT,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=vn(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,iw.forEach(i=>{ko._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{rw.forEach(e=>{this._triggerElement.addEventListener(e,this,nw)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===Te.FADING_IN?this._startFadeOutTransition(t):t.state===Te.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=Te.VISIBLE,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=Te.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){let e=Im(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+xx;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Em(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===Te.VISIBLE||t.config.terminateOnPointerUp&&t.state===Te.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(iw.forEach(e=>ko._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&rw.forEach(e=>t.removeEventListener(e,this,nw)))}};ko._eventManager=new Am;var sw=ko;function kx(n,t,e){let i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}var il=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ut({type:t}),t.\u0275inj=lt({imports:[Gt,Gt]});let n=t;return n})();var Po=class{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},Sm=class extends Po{constructor(t,e,i,r,s){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}},rl=class extends Po{constructor(t,e,i,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}},Dm=class extends Po{constructor(t){super(),this.element=t instanceof bt?t.nativeElement:t}},Rm=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof Sm)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof rl)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof Dm)return this._attachedPortal=t,this.attachDomPortal(t)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var sl=class extends Rm{constructor(t,e,i,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{this._document;let c=o.element;c.parentNode;let u=this._document.createComment("dom-portal");c.parentNode.insertBefore(u,c),this.outletElement.appendChild(c),this._attachedPortal=o,super.setDisposeFn(()=>{u.parentNode&&u.parentNode.replaceChild(c,u)})},this._document=s}attachComponentPortal(t){let i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||le.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);r!==-1&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var ow=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ut({type:t}),t.\u0275inj=lt({});let n=t;return n})();var Px=20,Lr=(()=>{let t=class t{constructor(i,r,s){this._ngZone=i,this._platform=r,this._scrolled=new at,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=Px){return this._platform.isBrowser?new Fe(r=>{this._globalSubscription||this._addGlobalListener();let s=i>0?this._scrolled.pipe(Hl(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):q()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){let s=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(Ot(o=>!o||s.indexOf(o)>-1))}getAncestorScrollContainers(i){let r=[];return this.scrollContainers.forEach((s,o)=>{this._scrollableContainsElement(o,i)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let s=vn(r),o=i.getElementRef().nativeElement;do if(s==o)return!0;while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let i=this._getWindow();return cs(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};t.\u0275fac=function(r){return new(r||t)(x(G),x(jt),x(it,8))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),Ur=(()=>{let t=class t{constructor(i,r,s,o){this.elementRef=i,this.scrollDispatcher=r,this.ngZone=s,this.dir=o,this._destroyed=new at,this._elementScrolled=new Fe(c=>this.ngZone.runOutsideAngular(()=>cs(this.elementRef.nativeElement,"scroll").pipe(Rt(this._destroyed)).subscribe(c)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(i){let r=this.elementRef.nativeElement,s=this.dir&&this.dir.value=="rtl";i.left==null&&(i.left=s?i.end:i.start),i.right==null&&(i.right=s?i.start:i.end),i.bottom!=null&&(i.top=r.scrollHeight-r.clientHeight-i.bottom),s&&Or()!=Oe.NORMAL?(i.left!=null&&(i.right=r.scrollWidth-r.clientWidth-i.left),Or()==Oe.INVERTED?i.left=i.right:Or()==Oe.NEGATED&&(i.left=i.right?-i.right:i.right)):i.right!=null&&(i.left=r.scrollWidth-r.clientWidth-i.right),this._applyScrollToOptions(i)}_applyScrollToOptions(i){let r=this.elementRef.nativeElement;tl()?r.scrollTo(i):(i.top!=null&&(r.scrollTop=i.top),i.left!=null&&(r.scrollLeft=i.left))}measureScrollOffset(i){let r="left",s="right",o=this.elementRef.nativeElement;if(i=="top")return o.scrollTop;if(i=="bottom")return o.scrollHeight-o.clientHeight-o.scrollTop;let c=this.dir&&this.dir.value=="rtl";return i=="start"?i=c?s:r:i=="end"&&(i=c?r:s),c&&Or()==Oe.INVERTED?i==r?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:c&&Or()==Oe.NEGATED?i==r?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:i==r?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}};t.\u0275fac=function(r){return new(r||t)(F(bt),F(Lr),F(G),F(Vr,8))},t.\u0275dir=Ft({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0});let n=t;return n})(),Mx=20,Mo=(()=>{let t=class t{constructor(i,r,s){this._platform=i,this._change=new at,this._changeListener=o=>{this._change.next(o)},this._document=s,r.runOutsideAngular(()=>{if(i.isBrowser){let o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:s}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+s,right:i.left+r,height:s,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),s=i.documentElement,o=s.getBoundingClientRect(),c=-o.top||i.body.scrollTop||r.scrollY||s.scrollTop||0,u=-o.left||i.body.scrollLeft||r.scrollX||s.scrollLeft||0;return{top:c,left:u}}change(i=Mx){return i>0?this._change.pipe(Hl(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};t.\u0275fac=function(r){return new(r||t)(x(jt),x(G),x(it,8))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Pi=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ut({type:t}),t.\u0275inj=lt({});let n=t;return n})(),xm=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ut({type:t}),t.\u0275inj=lt({imports:[qn,Pi,qn,Pi]});let n=t;return n})();var cw=tl(),km=class{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Dt(-this._previousScrollPosition.left),t.style.top=Dt(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,e=this._document.body,i=t.style,r=e.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),cw&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),cw&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}};var Pm=class{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(Ot(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},al=class{enable(){}disable(){}attach(){}};function Mm(n,t){return t.some(e=>{let i=n.bottom<e.top,r=n.top>e.bottom,s=n.right<e.left,o=n.left>e.right;return i||r||s||o})}function lw(n,t){return t.some(e=>{let i=n.top<e.top,r=n.bottom>e.bottom,s=n.left<e.left,o=n.right>e.right;return i||r||s||o})}var Om=class{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();Mm(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Ox=(()=>{let t=class t{constructor(i,r,s,o){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=s,this.noop=()=>new al,this.close=c=>new Pm(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new km(this._viewportRuler,this._document),this.reposition=c=>new Om(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=o}};t.\u0275fac=function(r){return new(r||t)(x(Lr),x(Mo),x(G),x(it))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),cl=class{constructor(t){if(this.scrollStrategy=new al,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){let e=Object.keys(t);for(let i of e)t[i]!==void 0&&(this[i]=t[i])}}};var Nm=class{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}};var mw=(()=>{let t=class t{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};t.\u0275fac=function(r){return new(r||t)(x(it))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),Nx=(()=>{let t=class t extends mw{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=s=>{let o=this._attachedOverlays;for(let c=o.length-1;c>-1;c--)if(o[c]._keydownEvents.observers.length>0){let u=o[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>u.next(s)):u.next(s);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};t.\u0275fac=function(r){return new(r||t)(x(it),x(G,8))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),Fx=(()=>{let t=class t extends mw{constructor(i,r,s){super(i),this._platform=r,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=Ne(o)},this._clickListener=o=>{let c=Ne(o),u=o.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;let d=this._attachedOverlays.slice();for(let f=d.length-1;f>-1;f--){let p=d[f];if(p._outsidePointerEvents.observers.length<1||!p.hasAttached())continue;if(p.overlayElement.contains(c)||p.overlayElement.contains(u))break;let b=p._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>b.next(o)):b.next(o)}}}add(i){if(super.add(i),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}};t.\u0275fac=function(r){return new(r||t)(x(it),x(jt),x(G,8))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),pw=(()=>{let t=class t{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||Do()){let s=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let o=0;o<s.length;o++)s[o].remove()}let r=this._document.createElement("div");r.classList.add(i),Do()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};t.\u0275fac=function(r){return new(r||t)(x(it),x(jt))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),Fm=class{constructor(t,e,i,r,s,o,c,u,d,f=!1){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=c,this._location=u,this._outsideClickDispatcher=d,this._animationsDisabled=f,this._backdropElement=null,this._backdropClick=new at,this._attachments=new at,this._detachments=new at,this._locationChanges=Yn.EMPTY,this._backdropClickHandler=p=>this._backdropClick.next(p),this._backdropTransitionendHandler=p=>{this._disposeBackdrop(p.target)},this._keydownEvents=new at,this._outsidePointerEvents=new at,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(ie(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=N(N({},this._config),t),this._updateElementSize()}setDirection(t){this._config=mt(N({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=Dt(this._config.width),t.height=Dt(this._config.height),t.minWidth=Dt(this._config.minWidth),t.minHeight=Dt(this._config.minHeight),t.maxWidth=Dt(this._config.maxWidth),t.maxHeight=Dt(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t=this._backdropElement;if(t){if(this._animationsDisabled){this._disposeBackdrop(t);return}t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,i){let r=Nr(e||[]).filter(s=>!!s);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let t=this._ngZone.onStable.pipe(Rt(Zo(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},uw="cdk-overlay-connected-position-bounding-box",Vx=/([A-Za-z%]+)$/,Vm=class{get positions(){return this._preferredPositions}constructor(t,e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new at,this._resizeSubscription=Yn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(uw),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[],o;for(let c of this._preferredPositions){let u=this._getOriginPoint(t,r,c),d=this._getOverlayPoint(u,e,c),f=this._getOverlayFit(d,e,i,c);if(f.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(c,u);return}if(this._canFitWithFlexibleDimensions(f,d,i)){s.push({position:c,origin:u,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(u,c)});continue}(!o||o.overlayFit.visibleArea<f.visibleArea)&&(o={overlayFit:f,overlayPoint:d,originPoint:u,position:c,overlayRect:e})}if(s.length){let c=null,u=-1;for(let d of s){let f=d.boundingBoxRect.width*d.boundingBoxRect.height*(d.position.weight||1);f>u&&(u=f,c=d)}this._isPushed=!1,this._applyPosition(c.position,c.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Mi(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(uw),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r;if(i.originX=="center")r=t.left+t.width/2;else{let o=this._isRtl()?t.right:t.left,c=this._isRtl()?t.left:t.right;r=i.originX=="start"?o:c}e.left<0&&(r-=e.left);let s;return i.originY=="center"?s=t.top+t.height/2:s=i.originY=="top"?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,i){let r;i.overlayX=="center"?r=-e.width/2:i.overlayX==="start"?r=this._isRtl()?-e.width:0:r=this._isRtl()?0:-e.width;let s;return i.overlayY=="center"?s=-e.height/2:s=i.overlayY=="top"?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,i,r){let s=hw(e),{x:o,y:c}=t,u=this._getOffset(r,"x"),d=this._getOffset(r,"y");u&&(o+=u),d&&(c+=d);let f=0-o,p=o+s.width-i.width,b=0-c,A=c+s.height-i.height,R=this._subtractOverflows(s.width,f,p),M=this._subtractOverflows(s.height,b,A),k=R*M;return{visibleArea:k,isCompletelyWithinViewport:s.width*s.height===k,fitsInViewportVertically:M===s.height,fitsInViewportHorizontally:R==s.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){let r=i.bottom-e.y,s=i.right-e.x,o=dw(this._overlayRef.getConfig().minHeight),c=dw(this._overlayRef.getConfig().minWidth),u=t.fitsInViewportVertically||o!=null&&o<=r,d=t.fitsInViewportHorizontally||c!=null&&c<=s;return u&&d}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let r=hw(e),s=this._viewportRect,o=Math.max(t.x+r.width-s.width,0),c=Math.max(t.y+r.height-s.height,0),u=Math.max(s.top-i.top-t.y,0),d=Math.max(s.left-i.left-t.x,0),f=0,p=0;return r.width<=s.width?f=d||-o:f=t.x<this._viewportMargin?s.left-i.left-t.x:0,r.height<=s.height?p=u||-c:p=t.y<this._viewportMargin?s.top-i.top-t.y:0,this._previousPushAmount={x:f,y:p},{x:t.x+f,y:t.y+p}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!Lx(this._lastScrollVisibility,i)){let r=new Nm(t,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=t.overlayY;t.overlayX==="center"?i="center":this._isRtl()?i=t.overlayX==="start"?"right":"left":i=t.overlayX==="start"?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){let i=this._viewportRect,r=this._isRtl(),s,o,c;if(e.overlayY==="top")o=t.y,s=i.height-o+this._viewportMargin;else if(e.overlayY==="bottom")c=i.height-t.y+this._viewportMargin*2,s=i.height-c+this._viewportMargin;else{let A=Math.min(i.bottom-t.y+i.top,t.y),R=this._lastBoundingBoxSize.height;s=A*2,o=t.y-A,s>R&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-R/2)}let u=e.overlayX==="start"&&!r||e.overlayX==="end"&&r,d=e.overlayX==="end"&&!r||e.overlayX==="start"&&r,f,p,b;if(d)b=i.width-t.x+this._viewportMargin*2,f=t.x-this._viewportMargin;else if(u)p=t.x,f=i.right-t.x;else{let A=Math.min(i.right-t.x+i.left,t.x),R=this._lastBoundingBoxSize.width;f=A*2,p=t.x-A,f>R&&!this._isInitialRender&&!this._growAfterOpen&&(p=t.x-R/2)}return{top:o,left:p,bottom:c,right:b,width:f,height:s}}_setBoundingBoxStyles(t,e){let i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Dt(i.height),r.top=Dt(i.top),r.bottom=Dt(i.bottom),r.width=Dt(i.width),r.left=Dt(i.left),r.right=Dt(i.right),e.overlayX==="center"?r.alignItems="center":r.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?r.justifyContent="center":r.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=Dt(s)),o&&(r.maxWidth=Dt(o))}this._lastBoundingBoxSize=i,Mi(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Mi(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Mi(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){let i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let f=this._viewportRuler.getViewportScrollPosition();Mi(i,this._getExactOverlayY(e,t,f)),Mi(i,this._getExactOverlayX(e,t,f))}else i.position="static";let c="",u=this._getOffset(e,"x"),d=this._getOffset(e,"y");u&&(c+=`translateX(${u}px) `),d&&(c+=`translateY(${d}px)`),i.transform=c.trim(),o.maxHeight&&(r?i.maxHeight=Dt(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=Dt(o.maxWidth):s&&(i.maxWidth="")),Mi(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),t.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=Dt(s.y);return r}_getExactOverlayX(t,e,i){let r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o;if(this._isRtl()?o=t.overlayX==="end"?"left":"right":o=t.overlayX==="end"?"right":"left",o==="right"){let c=this._document.documentElement.clientWidth;r.right=`${c-(s.x+this._overlayRect.width)}px`}else r.left=Dt(s.x);return r}_getScrollVisibility(){let t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:lw(t,i),isOriginOutsideView:Mm(t,i),isOverlayClipped:lw(e,i),isOverlayOutsideView:Mm(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return e==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Nr(t).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof bt)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}};function Mi(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function dw(n){if(typeof n!="number"&&n!=null){let[t,e]=n.split(Vx);return!e||e==="px"?parseFloat(t):null}return n||null}function hw(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function Lx(n,t){return n===t?!0:n.isOriginClipped===t.isOriginClipped&&n.isOriginOutsideView===t.isOriginOutsideView&&n.isOverlayClipped===t.isOverlayClipped&&n.isOverlayOutsideView===t.isOverlayOutsideView}var fw="cdk-global-overlay-wrapper",Lm=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){let e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(fw),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:c}=i,u=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),d=(s==="100%"||s==="100vh")&&(!c||c==="100%"||c==="100vh"),f=this._xPosition,p=this._xOffset,b=this._overlayRef.getConfig().direction==="rtl",A="",R="",M="";u?M="flex-start":f==="center"?(M="center",b?R=p:A=p):b?f==="left"||f==="end"?(M="flex-end",A=p):(f==="right"||f==="start")&&(M="flex-start",R=p):f==="left"||f==="start"?(M="flex-start",A=p):(f==="right"||f==="end")&&(M="flex-end",R=p),t.position=this._cssPosition,t.marginLeft=u?"0":A,t.marginTop=d?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=u?"0":R,e.justifyContent=M,e.alignItems=d?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(fw),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},Ux=(()=>{let t=class t{constructor(i,r,s,o){this._viewportRuler=i,this._document=r,this._platform=s,this._overlayContainer=o}global(){return new Lm}flexibleConnectedTo(i){return new Vm(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};t.\u0275fac=function(r){return new(r||t)(x(Mo),x(it),x(jt),x(pw))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),jx=0,jr=(()=>{let t=class t{constructor(i,r,s,o,c,u,d,f,p,b,A,R){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=s,this._positionBuilder=o,this._keyboardDispatcher=c,this._injector=u,this._ngZone=d,this._document=f,this._directionality=p,this._location=b,this._outsideClickDispatcher=A,this._animationsModuleType=R}create(i){let r=this._createHostElement(),s=this._createPaneElement(r),o=this._createPortalOutlet(s),c=new cl(i);return c.direction=c.direction||this._directionality.value,new Fm(o,r,s,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(i){let r=this._document.createElement("div");return r.id=`cdk-overlay-${jx++}`,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){let i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(qi)),new sl(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};t.\u0275fac=function(r){return new(r||t)(x(Ox),x(pw),x(ca),x(Ux),x(Nx),x(le),x(G),x(it),x(Vr),x(Gi),x(Fx),x(Xn,8))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Bx=new J("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let n=j(jr);return()=>n.scrollStrategies.reposition()}});function zx(n){return()=>n.scrollStrategies.reposition()}var $x={provide:Bx,deps:[jr],useFactory:zx},gw=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ut({type:t}),t.\u0275inj=lt({providers:[jr,$x],imports:[qn,ow,xm,xm]});let n=t;return n})();var vw={transformMenu:vs("transformMenu",[Wi("void",rn({opacity:0,transform:"scale(0.8)"})),ii("void => enter",ni("120ms cubic-bezier(0, 0, 0.2, 1)",rn({opacity:1,transform:"scale(1)"}))),ii("* => void",ni("100ms 25ms linear",rn({opacity:0})))]),fadeInItems:vs("fadeInItems",[Wi("showing",rn({opacity:1})),ii("void => *",[rn({opacity:0}),ni("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},PV=vw.fadeInItems,MV=vw.transformMenu;var qx=new J("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let n=j(jr);return()=>n.scrollStrategies.reposition()}});function Hx(n){return()=>n.scrollStrategies.reposition()}var Gx={provide:qx,deps:[jr],useFactory:Hx};var bw=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ut({type:t}),t.\u0275inj=lt({providers:[Gx],imports:[_s,il,Gt,gw,Pi,Gt]});let n=t;return n})();var yw=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ut({type:t}),t.\u0275inj=lt({imports:[Gt,Gt]});let n=t;return n})();var dl=["*"],Kx=["content"],Yx=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Qx=["mat-drawer","mat-drawer-content","*"];function Xx(n,t){if(n&1){let e=ua();Q(0,"div",1),Re("click",function(){na(e);let r=ti();return ia(r._onBackdropClicked())}),W()}if(n&2){let e=ti();re("mat-drawer-shown",e._isShowingBackdrop())}}function Zx(n,t){n&1&&(Q(0,"mat-drawer-content"),$t(1,2),W())}var Jx=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],tk=["mat-sidenav","mat-sidenav-content","*"];function ek(n,t){if(n&1){let e=ua();Q(0,"div",1),Re("click",function(){na(e);let r=ti();return ia(r._onBackdropClicked())}),W()}if(n&2){let e=ti();re("mat-drawer-shown",e._isShowingBackdrop())}}function nk(n,t){n&1&&(Q(0,"mat-sidenav-content"),$t(1,2),W())}var ik='.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color);background-color:var(--mat-sidenav-content-background-color);box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color);box-shadow:var(--mat-sidenav-container-elevation-shadow);background-color:var(--mat-sidenav-container-background-color);border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);width:var(--mat-sidenav-container-width);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}',ww={transformDrawer:vs("transform",[Wi("open, open-instant",rn({transform:"none",visibility:"visible"})),Wi("void",rn({"box-shadow":"none",visibility:"hidden"})),ii("void => open-instant",ni("0ms")),ii("void <=> open, open-instant => void",ni("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])};var rk=new J("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:sk}),Um=new J("MAT_DRAWER_CONTAINER");function sk(){return!1}var ll=(()=>{let t=class t extends Ur{constructor(i,r,s,o,c){super(s,o,c),this._changeDetectorRef=i,this._container=r}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}};t.\u0275fac=function(r){return new(r||t)(F(pe),F(ji(()=>Ew)),F(bt),F(Lr),F(G))},t.\u0275cmp=vt({type:t,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(r,s){r&2&&gs("margin-left",s._container._contentMargins.left,"px")("margin-right",s._container._contentMargins.right,"px")},standalone:!0,features:[me([{provide:Ur,useExisting:t}]),he,wt],ngContentSelectors:dl,decls:1,vars:0,template:function(r,s){r&1&&(fe(),$t(0))},encapsulation:2,changeDetection:0});let n=t;return n})(),Iw=(()=>{let t=class t{get position(){return this._position}set position(i){i=i==="end"?"end":"start",i!==this._position&&(this._isAttached&&this._updatePositionInParent(i),this._position=i,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(i){this._mode=i,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(i){this._disableClose=$n(i)}get autoFocus(){let i=this._autoFocus;return i??(this.mode==="side"?"dialog":"first-tabbable")}set autoFocus(i){(i==="true"||i==="false"||i==null)&&(i=$n(i)),this._autoFocus=i}get opened(){return this._opened}set opened(i){this.toggle($n(i))}constructor(i,r,s,o,c,u,d,f){this._elementRef=i,this._focusTrapFactory=r,this._focusMonitor=s,this._platform=o,this._ngZone=c,this._interactivityChecker=u,this._doc=d,this._container=f,this._focusTrap=null,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new at,this._animationEnd=new at,this._animationState="void",this.openedChange=new xt(!0),this._openedStream=this.openedChange.pipe(Ot(p=>p),tt(()=>{})),this.openedStart=this._animationStarted.pipe(Ot(p=>p.fromState!==p.toState&&p.toState.indexOf("open")===0),ds(void 0)),this._closedStream=this.openedChange.pipe(Ot(p=>!p),tt(()=>{})),this.closedStart=this._animationStarted.pipe(Ot(p=>p.fromState!==p.toState&&p.toState==="void"),ds(void 0)),this._destroyed=new at,this.onPositionChanged=new xt,this._modeChanged=new at,this.openedChange.subscribe(p=>{p?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{cs(this._elementRef.nativeElement,"keydown").pipe(Ot(p=>p.keyCode===27&&!this.disableClose&&!By(p)),Rt(this._destroyed)).subscribe(p=>this._ngZone.run(()=>{this.close(),p.stopPropagation(),p.preventDefault()}))}),this._animationEnd.pipe(Ui((p,b)=>p.fromState===b.fromState&&p.toState===b.toState)).subscribe(p=>{let{fromState:b,toState:A}=p;(A.indexOf("open")===0&&b==="void"||A==="void"&&b.indexOf("open")===0)&&this.openedChange.emit(this._opened)})}_forceFocus(i,r){this._interactivityChecker.isFocusable(i)||(i.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let s=()=>{i.removeEventListener("blur",s),i.removeEventListener("mousedown",s),i.removeAttribute("tabindex")};i.addEventListener("blur",s),i.addEventListener("mousedown",s)})),i.focus(r)}_focusByCssSelector(i,r){let s=this._elementRef.nativeElement.querySelector(i);s&&this._forceFocus(s,r)}_takeFocus(){if(!this._focusTrap)return;let i=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{!r&&typeof this._elementRef.nativeElement.focus=="function"&&i.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus);break}}_restoreFocus(i){this.autoFocus!=="dialog"&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,i):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){let i=this._doc.activeElement;return!!i&&this._elementRef.nativeElement.contains(i)}ngAfterViewInit(){this._isAttached=!0,this._position==="end"&&this._updatePositionInParent("end"),this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState())}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap?.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(i){return this.toggle(!0,i)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(i=!this.opened,r){i&&r&&(this._openedVia=r);let s=this._setOpen(i,!i&&this._isFocusWithinDrawer(),this._openedVia||"program");return i||(this._openedVia=null),s}_setOpen(i,r,s){return this._opened=i,i?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",r&&this._restoreFocus(s)),this._updateFocusTrapState(),new Promise(o=>{this.openedChange.pipe(ie(1)).subscribe(c=>o(c?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop)}_updatePositionInParent(i){if(!this._platform.isBrowser)return;let r=this._elementRef.nativeElement,s=r.parentNode;i==="end"?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),s.insertBefore(this._anchor,r)),s.appendChild(r)):this._anchor&&this._anchor.parentNode.insertBefore(r,this._anchor)}};t.\u0275fac=function(r){return new(r||t)(F(bt),F(Yy),F(Xy),F(jt),F(G),F(wm),F(it,8),F(Um,8))},t.\u0275cmp=vt({type:t,selectors:[["mat-drawer"]],viewQuery:function(r,s){if(r&1&&zi(Kx,5),r&2){let o;xe(o=ke())&&(s._content=o.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(r,s){r&1&&og("@transform.start",function(c){return s._animationStarted.next(c)})("@transform.done",function(c){return s._animationEnd.next(c)}),r&2&&(sg("@transform",s._animationState),De("align",null),re("mat-drawer-end",s.position==="end")("mat-drawer-over",s.mode==="over")("mat-drawer-push",s.mode==="push")("mat-drawer-side",s.mode==="side")("mat-drawer-opened",s.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],standalone:!0,features:[wt],ngContentSelectors:dl,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(r,s){r&1&&(fe(),Q(0,"div",1,0),$t(2),W())},dependencies:[Ur],encapsulation:2,data:{animation:[ww.transformDrawer]},changeDetection:0});let n=t;return n})(),Ew=(()=>{let t=class t{get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(i){this._autosize=$n(i)}get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(i){this._backdropOverride=i==null?null:$n(i)}get scrollable(){return this._userContent||this._content}constructor(i,r,s,o,c,u=!1,d){this._dir=i,this._element=r,this._ngZone=s,this._changeDetectorRef=o,this._animationMode=d,this._drawers=new sa,this.backdropClick=new xt,this._destroyed=new at,this._doCheckSubject=new at,this._contentMargins={left:null,right:null},this._contentMarginChanges=new at,i&&i.change.pipe(Rt(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),c.change().pipe(Rt(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=u}ngAfterContentInit(){this._allDrawers.changes.pipe(Ze(this._allDrawers),Rt(this._destroyed)).subscribe(i=>{this._drawers.reset(i.filter(r=>!r._container||r._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Ze(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(i=>{this._watchDrawerToggle(i),this._watchDrawerPosition(i),this._watchDrawerMode(i)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(us(10),Rt(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(i=>i.open())}close(){this._drawers.forEach(i=>i.close())}updateContentMargins(){let i=0,r=0;if(this._left&&this._left.opened){if(this._left.mode=="side")i+=this._left._getWidth();else if(this._left.mode=="push"){let s=this._left._getWidth();i+=s,r-=s}}if(this._right&&this._right.opened){if(this._right.mode=="side")r+=this._right._getWidth();else if(this._right.mode=="push"){let s=this._right._getWidth();r+=s,i-=s}}i=i||null,r=r||null,(i!==this._contentMargins.left||r!==this._contentMargins.right)&&(this._contentMargins={left:i,right:r},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(i){i._animationStarted.pipe(Ot(r=>r.fromState!==r.toState),Rt(this._drawers.changes)).subscribe(r=>{r.toState!=="open-instant"&&this._animationMode!=="NoopAnimations"&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),i.mode!=="side"&&i.openedChange.pipe(Rt(this._drawers.changes)).subscribe(()=>this._setContainerClass(i.opened))}_watchDrawerPosition(i){i&&i.onPositionChanged.pipe(Rt(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(ie(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(i){i&&i._modeChanged.pipe(Rt(Zo(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(i){let r=this._element.nativeElement.classList,s="mat-drawer-container-has-open";i?r.add(s):r.remove(s)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(i=>{i.position=="end"?(this._end!=null,this._end=i):(this._start!=null,this._start=i)}),this._right=this._left=null,this._dir&&this._dir.value==="rtl"?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&this._start.mode!="over"||this._isDrawerOpen(this._end)&&this._end.mode!="over"}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(i=>i&&!i.disableClose&&this._drawerHasBackdrop(i)).forEach(i=>i._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(i){return i!=null&&i.opened}_drawerHasBackdrop(i){return this._backdropOverride==null?!!i&&i.mode!=="side":this._backdropOverride}};t.\u0275fac=function(r){return new(r||t)(F(Vr,8),F(bt),F(G),F(pe),F(Mo),F(rk),F(Xn,8))},t.\u0275cmp=vt({type:t,selectors:[["mat-drawer-container"]],contentQueries:function(r,s,o){if(r&1&&(ei(o,ll,5),ei(o,Iw,5)),r&2){let c;xe(c=ke())&&(s._content=c.first),xe(c=ke())&&(s._allDrawers=c)}},viewQuery:function(r,s){if(r&1&&zi(ll,5),r&2){let o;xe(o=ke())&&(s._userContent=o.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(r,s){r&2&&re("mat-drawer-container-explicit-backdrop",s._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],standalone:!0,features:[me([{provide:Um,useExisting:t}]),wt],ngContentSelectors:Qx,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(r,s){r&1&&(fe(Yx),Zn(0,Xx,1,2,"div",0),$t(1),$t(2,1),Zn(3,Zx,2,0,"mat-drawer-content")),r&2&&(Jn(0,s.hasBackdrop?0:-1),en(3),Jn(3,s._content?-1:3))},dependencies:[ll],styles:['.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color);background-color:var(--mat-sidenav-content-background-color);box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color);box-shadow:var(--mat-sidenav-container-elevation-shadow);background-color:var(--mat-sidenav-container-background-color);border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);width:var(--mat-sidenav-container-width);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0});let n=t;return n})(),ul=(()=>{let t=class t extends ll{constructor(i,r,s,o,c){super(i,r,s,o,c)}};t.\u0275fac=function(r){return new(r||t)(F(pe),F(ji(()=>Bm)),F(bt),F(Lr),F(G))},t.\u0275cmp=vt({type:t,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(r,s){r&2&&gs("margin-left",s._container._contentMargins.left,"px")("margin-right",s._container._contentMargins.right,"px")},standalone:!0,features:[me([{provide:Ur,useExisting:t}]),he,wt],ngContentSelectors:dl,decls:1,vars:0,template:function(r,s){r&1&&(fe(),$t(0))},encapsulation:2,changeDetection:0});let n=t;return n})(),jm=(()=>{let t=class t extends Iw{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(i){this._fixedInViewport=$n(i)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(i){this._fixedTopGap=xo(i)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(i){this._fixedBottomGap=xo(i)}};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=Je(t)))(s||t)}})(),t.\u0275cmp=vt({type:t,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(r,s){r&2&&(De("align",null),gs("top",s.fixedInViewport?s.fixedTopGap:null,"px")("bottom",s.fixedInViewport?s.fixedBottomGap:null,"px"),re("mat-drawer-end",s.position==="end")("mat-drawer-over",s.mode==="over")("mat-drawer-push",s.mode==="push")("mat-drawer-side",s.mode==="side")("mat-drawer-opened",s.opened)("mat-sidenav-fixed",s.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],standalone:!0,features:[he,wt],ngContentSelectors:dl,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(r,s){r&1&&(fe(),Q(0,"div",1,0),$t(2),W())},dependencies:[Ur],encapsulation:2,data:{animation:[ww.transformDrawer]},changeDetection:0});let n=t;return n})(),Bm=(()=>{let t=class t extends Ew{constructor(){super(...arguments),this._allDrawers=void 0,this._content=void 0}};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=Je(t)))(s||t)}})(),t.\u0275cmp=vt({type:t,selectors:[["mat-sidenav-container"]],contentQueries:function(r,s,o){if(r&1&&(ei(o,ul,5),ei(o,jm,5)),r&2){let c;xe(c=ke())&&(s._content=c.first),xe(c=ke())&&(s._allDrawers=c)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(r,s){r&2&&re("mat-drawer-container-explicit-backdrop",s._backdropOverride)},exportAs:["matSidenavContainer"],standalone:!0,features:[me([{provide:Um,useExisting:t}]),he,wt],ngContentSelectors:tk,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(r,s){r&1&&(fe(Jx),Zn(0,ek,1,2,"div",0),$t(1),$t(2,1),Zn(3,nk,2,0,"mat-sidenav-content")),r&2&&(Jn(0,s.hasBackdrop?0:-1),en(3),Jn(3,s._content?-1:3))},dependencies:[ul],styles:[ik],encapsulation:2,changeDetection:0});let n=t;return n})(),Tw=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ut({type:t}),t.\u0275inj=lt({imports:[Gt,Pi,Pi,Gt]});let n=t;return n})();var Cw=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=vt({type:t,selectors:[["app-home"]],standalone:!0,features:[wt],decls:26,vars:0,consts:[[1,"nav"],["id","navs"],["href","#"],["routerLink","quiensoy"]],template:function(r,s){r&1&&(Q(0,"div")(1,"mat-sidenav-container",0)(2,"mat-sidenav"),yt(3,"Start"),W(),Q(4,"mat-sidenav-content",1)(5,"h1"),yt(6,"SALA DE JUEGOS"),W(),Q(7,"div")(8,"ul")(9,"li")(10,"a",2),yt(11,"Home"),W()(),Q(12,"li")(13,"a",2),yt(14,"Features"),W()(),Q(15,"li")(16,"a",2),yt(17,"Pricing"),W()(),Q(18,"li")(19,"a",2),yt(20,"Disabled"),W()()()()(),Q(21,"section"),yt(22,"Main"),W()()(),Q(23,"button",3),yt(24,"Quien Soy"),W(),kt(25,"router-outlet"))},dependencies:[Vs,i_,bw,yw,Tw,jm,Bm,ul],styles:["#navs[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;background-color:#d3d3d3}ul[_ngcontent-%COMP%]{display:flex;list-style-type:none;border-radius:5px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;margin:5px 10px}"]});let n=t;return n})();var Aw=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ut({type:t}),t.\u0275inj=lt({imports:[Gt,il,Gt]});let n=t;return n})();var Sw=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ut({type:t}),t.\u0275inj=lt({imports:[Gt,_s,Gt]});let n=t;return n})();var Dw=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=vt({type:t,selectors:[["app-quien-soy"]],standalone:!0,features:[wt],decls:0,vars:0,template:function(r,s){},dependencies:[Sw,Aw],styles:['.foto[_ngcontent-%COMP%]{width:100%;height:150%}.container[_ngcontent-%COMP%]{display:flex;justify-content:center}.example-card[_ngcontent-%COMP%]{max-width:400px}.example-header-image[_ngcontent-%COMP%]{background-image:url("./media/Foto-CV-Gonza-Iglesias-NI2RQ6B7.png");background-size:cover}']});let n=t;return n})();var Rw=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:Ly},{path:"home",component:Cw,children:[{path:"quiensoy",component:Dw}]},{path:"**",component:Uy}];var ak="@",ck=(()=>{let t=class t{constructor(i,r,s,o,c){this.doc=i,this.delegate=r,this.zone=s,this.animationType=o,this.moduleImpl=c,this._rendererFactoryPromise=null,this.scheduler=j(tg,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-2LN7ZP6Y.js")).catch(r=>{throw new St(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc,this.scheduler);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(i,r){let s=this.delegate.createRenderer(i,r);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let o=new zm(s);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(c=>{let u=c.createRenderer(i,r);o.use(u)}).catch(c=>{o.use(s)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};t.\u0275fac=function(r){aa()},t.\u0275prov=U({token:t,factory:t.\u0275fac});let n=t;return n})(),zm=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,i,r){this.delegate.insertBefore(t,e,i,r)}removeChild(t,e,i){this.delegate.removeChild(t,e,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(t,e,i)),this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(t,e,i)),this.delegate.listen(t,e,i)}shouldReplay(t){return this.replay!==null&&t.startsWith(ak)}};function xw(n="animations"){return eg("NgAsyncAnimations"),Se([{provide:la,useFactory:(t,e,i)=>new ck(t,e,i,n),deps:[it,ma,G]},{provide:Xn,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var kw={providers:[r_(Rw),xw(),Z_(()=>J_({projectId:"sala-de-juegos-652db",appId:"1:578474203245:web:9c8f0abd2599479aba4764",storageBucket:"sala-de-juegos-652db.appspot.com",apiKey:"AIzaSyCaDXkI7jxgFTzNaisetKtNaSAxWKrxTWI",authDomain:"sala-de-juegos-652db.firebaseapp.com",messagingSenderId:"578474203245"})),zv(()=>$v()),Oy(()=>Vy())]};var Pw=(()=>{let t=class t{constructor(){this.title="SalaDeJuegos"}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=vt({type:t,selectors:[["app-root"]],standalone:!0,features:[wt],decls:3,vars:0,template:function(r,s){r&1&&(Q(0,"title"),yt(1,"Sala de Juegos"),W(),kt(2,"router-outlet"))},dependencies:[Vs]});let n=t;return n})();Ig(Pw,kw).catch(n=>console.error(n));
